<!DOCTYPE html>
    <html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Popeye Gym - متجر المكملات الغذائية </title>
        <meta name="description" content="PopeyeGym -أفضل المكملات الغذائية باسعار مميزة."

        <!-- Open Graph Meta Tags for Social Media Sharing -->
        <meta property="og:title" content="Popeye Gym والمكملات الغذائية">
        <meta property="og:description" content="Popeye Gym - أفضل المكملات الغذائية بأسعار مميزة.">
        <meta property="og:image" content="/images/logo.png">
        <meta property="og:url" content="">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Popeye Gym">
        <meta property="og:locale" content="ar_EG">

        <!-- Twitter Card Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Popeye Gym - معدات اللياقة البدنية والمكملات الغذائية">
        <meta name="twitter:description" content="Popeye Gym - أفضل المكملات الغذائية ومعدات اللياقة البدنية الاحترافية بأسعار مميزة.">
        <meta name="twitter:image" content="/images/logo.png">

        <!-- Additional Meta Tags -->
        <meta name="robots" content="index, follow">
        <meta name="author" content="Popeye Gym">
        <meta name="keywords" content="جيم, لياقة بدنية, مكملات غذائية, معدات رياضية, تدريب, عضلات">

        <!-- Dynamic Meta Tags for Product Pages -->
        <meta id="dynamic-og-title" property="og:title" content="">
        <meta id="dynamic-og-description" property="og:description" content="">
        <meta id="dynamic-og-image" property="og:image" content="">
        <meta id="dynamic-twitter-title" name="twitter:title" content="">
        <meta id="dynamic-twitter-description" name="twitter:description" content="">
        <meta id="dynamic-twitter-image" name="twitter:image" content="">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --primary-color: #dc3545;
                --secondary-color: #2c3e50;
                --accent-color: #dc3545;
                --success-color: #8B0000;
                --background-color: #ffffff;
                --text-color: #2c3e50;
                --text-muted: #6c757d;
                --border-color: #dee2e6;
                --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
                --border-radius: 12px;
                --transition: all 0.3s ease;
            }

            body {
                font-family: 'Arial', sans-serif;
                background-color: var(--background-color);
                color: var(--text-color);
                line-height: 1.6;
                overflow-x: hidden;
            }

            /* Header Styles - New Structure */
            .header {
                background: var(--primary-color);
                color: white;
                position: sticky;
                top: 0;
                z-index: 1000;
                box-shadow: none;
            }

            /* Header Top Section */
            .header-top {
                padding: 0.5rem 0;
                display: flex;
                justify-content: space-between;
                align-items: center;
                max-width: 1200px;
                margin: 0 auto;
                padding: 0.5rem 2rem;
                position: relative;
            }











            /* Header Center Section */
            .header-center {
                text-align: right;
                flex: 1;
                padding: 0 2rem 0 1rem;
                margin-right: 1rem;
            }

            .logo-section {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 1rem;
            }

            .logo {
                width: 60px;
                height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
            }

            .logo:hover {
                transform: scale(1.05);
            }

            .logo img {
                width: 100%;
                height: 100%;
                object-fit: contain;
            }

            .brand-text h1 {
                font-size: 1.4rem;
                font-weight: 700;
                margin: 0 0 0.2rem 0;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .brand-text p {
                font-size: 0.75rem;
                opacity: 0.9;
                margin: 0;
                line-height: 1.3;
            }

            /* Header Middle Section - Search Bar */
            .header-middle {
                padding: 0.5rem 0;
            }

            .header-middle-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                display: flex;
                justify-content: center;
            }

            .compact-search-bar {
                position: relative;
                max-width: 300px;
                width: 100%;
            }

            .compact-search-bar input {
                width: 100%;
                padding: 0.5rem 2.5rem 0.5rem 1rem;
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 20px;
                background: rgba(255, 255, 255, 0.1);
                color: white;
                font-size: 0.8rem;
                transition: all 0.3s ease;
                box-shadow: none;
                outline: none;
            }

            .compact-search-bar input::placeholder {
                color: rgba(255, 255, 255, 0.7);
            }

            .compact-search-bar input:focus {
                outline: none;
                border-color: rgba(255, 255, 255, 0.5);
                background: rgba(255, 255, 255, 0.2);
            }

            .compact-search-bar .search-icon {
                position: absolute;
                right: 0.8rem;
                top: 50%;
                transform: translateY(-50%);
                color: rgba(255, 255, 255, 0.7);
                font-size: 1rem;
                cursor: pointer;
                transition: color 0.3s ease;
                border: none;
                background: none;
                outline: none;
                box-shadow: none;
            }

            .compact-search-bar .search-icon:hover {
                color: white;
            }



            /* Header Bottom Section - Navigation Menu */
            .header-bottom {
                padding: 0.5rem 0;
            }

            .header-bottom-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                display: flex;
                justify-content: center;
                gap: 1rem;
                flex-wrap: wrap;
            }

            .nav-dropdown {
                position: relative;
                display: inline-block;
            }

            .nav-dropdown-btn {
                background: none;
                border: none;
                color: white;
                padding: 0.4rem 0.8rem;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.3rem;
                font-size: 0.75rem;
                font-weight: normal;
                position: relative;
                overflow: hidden;
                box-shadow: none;
                outline: none;
                text-shadow: none;
            }

            .nav-dropdown-btn:hover {
                opacity: 0.8;
            }

            .nav-dropdown-btn i {
                transition: transform 0.3s ease;
            }

            .nav-dropdown.active .nav-dropdown-btn i {
                transform: rotate(180deg);
            }

            .nav-dropdown-content {
                position: absolute;
                top: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: white;
                border-radius: 8px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                z-index: 1500;
                min-width: 220px;
                overflow: visible;
                margin-top: 0.5rem;
                opacity: 0;
                visibility: hidden;
                transform: translateX(-50%) translateY(-10px);
                transition: all 0.3s ease;
                white-space: nowrap;
            }

            .nav-dropdown.active .nav-dropdown-content {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) translateY(0);
            }

            .nav-dropdown-item {
                padding: 0.8rem 1.2rem;
                cursor: pointer;
                transition: all 0.3s ease;
                border-bottom: 1px solid #f0f0f0;
                display: flex;
                align-items: center;
                gap: 0.6rem;
                color: var(--text-color);
                font-weight: 500;
                font-size: 0.85rem;
            }

            .nav-dropdown-item:hover {
                background: #ffffff;
                color: var(--primary-color);
            }

            .nav-dropdown-item:last-child {
                border-bottom: none;
            }

            .nav-dropdown-item i {
                color: var(--primary-color);
                font-size: 1rem;
            }





            .hidden {
                display: none !important;
            }



            /* Modal Styles */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                padding: 1rem;
                backdrop-filter: blur(5px);
            }

            .modal-content {
                background: white;
                border-radius: var(--border-radius);
                max-width: 90vw;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: var(--shadow-lg);
                position: relative;
            }

            .modal-header {
                padding: 1.5rem;
                border-bottom: 1px solid var(--border-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: var(--background-color);
            }

            .modal-header h2 {
                margin: 0;
                color: var(--secondary-color);
                font-size: 1.5rem;
            }

            .close-btn {
                background: none;
                border: none;
                font-size: 1.5rem;
                cursor: pointer;
                color: var(--text-muted);
                padding: 0.5rem;
                border-radius: 50%;
                transition: var(--transition);
            }

            .close-btn:hover {
                background: var(--border-color);
                color: var(--primary-color);
            }

            /* Report Modal Styles */
            .report-modal {
                width: 100%;
                max-width: 500px;
            }

            .report-form {
                padding: 1.5rem;
            }

            .form-group {
                margin-bottom: 1.5rem;
            }

            .form-group label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 500;
                color: var(--secondary-color);
            }

            .form-input,
            .form-textarea,
            .form-select {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius);
                font-size: 1rem;
                transition: var(--transition);
            }

            .form-input:focus,
            .form-textarea:focus,
            .form-select:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
            }

            .form-textarea {
                min-height: 120px;
                resize: vertical;
            }

            .form-actions {
                display: flex;
                gap: 1rem;
                justify-content: flex-end;
            }

            .btn-primary,
            .btn-secondary,
            .calculate-btn {
                padding: 0.75rem 1.5rem;
                border: none;
                border-radius: var(--border-radius);
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                transition: var(--transition);
            }

            .btn-primary {
                background: var(--primary-color);
                color: white;
            }

            .btn-primary:hover:not(:disabled) {
                background: #dc3545;
            }

            .btn-primary:disabled {
                background: var(--text-muted);
                cursor: not-allowed;
            }

            .btn-secondary {
                background: var(--border-color);
                color: var(--text-color);
            }

            .btn-secondary:hover {
                background: #ccc;
            }

            .calculate-btn {
                background: var(--success-color);
                color: white;
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .calculate-btn:hover {
                background: #8B0000;
            }

            /* Ultra Modern Calorie Calculator Styles - Inspired by Popeye Gym Brand */
            /* Modern Calorie Calculator inspired by Popeye Gym brand */
            .ultra-calculator {
                width: 95%;
                max-width: 680px;
                background: #ffffff;
                border-radius: 30px;
                overflow: hidden;
                box-shadow: 
                    0 30px 80px rgba(0, 0, 0, 0.3),
                    0 0 0 1px rgba(231, 76, 60, 0.2);
                position: relative;
                backdrop-filter: blur(20px);
                max-height: 90vh;
                overflow-y: auto;
                border: 2px solid rgba(231, 76, 60, 0.3);
            }

            /* Ultra-Modern Calculator Header */
            .ultra-calc-header {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                color: white;
                padding: 2rem;
                position: relative;
                border-top-left-radius: 30px;
                border-top-right-radius: 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .calc-header-left {
                display: flex;
                align-items: center;
                justify-content: flex-start;
                flex: 1;
            }

            .calc-header-center {
                display: flex;
                align-items: center;
                justify-content: center;
                flex: 2;
            }

            .calc-header-right {
                display: flex;
                align-items: center;
                justify-content: flex-end;
                flex: 1;
            }

            .calc-logo {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                background: transparent;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .calc-logo img {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                object-fit: cover;
            }

            .calc-title {
                font-size: 1.8rem;
                font-weight: 800;
                margin: 0;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .calc-share-btn {
                background: rgba(255, 255, 255, 0.15);
                border: 2px solid rgba(255, 255, 255, 0.3);
                color: white;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.3rem;
                transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                backdrop-filter: blur(15px);
                position: relative;
                overflow: hidden;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            }

            .calc-share-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.6s ease;
            }

            .calc-share-btn:hover::before {
                left: 100%;
            }

            .calc-share-btn:hover {
                background: rgba(255, 255, 255, 0.25);
                border-color: rgba(255, 255, 255, 0.5);
                transform: scale(1.1) rotate(15deg);
                box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
            }

            .calc-share-btn:active {
                transform: scale(0.95) rotate(5deg);
            }

            .calc-close-btn {
                background: rgba(255, 255, 255, 0.15);
                border: 2px solid rgba(255, 255, 255, 0.3);
                color: white;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.3rem;
                transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                backdrop-filter: blur(15px);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            }

            .calc-close-btn:hover {
                background: rgba(220, 53, 69, 0.8);
                border-color: rgba(220, 53, 69, 0.9);
                transform: scale(1.1) rotate(90deg);
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
            }

            .calc-close-btn:active {
                transform: scale(0.95) rotate(45deg);
            }

            /* Calculator Pages */
            .calc-page {
                padding: 2rem;
                display: none;
                background: #ffffff;
                color: #2c3e50;
            }

            .calc-page.active {
                display: block;
                animation: fadeInUp 0.5s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(300px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes slideOutRight {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(300px);
                }
            }

            /* Input Form Styles */
            .calc-form-section {
                background: #ffffff;
                border-radius: 20px;
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border: 2px solid rgba(231, 76, 60, 0.1);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            }

            .calc-form-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
                margin-top: 1rem;
            }

            .calc-form-group {
                position: relative;
            }

            .calc-form-label {
                color: #2c3e50;
                font-weight: 600;
                margin-bottom: 0.5rem;
                display: block;
                font-size: 1rem;
            }

            .calc-form-input, .calc-form-select {
                width: 100%;
                padding: 1rem;
                border: 2px solid rgba(108, 117, 125, 0.3);
                border-radius: 15px;
                background: #ffffff;
                color: #2c3e50;
                font-size: 1rem;
                transition: all 0.3s ease;
                font-weight: 500;
            }

            .calc-form-input:focus, .calc-form-select:focus {
                outline: none;
                border-color: #dc3545;
                box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
                background: #ffffff;
            }

            .calc-form-input::placeholder {
                color: rgba(108, 117, 125, 0.7);
            }

            .calc-form-select option {
                background: white;
                color: #2c3e50;
                padding: 0.5rem;
            }

            .calc-form-select option:hover {
                background: rgba(220, 53, 69, 0.1);
            }

            .calc-form-help {
                color: #6c757d;
                font-size: 0.9rem;
                margin-top: 0.5rem;
                font-weight: 500;
            }

            /* Calculate Button */
            .calc-btn {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                color: white;
                border: none;
                padding: 1.2rem 2rem;
                border-radius: 25px;
                font-size: 1.1rem;
                font-weight: 700;
                cursor: pointer;
                width: 100%;
                margin-top: 2rem;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3);
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .calc-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 35px rgba(231, 76, 60, 0.4);
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
            }

            /* Results Page Styles */
            .calc-results-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
                background: rgba(255, 255, 255, 0.95);
                padding: 1rem 1.5rem;
                border-radius: 20px;
                border: 2px solid rgba(220, 53, 69, 0.2);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }

            .calc-back-btn {
                background: linear-gradient(135deg, #dc3545, #c82333);
                border: none;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 20px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 0.8rem;
                transition: all 0.3s ease;
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
                font-weight: 600;
                font-size: 1rem;
            }

            .calc-back-btn:hover {
                background: linear-gradient(135deg, #c82333, #dc3545);
                transform: translateY(-3px);
                box-shadow: 0 10px 30px rgba(220, 53, 69, 0.4);
            }

            .calc-results-title {
                color: #2c3e50;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0;
            }




            /* Results Grid */
            .calc-results-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .calc-result-card {
                background: #ffffff;
                border-radius: 20px;
                padding: 1.5rem;
                text-align: center;
                border: 2px solid rgba(231, 76, 60, 0.1);
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }

            .calc-result-card:hover {
                background: #ffffff;
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(231, 76, 60, 0.2);
                border-color: #dc3545;
            }

            .calc-result-icon {
                font-size: 2rem;
                color: #dc3545;
                margin-bottom: 1rem;
            }

            .calc-result-label {
                color: #2c3e50;
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
                font-weight: 600;
            }

            .calc-result-value {
                color: #dc3545;
                font-size: 2rem;
                font-weight: 800;
                margin-bottom: 0.5rem;
            }

            .calc-result-unit {
                color: #6c757d;
                font-size: 0.85rem;
                font-weight: 500;
            }

            /* Food Calculator Specific Styles */
            .food-calc-container {
                padding: 2rem;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                height: auto;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                gap: 0;
            }

            .meals-section {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
                flex: 1;
                margin-bottom: 0;
                padding-bottom: 0;
            }

            .meal-container {
                background: white;
                border: 2px solid rgba(220, 53, 69, 0.2);
                border-radius: 15px;
                padding: 1.5rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            }

            .meal-container:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.2);
                border-color: #dc3545;
            }

            .meal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
                padding-bottom: 1rem;
                border-bottom: 2px solid rgba(220, 53, 69, 0.2);
            }

            .meal-title {
                color: #2c3e50;
                font-size: 1.3rem;
                font-weight: 700;
                margin: 0;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .meal-title i {
                color: #dc3545;
                font-size: 1.1rem;
            }

            .add-food-btn {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                color: white;
                border: none;
                padding: 0.7rem 1.2rem;
                border-radius: 10px;
                cursor: pointer;
                font-size: 0.9rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
            }

            .add-food-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
                background: linear-gradient(135deg, #c82333 0%, #c82333 100%);
            }

            .meal-foods {
                margin-bottom: 1rem;
                min-height: 0;
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .meal-foods:empty {
                margin-bottom: 0;
                min-height: 0;
            }

            .food-item {
                background: rgba(248, 249, 250, 0.8);
                border: 1px solid rgba(220, 53, 69, 0.2);
                border-radius: 8px;
                padding: 0.8rem;
                margin-bottom: 0.5rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                transition: all 0.3s ease;
            }

            .food-item:hover {
                background: rgba(220, 53, 69, 0.05);
                border-color: #dc3545;
            }

            .food-name {
                color: #2c3e50;
                font-weight: 600;
                flex: 1;
            }

            .food-quantity {
                color: #6c757d;
                font-size: 0.9rem;
                margin: 0 1rem;
                font-weight: 500;
            }

            .food-calories {
                color: #dc3545;
                font-weight: 700;
                margin: 0 1rem;
            }

            .remove-food-btn {
                background: rgba(231, 76, 60, 0.1);
                border: 1px solid rgba(231, 76, 60, 0.3);
                color: #dc3545;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
            }

            .remove-food-btn:hover {
                background: rgba(231, 76, 60, 0.2);
                transform: scale(1.1);
                color: #c82333;
            }

            .meal-totals {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 0.8rem;
                padding: 1rem;
                background: rgba(220, 53, 69, 0.05);
                border-radius: 8px;
                border: 1px solid rgba(220, 53, 69, 0.2);
            }

            .total-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.3rem;
            }

            .total-label {
                font-size: 0.8rem;
                color: #6c757d;
                font-weight: 600;
            }

            .total-value {
                font-size: 1.1rem;
                color: #dc3545;
                font-weight: 700;
            }

            .total-unit {
                font-size: 0.7rem;
                color: #6c757d;
            }

            .daily-total {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                border-radius: 15px;
                padding: 2rem;
                margin-top: 2rem;
                box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
            }

            .daily-total-title {
                color: #FFFFFF;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0 0 1.5rem 0;
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .daily-totals-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 1rem;
            }

            .daily-total-card {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                transition: all 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .daily-total-card:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: translateY(-3px);
            }

            .daily-total-icon {
                font-size: 2rem;
                color: #FFFFFF;
                margin-bottom: 1rem;
            }

            .daily-total-label {
                color: rgba(255, 255, 255, 0.9);
                font-size: 0.9rem;
                font-weight: 500;
                margin-bottom: 0.5rem;
            }

            .daily-total-value {
                color: #FFFFFF;
                font-size: 1.8rem;
                font-weight: 800;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .action-buttons {
                display: flex;
                justify-content: center;
                gap: 1rem;
                margin-top: 2rem;
                flex-wrap: wrap;
            }

            .calc-btn.secondary {
                background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                color: white;
            }

            .calc-btn.secondary:hover {
                background: linear-gradient(135deg, #5a6268 0%, #343a40 100%);
                transform: translateY(-2px);
            }

            .calc-btn.primary {
                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                color: white;
            }

            .calc-btn.primary:hover {
                background: linear-gradient(135deg, #218838 0%, #17a2b8 100%);
                transform: translateY(-2px);
            }

            /* Food Modal Styles */
            .food-modal {
                max-width: 900px;
                max-height: 85vh;
                width: 90vw;
                background: white;
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
                border: 2px solid rgba(220, 53, 69, 0.2);
                display: flex;
                flex-direction: column;
            }

            .food-modal-body {
                padding: 1.5rem;
                flex: 1;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                min-height: 0;
                gap: 1rem;
            }

            .food-search-section {
                margin-bottom: 2rem;
            }

            .search-container {
                position: relative;
                max-width: 400px;
                margin: 0 auto;
            }

            .search-input {
                width: 100%;
                padding: 1rem 1rem 1rem 3rem;
                border: 2px solid rgba(220, 53, 69, 0.3);
                border-radius: 50px;
                background: white;
                color: #2c3e50;
                font-size: 1rem;
                transition: all 0.3s ease;
            }

            .search-input:focus {
                outline: none;
                border-color: #dc3545;
                box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
            }

            .search-input::placeholder {
                color: #6c757d;
            }

            .search-icon {
                position: absolute;
                left: 1rem;
                top: 50%;
                transform: translateY(-50%);
                color: #6c757d;
                font-size: 1.1rem;
            }

            .food-categories {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                margin-bottom: 2rem;
                justify-content: center;
            }

            .category-btn {
                background: white;
                border: 2px solid rgba(220, 53, 69, 0.3);
                color: #2c3e50;
                padding: 0.5rem 1rem;
                border-radius: 25px;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 0.9rem;
                font-weight: 500;
            }

            .category-btn.active,
            .category-btn:hover {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                border-color: #dc3545;
                color: #FFFFFF;
                transform: translateY(-2px);
            }

            .food-list {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
                margin-bottom: 1rem;
                max-height: 300px;
                overflow-y: auto;
                flex-shrink: 0;
            }

            .food-list-item {
                background: rgba(248, 249, 250, 0.8);
                border: 2px solid rgba(220, 53, 69, 0.2);
                border-radius: 12px;
                padding: 1rem;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .food-list-item:hover,
            .food-list-item.selected {
                background: rgba(220, 53, 69, 0.05);
                border-color: #dc3545;
                transform: translateY(-2px);
            }

            .food-list-item h5 {
                color: #2c3e50;
                margin: 0 0 0.5rem 0;
                font-size: 1rem;
                font-weight: 600;
            }

            .food-list-item .nutrition-summary {
                font-size: 0.8rem;
                color: #6c757d;
                line-height: 1.4;
            }

            .selected-food-details {
                background: white;
                border: 2px solid rgba(220, 53, 69, 0.2);
                border-radius: 15px;
                padding: 1.5rem;
                margin-top: 1rem;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                flex-shrink: 0;
            }

            .selected-food-details h4 {
                color: #2c3e50;
                margin: 0 0 1.5rem 0;
                font-size: 1.3rem;
                font-weight: 700;
            }

            .food-info .food-name {
                color: #dc3545;
                font-size: 1.2rem;
                font-weight: 700;
                margin-bottom: 1rem;
            }

            .food-nutrition {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .nutrition-item {
                display: flex;
                justify-content: space-between;
                padding: 0.5rem 0;
                border-bottom: 1px solid rgba(220, 53, 69, 0.2);
            }

            .nutrition-item span:first-child {
                color: #6c757d;
                font-weight: 500;
            }

            .nutrition-item span:last-child {
                color: #2c3e50;
                font-weight: 600;
            }

            .quantity-section {
                margin-bottom: 1.5rem;
            }

            .quantity-section label {
                color: #2c3e50;
                font-weight: 600;
                margin-bottom: 0.5rem;
                display: block;
            }

            .quantity-section input {
                width: 100%;
                max-width: 200px;
                padding: 0.8rem;
                border: 2px solid rgba(220, 53, 69, 0.3);
                border-radius: 8px;
                background: white;
                color: #2c3e50;
                font-size: 1rem;
                transition: all 0.3s ease;
            }

            .quantity-section input:focus {
                outline: none;
                border-color: #dc3545;
                box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
            }

            .add-to-meal-btn {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                color: white;
                border: none;
                padding: 1rem 2rem;
                border-radius: 12px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                transition: all 0.3s ease;
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }

            .add-to-meal-btn:hover {
                background: linear-gradient(135deg, #c82333 0%, #c82333 100%);
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
            }

            /* ========== POPEYE MODAL STYLES ========== */

            /* Modal Container */
            .popeye-modal-content {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
                border-radius: 25px;
                width: 95vw;
                height: 85vh;
                max-width: 600px;
                max-height: 85vh;
                overflow-y: auto;
                box-shadow: 
                    0 30px 60px rgba(0, 0, 0, 0.5),
                    0 0 0 1px rgba(255, 255, 255, 0.1);
                position: relative;
                margin: 0;
                backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.05);
            }

            /* Modal Header */
            .popeye-modal-header {
                background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
                padding: 1.5rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                border-top-left-radius: 25px;
                border-top-right-radius: 25px;
                position: sticky;
                top: 0;
                z-index: 100;
                box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
            }

            .popeye-header-title {
                font-size: 1.8rem;
                font-weight: 800;
                color: #FFFFFF;
                text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
                margin: 0;
                background: linear-gradient(135deg, #dc3545, #dc3545);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .popeye-new-share-btn {
                background: rgba(255, 255, 255, 0.08);
                border: 2px solid rgba(255, 255, 255, 0.2);
                color: white;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                backdrop-filter: blur(20px);
                position: relative;
                overflow: hidden;
                box-shadow: 
                    0 8px 32px rgba(0, 0, 0, 0.12),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }

            .popeye-new-share-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.6s ease;
            }

            .popeye-new-share-btn:hover::before {
                left: 100%;
            }

            .popeye-new-share-btn:hover {
                background: rgba(255, 255, 255, 0.15);
                border-color: rgba(255, 255, 255, 0.4);
                transform: scale(1.1) rotate(360deg);
                box-shadow: 
                    0 12px 40px rgba(255, 255, 255, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
            }

            .popeye-new-share-btn:active {
                transform: scale(0.95) rotate(180deg);
            }

            .popeye-close-btn {
                background: rgba(255, 255, 255, 0.1);
                border: none;
                width: 45px;
                height: 45px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                color: #FFFFFF;
                font-size: 1.2rem;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                backdrop-filter: blur(10px);
            }

            .popeye-close-btn:hover {
                background: rgba(231, 76, 60, 0.8);
                transform: scale(1.1);
                box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
            }

            /* Modal Body */
            .popeye-modal-body {
                padding: 0;
                color: #FFFFFF;
            }

            /* Main Logo Section */
            .popeye-main-logo-section {
                background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
                padding: 3rem 2rem;
                text-align: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
            }

            .popeye-main-logo-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: radial-gradient(circle at center, rgba(231, 76, 60, 0.05) 0%, transparent 70%);
                pointer-events: none;
            }

            .popeye-main-logo {
                position: relative;
                z-index: 2;
                margin-bottom: 2rem;
            }

            .popeye-main-logo-img {
                width: 160px;
                height: 160px;
                border-radius: 25px;
                border: 4px solid rgba(255, 255, 255, 0.3);
                filter: drop-shadow(0 0 40px rgba(0, 0, 0, 0.6));
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.05);
                padding: 5px;
            }

            .popeye-main-logo-img:hover {
                transform: scale(1.08);
                filter: drop-shadow(0 0 50px rgba(231, 76, 60, 0.4));
                border-color: rgba(255, 255, 255, 0.5);
            }

            .popeye-gym-title {
                font-size: 3rem;
                font-weight: 900;
                color: #FFFFFF;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
                margin: 0 0 1rem 0;
                letter-spacing: 2px;
                position: relative;
                z-index: 2;
            }

            .popeye-gym-subtitle {
                font-size: 1.2rem;
                color: rgba(255, 255, 255, 0.8);
                margin: 0;
                font-weight: 300;
                position: relative;
                z-index: 2;
            }

            /* 24-Hour Gym Warning Section */
            .popeye-24hour-warning {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                padding: 2rem;
                margin: 2rem 0;
                border-radius: 15px;
                box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3);
                text-align: center;
                border: 2px solid rgba(255, 255, 255, 0.1);
            }

            .warning-header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .warning-icon {
                font-size: 2rem;
                color: #FFFFFF;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }

            .warning-title {
                font-size: 1.8rem;
                font-weight: 800;
                color: #FFFFFF;
                margin: 0;
                text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }

            .warning-content {
                font-size: 1.2rem;
                color: #FFFFFF;
                line-height: 1.6;
                text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
            }

            .warning-subtitle {
                font-size: 1rem;
                color: rgba(255, 255, 255, 0.9);
                margin-top: 1rem;
                font-style: italic;
            }

            /* Modern Validation Warning Modal */
            .validation-warning-modal {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                background: rgba(0, 0, 0, 0.8) !important;
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 999999 !important;
                backdrop-filter: blur(8px);
            }

            .validation-warning-modal.show {
                display: flex !important;
                opacity: 1 !important;
                visibility: visible !important;
            }

            .validation-warning-content {
                background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%) !important;
                border-radius: 25px !important;
                padding: 2.5rem !important;
                text-align: center !important;
                box-shadow: 0 25px 50px rgba(220, 53, 69, 0.5), 
                           0 0 0 3px rgba(220, 53, 69, 0.3) !important;
                max-width: 500px !important;
                width: 90% !important;
                position: relative !important;
                transform: scale(1) translateY(0) !important;
                border: 4px solid #dc3545 !important;
                animation: popIn 0.3s ease-out !important;
            }

            @keyframes popIn {
                0% { transform: scale(0.8) translateY(50px); opacity: 0; }
                100% { transform: scale(1) translateY(0); opacity: 1; }
            }

            .validation-warning-modal.show .validation-warning-content {
                transform: scale(1) translateY(0);
            }

            .validation-warning-icon {
                width: 80px;
                height: 80px;
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 1.5rem;
                font-size: 2.5rem;
                color: white;
                animation: pulseWarning 2s infinite;
                box-shadow: 0 10px 25px rgba(220, 53, 69, 0.4);
            }

            @keyframes pulseWarning {
                0% { transform: scale(1); box-shadow: 0 10px 25px rgba(220, 53, 69, 0.4); }
                50% { transform: scale(1.05); box-shadow: 0 15px 35px rgba(220, 53, 69, 0.6); }
                100% { transform: scale(1); box-shadow: 0 10px 25px rgba(220, 53, 69, 0.4); }
            }

            .validation-warning-title {
                font-size: 1.8rem;
                font-weight: 800;
                color: #dc3545;
                margin-bottom: 1rem;
                text-shadow: 0 2px 4px rgba(220, 53, 69, 0.1);
            }

            .validation-warning-message {
                font-size: 1.2rem;
                color: #495057;
                margin-bottom: 2rem;
                line-height: 1.5;
                font-weight: 500;
            }

            .validation-warning-button {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                border: none;
                border-radius: 50px;
                padding: 12px 30px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 20px rgba(220, 53, 69, 0.3);
                position: relative;
                overflow: hidden;
            }

            .validation-warning-button::before {


            /* تحسين عرض جميع صور المنتجات */
            .product-card .product-image img {
                max-width: 85%;
                max-height: 85%;
                object-fit: contain;
                object-position: center;
                margin: auto;
                filter: brightness(1.02) contrast(1.05) saturate(1.1);
                border-radius: 8px;
            }

                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }

            .validation-warning-button:hover::before {
                left: 100%;
            }

            .validation-warning-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 15px 35px rgba(220, 53, 69, 0.5);
            }

            .validation-warning-button:active {
                transform: translateY(-1px);
            }

            /* Mobile Responsive for Validation Warning */
            @media (max-width: 768px) {
                .validation-warning-content {
                    padding: 2rem;
                    margin: 1rem;
                    max-width: none;
                }

                .validation-warning-icon {
                    width: 70px;
                    height: 70px;
                    font-size: 2rem;
                }

                .validation-warning-title {
                    font-size: 1.5rem;
                }

                .validation-warning-message {
                    font-size: 1rem;
                }
            }

            @media (max-width: 480px) {
                .validation-warning-content {
                    padding: 1.5rem;
                }

                .validation-warning-icon {
                    width: 60px;
                    height: 60px;
                    font-size: 1.8rem;
                }

                .validation-warning-title {
                    font-size: 1.3rem;
                }

                .validation-warning-message {
                    font-size: 0.95rem;
                }
            }

            /* Pricing Section */
            .popeye-pricing-section {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
                padding: 2rem;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
            }

            .popeye-pricing-card {
                background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                transition: all 0.3s ease;
            }

            .popeye-pricing-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
                border-color: rgba(231, 76, 60, 0.5);
            }

            .pricing-card-header {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                padding: 1.5rem;
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
            }

            .pricing-icon {
                font-size: 1.5rem;
                color: #FFFFFF;
            }

            .pricing-title {
                font-size: 1.4rem;
                font-weight: 700;
                color: #FFFFFF;
                margin: 0;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .pricing-content {
                padding: 2rem;
            }

            .pricing-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.8rem 0;
                border-bottom: 1px solid rgba(220, 20, 60, 0.2);
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .pricing-item:last-child {
                border-bottom: none;
            }

            .pricing-label {
                font-weight: 600;
                color: #FFFFFF;
                font-size: 1rem;
            }

            .pricing-value {
                font-weight: 700;
                color: #DC143C;
                font-size: 1.1rem;
            }

            .pricing-bonus {
                background: #DC143C;
                color: #FFFFFF;
                padding: 0.3rem 0.6rem;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 500;
                flex-basis: 100%;
                text-align: center;
                margin-top: 0.5rem;
            }

            /* Schedule Section */
            .popeye-schedule-section {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
                padding: 2rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            .section-header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .header-icon {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                color: #FFFFFF;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                box-shadow: 0 0 20px rgba(231, 76, 60, 0.3);
            }

            .section-title {
                font-size: 2rem;
                font-weight: 700;
                color: #FFFFFF;
                margin: 0;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            }

            .schedule-cards {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
            }

            .schedule-card {
                background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            }

            .schedule-card-header {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                padding: 1rem;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.8rem;
            }

            .schedule-card-header i {
                font-size: 1.3rem;
                color: #FFFFFF;
            }

            .schedule-card-header h4 {
                font-size: 1.2rem;
                font-weight: 600;
                color: #FFFFFF;
                margin: 0;
            }

            .schedule-content {
                padding: 1.5rem;
            }

            .schedule-day-group {
                margin-bottom: 1.5rem;
            }

            .schedule-day-group:last-child {
                margin-bottom: 0;
            }

            .schedule-days {
                font-weight: 700;
                color: #FFFFFF;
                font-size: 1rem;
                margin-bottom: 0.5rem;
                padding-bottom: 0.3rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .schedule-times {
                margin-left: 1rem;
            }

            .time-slot {
                color: #dc3545;
                font-weight: 600;
                font-size: 0.95rem;
                margin-bottom: 0.3rem;
                padding: 0.2rem 0;
            }

            /* Kids Section */
            .popeye-kids-section {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
                padding: 2rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            .kids-card {
                background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            .kids-header {
                background: linear-gradient(135deg, #dc3545 0%, #dc3545 100%);
                padding: 1.5rem;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
            }

            .kids-icon {
                font-size: 1.5rem;
                color: #FFFFFF;
            }

            .kids-title {
                font-size: 1.4rem;
                font-weight: 700;
                color: #FFFFFF;
                margin: 0;
            }

            .kids-content {
                padding: 2rem;
            }

            .kids-info {
                text-align: center;
                margin-bottom: 2rem;
            }

            .kids-days {
                font-size: 1.2rem;
                font-weight: 700;
                color: #FFFFFF;
                margin-bottom: 0.8rem;
            }

            .kids-time {
                font-size: 1.1rem;
                color: #DC143C;
                font-weight: 600;
                margin-bottom: 0.8rem;
            }

            .kids-note {
                font-size: 1rem;
                color: #cccccc;
                font-style: italic;
            }

            .kids-warnings {
                background: rgba(220, 20, 60, 0.1);
                border: 1px solid rgba(220, 20, 60, 0.3);
                border-radius: 10px;
                padding: 1.5rem;
            }

            .warning-header {
                display: flex;
                align-items: center;
                gap: 0.8rem;
                margin-bottom: 1rem;
                color: #DC143C;
                font-weight: 700;
                font-size: 1.1rem;
            }

            .warning-list {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .warning-list li {
                color: #FFFFFF;
                margin-bottom: 0.8rem;
                padding-left: 1rem;
                position: relative;
                line-height: 1.4;
            }

            .warning-list li::before {
                content: '⚠️';
                position: absolute;
                left: 0;
                color: #DC143C;
            }

            /* Contact Section */
            .popeye-contact-section {
                background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%);
                padding: 2rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            .contact-header {
                text-align: center;
                margin-bottom: 2rem;
            }

            .contact-logo {
                margin-bottom: 1rem;
            }

            .contact-logo img {
                width: 110px;
                height: 110px;
                border-radius: 20px;
                border: 3px solid rgba(255, 255, 255, 0.3);
                filter: drop-shadow(0 0 25px rgba(0, 0, 0, 0.6));
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.05);
                padding: 3px;
            }

            .contact-logo img:hover {
                transform: scale(1.08);
                filter: drop-shadow(0 0 35px rgba(231, 76, 60, 0.4));
                border-color: rgba(255, 255, 255, 0.5);
            }

            .contact-title {
                font-size: 2rem;
                font-weight: 700;
                color: #FFFFFF;
                margin: 0;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            }

            .contact-links {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .contact-link {
                background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
                border: 2px solid #DC143C;
                border-radius: 15px;
                padding: 1.5rem;
                display: flex;
                align-items: center;
                gap: 1.5rem;
                text-decoration: none;
                transition: all 0.3s ease;
                color: #FFFFFF;
            }

            .contact-link:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(220, 20, 60, 0.3);
                border-color: #FFFFFF;
                text-decoration: none;
                color: #FFFFFF;
            }

            .contact-icon {
                background: #DC143C;
                color: #FFFFFF;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                flex-shrink: 0;
            }

            .contact-info {
                display: flex;
                flex-direction: column;
                gap: 0.3rem;
            }

            .contact-label {
                font-size: 0.9rem;
                color: #cccccc;
                font-weight: 500;
            }

            .contact-value {
                font-size: 1.1rem;
                color: #FFFFFF;
                font-weight: 700;
            }

            .location-info {
                background: rgba(220, 20, 60, 0.1);
                border: 1px solid rgba(220, 20, 60, 0.3);
                border-radius: 15px;
                padding: 1.5rem;
                display: flex;
                align-items: center;
                gap: 1rem;
                text-align: center;
                justify-content: center;
            }

            .location-icon {
                background: #DC143C;
                color: #FFFFFF;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                flex-shrink: 0;
            }

            .location-text {
                color: #FFFFFF;
                font-size: 1.1rem;
                font-weight: 600;
            }

            /* Mobile Responsive */
            @media (max-width: 768px) {
                .modal-overlay {
                    padding: 0;
                    background: rgba(0, 0, 0, 0.95);
                }

                .popeye-modal-content {
                    width: 100vw;
                    height: 95vh;
                    max-width: 100vw;
                    max-height: 95vh;
                    border-radius: 15px;
                    margin: 2.5vh auto;
                    overflow-y: auto;
                    -webkit-overflow-scrolling: touch;
                }

                .popeye-modal-header {
                    padding: 1rem;
                    border-top-left-radius: 0;
                    border-top-right-radius: 0;
                }

                .popeye-header-title {
                    font-size: 1.4rem;
                }

                .popeye-share-btn {
                    width: 40px;
                    height: 40px;
                    font-size: 1rem;
                }

                .popeye-close-btn {
                    width: 40px;
                    height: 40px;
                    font-size: 1rem;
                }

                .popeye-main-logo-section {
                    padding: 1.5rem 1rem;
                }

                .popeye-main-logo-img {
                    width: 100px;
                    height: 100px;
                }

                .popeye-gym-title {
                    font-size: 2.2rem;
                }

                .popeye-gym-subtitle {
                    font-size: 1rem;
                }

                .popeye-24hour-warning {
                    margin: 0.5rem 0;
                    padding: 1rem;
                }

                .warning-title {
                    font-size: 1.4rem;
                }

                .warning-content {
                    font-size: 1rem;
                }

                .popeye-pricing-section {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                    padding: 1rem;
                }

                .schedule-cards {
                    grid-template-columns: 1fr;
                    gap: 1.5rem;
                }

                .popeye-schedule-section {
                    padding: 1rem;
                }

                .section-title {
                    font-size: 1.6rem;
                }

                .popeye-kids-section {
                    padding: 1rem;
                }

                .popeye-contact-section {
                    padding: 1rem;
                }

                .contact-title {
                    font-size: 1.6rem;
                }

                .contact-link {
                    padding: 1rem;
                    gap: 1rem;
                }

                .contact-icon {
                    width: 45px;
                    height: 45px;
                    font-size: 1.3rem;
                }
            }

            /* Calorie Calculator Mobile Responsive */
            @media (max-width: 768px) {
                .advanced-calculator {
                    width: 98vw;
                    height: 95vh;
                    max-width: 98vw;
                    max-height: 95vh;
                    border-radius: 15px;
                    margin: 2.5vh auto;
                }

                .calculator-header {
                    padding: 1rem;
                }

                .calculator-logo {
                    width: 45px;
                    height: 45px;
                    font-size: 1.2rem;
                }

                .calculator-title {
                    font-size: 1.2rem;
                }

                .page-content {
                    padding: 1rem;
                }

                .form-section {
                    margin-bottom: 1rem;
                }

                /* Ultra Calculator Mobile Styles */
                .ultra-calculator {
                    width: 98vw;
                    height: 95vh;
                    max-width: 98vw;
                    max-height: 95vh;
                    border-radius: 15px;
                    margin: 2.5vh auto;
                }

                .ultra-calc-header {
                    padding: 1rem;
                    flex-direction: row;
                    justify-content: space-between;
                    align-items: center;
                }

                .calc-header-left,
                .calc-header-right {
                    flex: 0 0 auto;
                }

                .calc-header-center {
                    flex: 1;
                    text-align: center;
                }

                .calc-logo {
                    width: 40px;
                    height: 40px;
                }

                .calc-title {
                    font-size: 1.2rem;
                    text-align: center;
                }

                .calc-share-btn, .calc-close-btn {
                    width: 35px;
                    height: 35px;
                    font-size: 0.9rem;
                }

                .ultra-calc-header > div:last-child {
                    order: 1;
                    justify-content: flex-start;
                    gap: 0.5rem;
                }

                .calc-page {
                    padding: 1rem;
                }

                .calc-form-grid {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                }

                .calc-btn {
                    padding: 0.8rem 1.5rem;
                    font-size: 0.9rem;
                    margin-top: 1rem;
                }

                .calc-results-header {
                    flex-direction: column;
                    gap: 1rem;
                    padding: 1rem;
                    text-align: center;
                }

                .calc-results-title {
                    font-size: 1.2rem;
                }

                .calc-back-btn {
                    padding: 0.7rem 1.2rem;
                    font-size: 0.9rem;
                    order: 1;
                }


                .calc-results-grid {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                    padding: 1rem;
                }

                .results-container {
                    padding: 0.5rem;
                }

                .main-results {
                    grid-template-columns: 1fr;
                    gap: 0.8rem;
                    margin-bottom: 1rem;
                }

                .detailed-results {
                    grid-template-columns: 1fr;
                    gap: 0.8rem;
                }

                .result-card {
                    padding: 1rem;
                    min-height: auto;
                }

                .result-value {
                    font-size: 1.8rem;
                }

                .ultra-modern-close {
                    width: 40px;
                    height: 40px;
                    font-size: 1.2rem;
                }
            }

            /* Extra Small Mobile Responsive */
            @media (max-width: 480px) {
                .popeye-modal-header {
                    padding: 0.8rem;
                }

                .popeye-header-title {
                    font-size: 1.2rem;
                }

                .popeye-share-btn, .popeye-close-btn {
                    width: 35px;
                    height: 35px;
                    font-size: 0.9rem;
                }

                .popeye-gym-title {
                    font-size: 1.8rem;
                }

                .warning-title {
                    font-size: 1.2rem;
                }

                .warning-content {
                    font-size: 0.9rem;
                }

                .section-title {
                    font-size: 1.4rem;
                }

                .contact-title {
                    font-size: 1.4rem;
                }

                .contact-link {
                    flex-direction: column;
                    text-align: center;
                }

                .contact-info {
                    align-items: center;
                }
            }

            @media (max-width: 480px) {
                .popeye-modal-body {
                    font-size: 0.9rem;
                }

                .popeye-gym-title {
                    font-size: 1.8rem;
                }

                .pricing-card-header {
                    padding: 1rem;
                }

                .pricing-title {
                    font-size: 1.2rem;
                }

                .pricing-content {
                    padding: 1.5rem;
                }

                .kids-content {
                    padding: 1.5rem;
                }

                .schedule-content {
                    padding: 1rem;
                }

                .contact-link {
                    flex-direction: column;
                    text-align: center;
                    gap: 0.8rem;
                }

                .contact-info {
                    align-items: center;
                }
            }
                margin: 0;
                flex: 1;
                text-align: center;
            }

            .ultra-modern-close {
                width: 50px;
                height: 50px;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 50%;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .ultra-modern-close:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: scale(1.1) rotate(90deg);
            }

            .calculator-page {
                min-height: 600px;
                position: relative;
            }

            .page-content {
                padding: 3rem;
                background: linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.95) 0%, 
                    rgba(248, 250, 252, 0.95) 100%);
            }

            .form-container {
                max-width: 1000px;
                margin: 0 auto;
            }

            .form-section {
                margin-bottom: 3rem;
                padding: 2.5rem;
                background: rgba(255, 255, 255, 0.8);
                border-radius: 20px;
                border: 2px solid rgba(231, 76, 60, 0.1);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .form-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, 
                    var(--primary-color) 0%, 
                    var(--accent-color) 50%, 
                    var(--success-color) 100%);
            }

            .form-section:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
                border-color: var(--primary-color);
            }

            .section-title {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--secondary-color);
                margin-bottom: 2rem;
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .section-title i {
                color: var(--primary-color);
                font-size: 1.8rem;
            }

            .form-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
            }

            .form-group {
                position: relative;
            }

            .form-group label {
                display: block;
                font-weight: 600;
                color: var(--secondary-color);
                margin-bottom: 0.8rem;
                font-size: 1.1rem;
            }

            .form-input, .form-select {
                width: 100%;
                padding: 1.2rem 1.5rem;
                border: 2px solid rgba(44, 62, 80, 0.1);
                border-radius: 12px;
                font-size: 1rem;
                font-weight: 500;
                background: rgba(255, 255, 255, 0.9);
                transition: all 0.3s ease;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            }

            .form-input:focus, .form-select:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.1);
                transform: translateY(-2px);
            }

            .form-help {
                font-size: 0.9rem;
                color: var(--text-muted);
                margin-top: 0.5rem;
                font-style: italic;
            }

            .calculate-btn-advanced {
                width: 100%;
                padding: 0;
                border: none;
                border-radius: 20px;
                background: linear-gradient(135deg, 
                    var(--primary-color) 0%, 
                    var(--accent-color) 50%, 
                    var(--success-color) 100%);
                color: white;
                font-size: 1.4rem;
                font-weight: 800;
                cursor: pointer;
                transition: all 0.4s ease;
                box-shadow: 0 15px 35px rgba(231, 76, 60, 0.4);
                position: relative;
                overflow: hidden;
                margin-top: 3rem;
            }

            .btn-content {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                padding: 2rem 3rem;
                position: relative;
                z-index: 2;
            }

            .btn-shine {
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, 
                    transparent, 
                    rgba(255, 255, 255, 0.4), 
                    transparent);
                transition: left 0.6s ease;
            }

            .calculate-btn-advanced:hover {
                transform: translateY(-6px) scale(1.02);
                box-shadow: 0 25px 50px rgba(231, 76, 60, 0.5);
            }

            .calculate-btn-advanced:hover .btn-shine {
                left: 100%;
            }

            .calculate-btn-advanced:active {
                transform: translateY(-3px) scale(1.01);
            }

            .btn-icon {
                font-size: 1.8rem;
                animation: rocketFloat 2s ease-in-out infinite;
            }

            @keyframes rocketFloat {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-5px); }
            }

            /* Results Page Styles */
            .results-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 3rem;
                padding: 2rem;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 16px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            }


            .back-btn {
                background: linear-gradient(135deg, 
                    var(--secondary-color) 0%, 
                    var(--primary-color) 100%);
                color: white;
            }

            .back-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(44, 62, 80, 0.3);
            }





            .results-title {
                font-size: 1.8rem;
                font-weight: 700;
                color: var(--secondary-color);
                margin: 0;
                flex: 1;
                text-align: center;
            }

            .results-container {
                display: grid;
                gap: 2rem;
            }

            .main-results {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                margin-bottom: 2rem;
            }

            .result-card {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 16px;
                padding: 2rem;
                display: flex;
                align-items: center;
                gap: 1.5rem;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }

            .result-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            }

            .result-card.primary {
                border-color: var(--primary-color);
                background: linear-gradient(135deg, 
                    rgba(231, 76, 60, 0.1) 0%, 
                    rgba(255, 255, 255, 0.95) 100%);
            }

            .result-card.secondary {
                border-color: var(--success-color);
                background: linear-gradient(135deg, 
                    rgba(39, 174, 96, 0.1) 0%, 
                    rgba(255, 255, 255, 0.95) 100%);
            }

            .result-icon {
                width: 60px;
                height: 60px;
                background: linear-gradient(135deg, 
                    var(--primary-color) 0%, 
                    var(--accent-color) 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                color: white;
                box-shadow: 0 8px 20px rgba(231, 76, 60, 0.3);
            }

            .result-info h4 {
                font-size: 1.2rem;
                font-weight: 600;
                color: var(--secondary-color);
                margin: 0 0 0.5rem 0;
            }

            .result-value {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--primary-color);
                margin: 0;
                line-height: 1;
            }

            .result-info small {
                color: var(--text-muted);
                font-size: 0.9rem;
                font-weight: 500;
            }

            .detailed-results {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .detailed-results .result-card {
                padding: 1.5rem;
            }

            .detailed-results .result-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .detailed-results .result-value {
                font-size: 1.8rem;
            }

            .advanced-metrics {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .metric-card {
                background: rgba(255, 255, 255, 0.9);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
                transition: all 0.3s ease;
                border: 2px solid rgba(231, 76, 60, 0.1);
            }

            .metric-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
                border-color: var(--primary-color);
            }

            .metric-card h5 {
                font-size: 1rem;
                font-weight: 600;
                color: var(--secondary-color);
                margin: 0 0 1rem 0;
            }

            .metric-value {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--primary-color);
            }

            .tips-section {
                background: rgba(255, 255, 255, 0.9);
                border-radius: 16px;
                padding: 2rem;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                border: 2px solid rgba(231, 76, 60, 0.1);
            }

            .tips-section h4 {
                font-size: 1.4rem;
                font-weight: 700;
                color: var(--secondary-color);
                margin: 0 0 1.5rem 0;
                text-align: center;
            }

            .tips-container {
                display: grid;
                gap: 1rem;
            }

            .tip-item {
                background: rgba(231, 76, 60, 0.05);
                border: 1px solid rgba(231, 76, 60, 0.2);
                border-radius: 8px;
                padding: 1rem;
                color: var(--secondary-color);
                font-weight: 500;
                position: relative;
                padding-right: 3rem;
            }

            .tip-item::before {
                content: '💡';
                position: absolute;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1.2rem;
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                .form-grid {
                    grid-template-columns: 1fr;
                }

                .main-results {
                    grid-template-columns: 1fr;
                }

                .results-header {
                    flex-direction: column;
                    gap: 1rem;
                }

                .results-title {
                    text-align: center;
                }
            }

            .modern-close {
                background: linear-gradient(45deg, #dc3545, #dc3545);
                color: white !important;
                border: 2px solid rgba(255, 255, 255, 0.3);
                font-size: 1.5rem !important;
                width: 50px !important;
                height: 50px !important;
                border-radius: 50% !important;
                transition: all 0.3s ease !important;
            }

            .modern-close:hover {
                transform: rotate(180deg) scale(1.1) !important;
                background: linear-gradient(45deg, #dc3545, #dc3545) !important;
                box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4) !important;
            }

            .results-section {
                background: rgba(255, 255, 255, 0.95);
                padding: 2.5rem;
                border-radius: 25px;
                margin-top: 2rem;
                backdrop-filter: blur(15px);
                border: 2px solid rgba(231, 76, 60, 0.2);
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            }

            .results-section h3 {
                color: #2c3e50;
                margin-bottom: 2rem;
                text-align: center;
                font-size: 2rem;
                font-weight: 800;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .results-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                gap: 1.5rem;
            }

            .result-card {
                background: white;
                padding: 2rem;
                border-radius: 20px;
                text-align: center;
                border: 2px solid rgba(231, 76, 60, 0.1);
                transition: all 0.3s ease;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            }

            .result-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 20px 40px rgba(231, 76, 60, 0.2);
                border-color: #dc3545;
            }

            .result-icon {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .result-icon i {
                color: #dc3545;
                text-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
            }

            .result-info h4 {
                color: #2c3e50;
                margin-bottom: 0.5rem;
                font-size: 1rem;
                font-weight: 600;
            }

            .result-value {
                font-size: 2.2rem;
                font-weight: 800;
                color: #dc3545;
                margin: 0;
                text-shadow: 0 2px 4px rgba(231, 76, 60, 0.3);
            }





            .progress-bar {
                width: 100%;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
                margin-top: 1rem;
                display: none;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #8B0000, #DC143C);
                width: 0%;
                transition: width 0.3s ease;
            }

            .advanced-metrics {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 1rem;
                margin-top: 1.5rem;
            }

            .metric-card {
                background: white;
                padding: 1.5rem;
                border-radius: 15px;
                text-align: center;
                border: 1px solid rgba(231, 76, 60, 0.1);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
                transition: all 0.3s ease;
            }

            .metric-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(231, 76, 60, 0.15);
            }

            .metric-card h5 {
                color: #2c3e50;
                margin-bottom: 0.5rem;
                font-size: 0.9rem;
                font-weight: 600;
            }

            .metric-value {
                color: #dc3545;
                font-size: 1.4rem;
                font-weight: 700;
            }

            .tips-section {
                background: white;
                padding: 2rem;
                border-radius: 20px;
                margin-top: 2rem;
                border: 1px solid rgba(231, 76, 60, 0.1);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            }

            .tips-section h4 {
                color: #2c3e50;
                margin-bottom: 1.5rem;
                font-size: 1.3rem;
                font-weight: 700;
                text-align: center;
            }

            .tips-list {
                list-style: none;
                padding: 0;
            }

            .tips-list li {
                color: #2c3e50;
                padding: 0.8rem 0;
                border-bottom: 1px solid rgba(231, 76, 60, 0.1);
                font-weight: 500;
                line-height: 1.6;
            }

            .tips-list li:last-child {
                border-bottom: none;
            }

            .tips-list li::before {
                content: "💡";
                margin-left: 0.8rem;
                font-size: 1.2rem;
            }

            /* Ultra Modern Countdown Timer Styles */
            .countdown-timer-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(20px);
                z-index: 9999;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 1rem;
                opacity: 0;
                visibility: hidden;
                transition: all 0.5s ease;
            }

            .countdown-timer-modal.show {
                opacity: 1;
                visibility: visible;
            }

            .countdown-window {
                background: linear-gradient(135deg, 
                    rgba(44, 62, 80, 0.95) 0%, 
                    rgba(52, 73, 94, 0.95) 50%, 
                    rgba(44, 62, 80, 0.95) 100%);
                border-radius: 25px;
                width: 95%;
                max-width: 700px;
                max-height: 90vh;
                overflow: hidden;
                box-shadow: 
                    0 30px 80px rgba(0, 0, 0, 0.8),
                    0 0 100px rgba(220, 53, 69, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
                border: 2px solid rgba(220, 53, 69, 0.4);
                position: relative;
                backdrop-filter: blur(30px);
                transform: scale(0.8) rotateY(45deg);
                transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

            .countdown-timer-modal.show .countdown-window {
                transform: scale(1) rotateY(0deg);
            }

            .countdown-header {
                background: linear-gradient(135deg, #dc3545 0%, #8B0000 100%);
                padding: 1.5rem 2rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
            }

            .countdown-header::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, 
                    transparent, 
                    rgba(255, 255, 255, 0.1), 
                    transparent);
                animation: shimmer 3s infinite;
            }

            @keyframes shimmer {
                0% { left: -100%; }
                100% { left: 100%; }
            }

            .countdown-header-left {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .countdown-icon {
                width: 50px;
                height: 50px;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                color: white;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.1); }
            }

            .countdown-title {
                color: white;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            }

            .countdown-controls {
                display: flex;
                gap: 0.5rem;
            }

            .countdown-control-btn {
                width: 45px;
                height: 45px;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 50%;
                color: white;
                font-size: 1.2rem;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .countdown-control-btn:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: scale(1.1) rotate(360deg);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            }

            .countdown-body {
                padding: 3rem 2rem;
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .countdown-body::before {
                content: '';
                position: absolute;
                top: 0;
                left: 50%;
                width: 300px;
                height: 300px;
                background: radial-gradient(circle, 
                    rgba(220, 53, 69, 0.1) 0%, 
                    transparent 70%);
                transform: translateX(-50%);
                border-radius: 50%;
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0%, 100% { transform: translateX(-50%) translateY(0px); }
                50% { transform: translateX(-50%) translateY(-20px); }
            }

            .countdown-settings {
                margin-bottom: 2rem;
                position: relative;
                z-index: 2;
            }

            .countdown-input-section {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 15px;
                padding: 1.5rem;
                margin-bottom: 2rem;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .countdown-input-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .countdown-input-group {
                text-align: center;
            }

            .countdown-input-label {
                color: white;
                font-size: 0.9rem;
                font-weight: 600;
                margin-bottom: 0.5rem;
                display: block;
                text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            }

            .countdown-input {
                width: 100%;
                padding: 0.8rem;
                border: 2px solid rgba(220, 53, 69, 0.3);
                border-radius: 10px;
                background: rgba(255, 255, 255, 0.9);
                color: #2c3e50;
                font-size: 1.2rem;
                font-weight: 700;
                text-align: center;
                transition: all 0.3s ease;
                box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            }

            .countdown-input:focus {
                outline: none;
                border-color: #dc3545;
                background: white;
                box-shadow: 0 0 20px rgba(220, 53, 69, 0.3);
                transform: scale(1.05);
            }

            .countdown-actions {
                display: flex;
                gap: 1rem;
                justify-content: center;
                flex-wrap: wrap;
                margin-bottom: 2rem;
            }

            .countdown-btn {
                padding: 0.8rem 2rem;
                border: none;
                border-radius: 25px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 1px;
                position: relative;
                overflow: hidden;
                backdrop-filter: blur(10px);
            }

            .countdown-btn::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                transition: all 0.5s ease;
                transform: translate(-50%, -50%);
            }

            .countdown-btn:hover::before {
                width: 300px;
                height: 300px;
            }

            .countdown-btn.primary {
                background: linear-gradient(135deg, #dc3545, #8B0000);
                color: white;
                box-shadow: 0 10px 25px rgba(220, 53, 69, 0.4);
            }

            .countdown-btn.primary:hover {
                transform: translateY(-3px);
                box-shadow: 0 15px 35px rgba(220, 53, 69, 0.6);
            }

            .countdown-btn.secondary {
                background: rgba(255, 255, 255, 0.2);
                color: white;
                border: 2px solid rgba(255, 255, 255, 0.3);
            }

            .countdown-btn.secondary:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: translateY(-2px);
            }

            .countdown-display {
                position: relative;
                z-index: 2;
                margin: 2rem 0;
            }

            .countdown-display.hidden {
                display: none;
            }

            .countdown-time-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .countdown-time-unit {
                background: rgba(255, 255, 255, 0.15);
                border-radius: 20px;
                padding: 1.5rem;
                border: 2px solid rgba(220, 53, 69, 0.3);
                backdrop-filter: blur(15px);
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .countdown-time-unit::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: conic-gradient(transparent, rgba(220, 53, 69, 0.1), transparent);
                animation: rotate 4s linear infinite;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .countdown-time-unit:hover::before {
                opacity: 1;
            }

            @keyframes rotate {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            .countdown-time-value {
                font-size: 2.5rem;
                font-weight: 800;
                color: white;
                margin-bottom: 0.5rem;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
                position: relative;
                z-index: 1;
            }

            .countdown-time-label {
                font-size: 0.9rem;
                color: rgba(255, 255, 255, 0.8);
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
                position: relative;
                z-index: 1;
            }

            .countdown-progress {
                margin: 2rem 0;
                position: relative;
            }

            .countdown-progress-bar {
                width: 100%;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
                box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
            }

            .countdown-progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #dc3545, #8B0000);
                width: 0%;
                transition: width 1s ease;
                border-radius: 4px;
                position: relative;
                overflow: hidden;
            }

            .countdown-progress-fill::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, 
                    transparent, 
                    rgba(255, 255, 255, 0.3), 
                    transparent);
                animation: progressShimmer 2s infinite;
            }

            @keyframes progressShimmer {
                0% { left: -100%; }
                100% { left: 100%; }
            }

            .countdown-status {
                margin-top: 1rem;
                padding: 1rem;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                backdrop-filter: blur(10px);
            }

            .countdown-status-text {
                color: white;
                font-size: 1.1rem;
                font-weight: 600;
                margin: 0;
                text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            }

            .countdown-presets {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .countdown-preset-btn {
                padding: 0.8rem;
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid rgba(220, 53, 69, 0.3);
                border-radius: 10px;
                color: white;
                font-size: 0.9rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .countdown-preset-btn:hover {
                background: rgba(220, 53, 69, 0.3);
                border-color: #dc3545;
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
            }

            .countdown-finished {
                display: none;
                text-align: center;
                padding: 2rem;
            }

            .countdown-finished.show {
                display: block;
                animation: finishPulse 1s infinite;
            }

            @keyframes finishPulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }

            .countdown-finished-icon {
                font-size: 4rem;
                color: #dc3545;
                margin-bottom: 1rem;
                animation: bounce 2s infinite;
            }

            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-20px); }
                60% { transform: translateY(-10px); }
            }

            .countdown-finished-text {
                color: white;
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0;
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            }

            /* Mobile Responsive */
            @media (max-width: 768px) {
                .countdown-window {
                    width: 98%;
                    max-height: 95vh;
                    border-radius: 15px;
                }

                .countdown-header {
                    padding: 1rem 1.5rem;
                }

                .countdown-title {
                    font-size: 1.2rem;
                }

                .countdown-body {
                    padding: 2rem 1.5rem;
                }

                .countdown-input-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.8rem;
                }

                .countdown-time-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1rem;
                }

                .countdown-time-value {
                    font-size: 2rem;
                }

                .countdown-actions {
                    flex-direction: column;
                    align-items: center;
                }

                .countdown-btn {
                    width: 100%;
                    max-width: 250px;
                }

                .countdown-presets {
                    grid-template-columns: repeat(3, 1fr);
                }
            }

            @media (max-width: 480px) {
                .countdown-input-grid {
                    grid-template-columns: 1fr;
                }

                .countdown-time-grid {
                    grid-template-columns: 1fr 1fr;
                }

                .countdown-time-value {
                    font-size: 1.8rem;
                }

                .countdown-presets {
                    grid-template-columns: repeat(2, 1fr);
                }
            }

            /* Footer Styles */
            .footer {
                background: var(--secondary-color);
                color: white;
                margin-top: 1.5rem;
                padding: 1.2rem 0;
            }

            .footer-content {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1.5rem;
                align-items: start;
            }

            /* Right Section - Brand Info */
            .footer-brand {
                text-align: center;
                padding: 0.5rem;
            }

            .footer-logo {
                width: 50px;
                height: 50px;
                margin: 0 auto 1rem;
                display: block;
            }

            .footer-logo img {
                width: 100%;
                height: 100%;
                object-fit: contain;
                border-radius: 50%;
            }

            .footer-brand h3 {
                font-size: 1.5rem;
                font-weight: 700;
                margin: 0 0 0.5rem 0;
                color: white;
            }

            .footer-brand p {
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.9rem;
                line-height: 1.4;
                margin: 0 0 1rem 0;
            }

            .footer-location-btn {
                background: var(--primary-color);
                color: white;
                padding: 0.5rem 1rem;
                border: none;
                border-radius: 8px;
                font-size: 0.85rem;
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .footer-location-btn:hover {
                background: #dc3545;
                transform: translateY(-2px);
            }

            /* Center Section - Social Media */
            .footer-social {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
                padding: 1rem;
            }

            .footer-social h4 {
                font-size: 1.1rem;
                font-weight: 600;
                margin: 0 0 0.5rem 0;
                color: white;
            }

            .social-buttons {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                width: 100%;
                max-width: 200px;
            }

            .social-btn {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                padding: 0.6rem 1rem;
                border-radius: 8px;
                text-decoration: none;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                font-size: 0.85rem;
                transition: all 0.3s ease;
            }

            .social-btn.whatsapp:hover {
                background: #25d366;
                border-color: #25d366;
            }

            .social-btn.instagram:hover {
                background: #E4405F;
                border-color: #E4405F;
            }

            .social-btn.facebook:hover {
                background: #1877F2;
                border-color: #1877F2;
            }

            .social-btn.tiktok:hover {
                background: #000000;
                border-color: #000000;
            }

            .social-btn i {
                font-size: 1rem;
            }

            /* Left Section - Contact Info */
            .footer-contact {
                text-align: center;
                padding: 1rem;
            }

            .footer-contact h4 {
                font-size: 1.1rem;
                font-weight: 600;
                margin: 0 0 1rem 0;
                color: white;
            }

            .contact-info {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
                font-size: 0.85rem;
                color: rgba(255, 255, 255, 0.8);
            }

            .contact-info div {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .contact-info i {
                color: var(--primary-color);
                width: 16px;
                text-align: center;
            }

            /* Header Quick Buttons */
            .header-quick-buttons {
                padding: 0.6rem 0;
                margin-top: 1.5rem;
            }

            /* Computer Services Section Styles */
            .computer-services-section {
                padding: 1rem 0;
                margin-top: 0.5rem;
            }

            .computer-services-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                display: flex;
                justify-content: center;
            }

            .computer-services-content {
                background: rgba(255, 255, 255, 0.08);
                border: 1px solid rgba(255, 255, 255, 0.15);
                border-radius: 12px;
                padding: 0.8rem 1.2rem;
                text-align: center;
                color: white;
                max-width: 600px;
                width: 100%;
            }

            .computer-services-content h3 {
                font-size: 1rem;
                font-weight: 600;
                margin: 0 0 0.3rem 0;
                color: rgba(255, 255, 255, 0.95);
            }

            .computer-services-content p {
                font-size: 0.8rem;
                margin: 0;
                color: rgba(255, 255, 255, 0.8);
                line-height: 1.4;
            }

            /* Mobile Responsive */
            @media (max-width: 768px) {
                .computer-services-section {
                    padding: 0.8rem 0;
                }

                .computer-services-content {
                    padding: 0.6rem 1rem;
                }

                .computer-services-content h3 {
                    font-size: 0.9rem;
                }

                .computer-services-content p {
                    font-size: 0.75rem;
                }
            }

            .header-buttons-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                display: flex;
                justify-content: center;
                gap: 0.6rem;
                flex-wrap: wrap;
            }

            .header-btn {
                background: rgba(255, 255, 255, 0.12);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                padding: 0.4rem 0.7rem;
                border-radius: 18px;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 0.4rem;
                font-size: 0.75rem;
                font-weight: 500;
                backdrop-filter: blur(8px);
                text-decoration: none;
                min-width: 85px;
                justify-content: center;
            }

            .header-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                border-color: rgba(255, 255, 255, 0.4);
                transform: translateY(-1px);
            }

            .header-btn i {
                font-size: 0.85rem;
            }

            .header-btn span {
                white-space: nowrap;
                font-size: 0.7rem;
            }

            /* Quick Access Section Styles */
            .quick-access-section {
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                padding: 3rem 0;
                border-top: 1px solid var(--border-color);
                position: relative;
                overflow: hidden;
            }

            .quick-access-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: radial-gradient(circle at 20% 80%, rgba(220, 53, 69, 0.1) 0%, transparent 50%),
                            radial-gradient(circle at 80% 20%, rgba(220, 53, 69, 0.1) 0%, transparent 50%);
                pointer-events: none;
            }

            .quick-access-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
                position: relative;
                z-index: 2;
            }

            .quick-access-title {
                text-align: center;
                color: var(--secondary-color);
                font-size: 2.2rem;
                font-weight: 800;
                margin-bottom: 3rem;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                position: relative;
            }

            .quick-access-title::after {
                content: '';
                position: absolute;
                bottom: -15px;
                left: 50%;
                transform: translateX(-50%);
                width: 100px;
                height: 4px;
                background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
                border-radius: 2px;
            }

            .quick-access-buttons {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 2rem;
                margin-top: 2rem;
            }

            .quick-btn {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%);
                border: 2px solid transparent;
                border-radius: 20px;
                padding: 2rem;
                cursor: pointer;
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                position: relative;
                overflow: hidden;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                gap: 1.5rem;
                text-align: right;
            }

            .quick-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(220, 53, 69, 0.1), transparent);
                transition: left 0.8s ease;
            }

            .quick-btn:hover::before {
                left: 100%;
            }

            .quick-btn:hover {
                transform: translateY(-8px) scale(1.02);
                border-color: var(--primary-color);
                box-shadow: 0 20px 40px rgba(220, 53, 69, 0.2);
                background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 249, 250, 1) 100%);
            }

            .quick-btn:active {
                transform: translateY(-4px) scale(1.01);
            }

            .quick-btn-icon {
                width: 70px;
                height: 70px;
                background: linear-gradient(135deg, var(--primary-color) 0%, #dc3545 100%);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 1.8rem;
                box-shadow: 0 8px 20px rgba(220, 53, 69, 0.3);
                transition: all 0.3s ease;
                position: relative;
                flex-shrink: 0;
            }

            .quick-btn-icon::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                border-radius: 50%;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
                pointer-events: none;
            }

            .quick-btn:hover .quick-btn-icon {
                transform: rotate(360deg) scale(1.1);
                box-shadow: 0 12px 30px rgba(220, 53, 69, 0.4);
            }

            .quick-btn-content {
                flex: 1;
                text-align: right;
            }

            .quick-btn-content h4 {
                color: var(--secondary-color);
                font-size: 1.4rem;
                font-weight: 700;
                margin: 0 0 0.5rem 0;
                transition: color 0.3s ease;
            }

            .quick-btn-content p {
                color: var(--text-muted);
                font-size: 1rem;
                margin: 0;
                font-weight: 500;
                transition: color 0.3s ease;
            }

            .quick-btn:hover .quick-btn-content h4 {
                color: var(--primary-color);
            }

            .quick-btn:hover .quick-btn-content p {
                color: var(--text-color);
            }

            /* Animation for button appearance */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .quick-btn {
                animation: fadeInUp 0.6s ease-out forwards;
            }

            .quick-btn:nth-child(1) { animation-delay: 0.1s; }
            .quick-btn:nth-child(2) { animation-delay: 0.2s; }
            .quick-btn:nth-child(3) { animation-delay: 0.3s; }
            .quick-btn:nth-child(4) { animation-delay: 0.4s; }
            .quick-btn:nth-child(5) { animation-delay: 0.5s; }

            /* Responsive Design */
            @media (max-width: 768px) {
                .header-content {
                    flex-direction: column;
                    gap: 1rem;
                    text-align: center;
                }

                .header-buttons-container {
                    gap: 0.4rem;
                    padding: 0 0.5rem;
                }

                .header-btn {
                    padding: 0.35rem 0.6rem;
                    font-size: 0.7rem;
                    min-width: 70px;
                }

                .header-btn span {
                    font-size: 0.65rem;
                }

                .header-btn i {
                    font-size: 0.8rem;
                }

                .form-row {
                    flex-direction: column;
                    gap: 0;
                }

                .form-row .form-group {
                    margin-bottom: 1.5rem;
                }

                .results-grid {
                    grid-template-columns: 1fr;
                }

                .footer-content {
                    grid-template-columns: 1fr;
                    gap: 1rem;
                    text-align: center;
                }

                .footer-brand,
                .footer-contact {
                    padding: 0.5rem;
                }

                .footer-brand h3 {
                    font-size: 1.3rem;
                }

                .footer-brand p {
                    font-size: 0.8rem;
                    margin: 0 0 0.75rem 0;
                }

                .footer-location-btn {
                    font-size: 0.75rem;
                    padding: 0.4rem 0.75rem;
                }

                .footer-social h4,
                .footer-contact h4 {
                    font-size: 1rem;
                }

                .social-buttons {
                    max-width: 180px;
                    margin: 0 auto;
                }

                .social-btn {
                    font-size: 0.75rem;
                    padding: 0.5rem 0.75rem;
                }

                .contact-info {
                    font-size: 0.75rem;
                }

                /* Quick Access Mobile Styles */
                .quick-access-section {
                    padding: 2rem 0;
                }

                .quick-access-title {
                    font-size: 1.8rem;
                    margin-bottom: 2rem;
                }

                .quick-access-buttons {
                    grid-template-columns: 1fr;
                    gap: 1.5rem;
                }

                .quick-btn {
                    padding: 1.5rem;
                    flex-direction: column;
                    text-align: center;
                    gap: 1rem;
                }

                .quick-btn-icon {
                    width: 60px;
                    height: 60px;
                    font-size: 1.5rem;
                }

                .quick-btn-content {
                    text-align: center;
                }

                .quick-btn-content h4 {
                    font-size: 1.2rem;
                }

                .quick-btn-content p {
                    font-size: 0.9rem;
                }
            }

            /* Search Bar Styles */
            .search-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem 1rem;
            }

            .search-bar {
                position: relative;
                width: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .search-input {
                width: 100%;
                padding: 1.2rem 4rem 1.2rem 1.5rem;
                border: 3px solid var(--primary-color);
                border-radius: 50px;
                font-size: 1.1rem;
                background: white;
                transition: var(--transition);
                box-shadow: 0 4px 15px rgba(231, 76, 60, 0.2);
                font-weight: 500;
            }

            .search-input:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.15), 0 8px 25px rgba(231, 76, 60, 0.3);
                transform: translateY(-2px);
            }

            .search-input::placeholder {
                color: var(--text-muted);
                font-weight: 400;
            }

            .search-icon-btn {
                position: absolute;
                right: 8px;
                top: 50%;
                transform: translateY(-50%);
                background: var(--primary-color);
                color: white;
                border: none;
                width: 45px;
                height: 45px;
                border-radius: 50%;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
            }

            .search-icon-btn:hover {
                background: #c82333;
                transform: translateY(-50%) scale(1.05);
                box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
            }

            .search-icon-btn:active {
                transform: translateY(-50%) scale(0.95);
            }

            /* Products Section Styles */
            .products-section {
                padding: 4rem 0;
                background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
            }

            .section-title {
                text-align: center;
                color: #2c3e50 !important;
                font-size: 2.5rem;
                margin-bottom: 3rem;
                font-weight: 700;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
                margin-top: 2rem;
            }

            .product-card {
                background: white;
                border-radius: var(--border-radius);
                overflow: hidden;
                box-shadow: var(--shadow);
                transition: var(--transition);
                border: 2px solid transparent;
            }

            .product-card:hover {
                transform: translateY(-5px);
                box-shadow: var(--shadow-lg);
            }

            .product-image {
                width: 100%;
                height: 300px;
                background: linear-gradient(135deg, #ffffff, #f8f9fa);
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
                border-radius: 15px;
                margin-bottom: 1rem;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                padding: 20px;
            }

            .product-image img {
                width: 100%;
                height: 100%;
                object-fit: contain;
                object-position: center;
                border-radius: 10px;
                transition: transform 0.3s ease;
                max-width: 90%;
                max-height: 90%;
                filter: brightness(1.05) contrast(1.1);
            }

            .product-info {
                padding: 1.5rem;
            }

            .product-name {
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--secondary-color);
                margin-bottom: 0.5rem;
            }

            .product-description {
                color: var(--text-muted);
                margin-bottom: 1rem;
                line-height: 1.6;
            }

            .product-price {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--primary-color);
                margin-bottom: 1rem;
            }

            .product-rating {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin-bottom: 1rem;
            }

            .stars {
                color: #ffc107;
                font-size: 1.1rem;
            }

            .rating-text {
                color: var(--text-muted);
                font-size: 0.9rem;
            }

            .product-features {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }

            .feature-tag {
                background: rgba(231, 76, 60, 0.1);
                color: var(--primary-color);
                padding: 0.25rem 0.75rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
            }

            .product-btn {
                width: 100%;
                background: var(--primary-color);
                color: white;
                border: none;
                padding: 0.75rem;
                border-radius: var(--border-radius);
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .product-btn:hover {
                background: #c82333;
                transform: translateY(-2px);
            }

            .no-results {
                text-align: center;
                padding: 3rem;
                color: var(--text-muted);
                grid-column: 1 / -1;
            }

            .no-results i {
                font-size: 3rem;
                margin-bottom: 1rem;
                opacity: 0.5;
            }

            .stock-badge {
                background: var(--success-color);
                color: white;
                padding: 0.25rem 0.75rem;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 500;
            }

            /* Filter Buttons Styles */
            .filter-container {
                max-width: 1200px;
                margin: 1.5rem auto 0;
                padding: 0 1rem;
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .filter-btn {
                padding: 0.75rem 1.5rem;
                border: 2px solid var(--primary-color);
                background: white;
                color: var(--primary-color);
                border-radius: 25px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: var(--transition);
                position: relative;
                overflow: hidden;
            }

            .filter-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: var(--primary-color);
                transition: left 0.3s ease;
                z-index: 0;
            }

            .filter-btn span {
                position: relative;
                z-index: 1;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .filter-btn:hover::before,
            .filter-btn.active::before {
                left: 0;
            }

            .filter-btn:hover,
            .filter-btn.active {
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
            }

            /* Product Grid Styles */
            .products-section {
                max-width: 1200px;
                margin: 0 auto;
                padding: 2rem 1rem;
            }

            .section-title {
                text-align: center;
                font-size: 2.5rem;
                font-weight: 700;
                color: var(--secondary-color);
                margin-bottom: 3rem;
            }

            .products-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 2rem;
                margin-bottom: 3rem;
            }

            /* Product Card Styles */
            .product-card {
                background: white;
                border-radius: var(--border-radius);
                box-shadow: var(--shadow);
                overflow: hidden;
                transition: var(--transition);
                cursor: pointer;
                position: relative;
            }

            .product-card:hover {
                transform: translateY(-5px);
                box-shadow: var(--shadow-lg);
            }



            .product-card:hover .product-image img {
                transform: scale(1.02);
            }

            .product-placeholder {
                font-size: 4rem;
                color: var(--text-muted);
                opacity: 0.5;
            }

            .discount-badge {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: var(--primary-color);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 50px;
                font-weight: 600;
                font-size: 0.9rem;
                box-shadow: var(--shadow);
            }

            .favorite-btn {
                position: absolute;
                top: 1rem;
                left: 1rem;
                width: 45px;
                height: 45px;
                background: white;
                border: 2px solid #ddd;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                z-index: 10;
            }

            .favorite-btn:hover {
                background: #ffffff;
                border-color: var(--primary-color);
                transform: scale(1.1);
            }

            .favorite-btn i {
                font-size: 1.2rem;
                color: #ddd;
                transition: all 0.3s ease;
            }

            .favorite-btn.favorited {
                background: var(--primary-color);
                border-color: var(--primary-color);
            }

            .favorite-btn.favorited i {
                color: white;
            }

            .favorite-btn.favorited:hover {
                background: #dc3545;
                border-color: #dc3545;
            }

            .product-info {
                padding: 1.5rem;
            }

            .product-name {
                font-size: 1.3rem;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: var(--secondary-color);
            }

            .product-description {
                color: var(--text-muted);
                margin-bottom: 1rem;
                font-size: 0.95rem;
            }

            .product-pricing {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.3rem;
                margin-bottom: 1rem;
                text-align: center;
            }

            .price-discount-badge {
                background: var(--success-color);
                color: white;
                padding: 0.2rem 0.5rem;
                border-radius: 15px;
                font-size: 0.7rem;
                font-weight: 600;
                margin-bottom: 0.3rem;
            }

            .current-price {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--primary-color);
            }

            .original-price {
                font-size: 1.1rem;
                text-decoration: line-through;
                color: var(--text-muted);
            }

            .product-features {
                list-style: none;
                margin-bottom: 1rem;
            }

            .product-features li {
                padding: 0.25rem 0;
                font-size: 0.9rem;
                color: var(--text-muted);
            }

            .product-features li::before {
                content: "✓";
                color: var(--success-color);
                font-weight: bold;
                margin-right: 0.5rem;
            }

            /* Modal Styles */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                padding: 1rem;
            }

            .modal-content {
                background: white;
                border-radius: var(--border-radius);
                max-width: 600px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                position: relative;
                display: flex;
                flex-direction: column;
            }

            .modal-header {
                padding: 1.5rem;
                border-bottom: 1px solid var(--border-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .modal-title {
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--secondary-color);
            }

            .close-button {
                background: none;
                border: none;
                font-size: 1.5rem;
                cursor: pointer;
                color: var(--text-muted);
                padding: 0.5rem;
                border-radius: 50%;
                transition: var(--transition);
            }

            .close-button:hover {
                background: var(--background-color);
                color: var(--text-color);
            }

            .modal-body {
                padding: 1.5rem;
                flex: 1;
                overflow-y: auto;
            }

            .modal-actions {
                padding: 1.5rem;
                border-top: 1px solid var(--border-color);
                display: flex;
                gap: 1rem;
                flex-wrap: wrap;
                position: sticky;
                bottom: 0;
                background: white;
                margin-top: auto;
            }

            .btn {
                padding: 0.75rem 1.5rem;
                border: none;
                border-radius: var(--border-radius);
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                gap: 0.5rem;
                text-decoration: none;
                justify-content: center;
            }

            .btn-primary {
                background: var(--primary-color);
                color: white;
            }

            .btn-primary:hover {
                background: #dc3545;
            }

            .btn-secondary {
                background: var(--secondary-color);
                color: white;
            }

            .btn-secondary:hover {
                background: #1a252f;
            }

            .btn-outline {
                background: transparent;
                border: 2px solid var(--border-color);
                color: var(--text-color);
            }

            .btn-outline:hover {
                background: var(--background-color);
                border-color: var(--text-color);
            }

            /* Menu Dropdown */
            .menu-dropdown {
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border-radius: var(--border-radius);
                box-shadow: var(--shadow-lg);
                min-width: 200px;
                overflow: hidden;
                z-index: 1001;
            }

            .menu-item {
                padding: 1rem;
                cursor: pointer;
                transition: var(--transition);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .menu-item:hover {
                background: var(--background-color);
            }

            /* Flavor Selection Styles */
            .flavor-section {
                background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                padding: 1.5rem;
                border-radius: 12px;
                margin-bottom: 1.5rem;
                border: 2px solid rgba(220, 53, 69, 0.1);
            }

            .flavor-title {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--secondary-color);
                margin-bottom: 1rem;
            }

            .flavor-title i {
                color: var(--primary-color);
                font-size: 1.2rem;
            }

            .flavor-options {
                display: flex;
                flex-wrap: wrap;
                gap: 0.8rem;
                margin-bottom: 1rem;
            }

            .flavor-btn {
                padding: 0.8rem 1.5rem;
                border: 2px solid var(--border-color);
                border-radius: 25px;
                background: white;
                color: var(--text-color);
                font-size: 0.95rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                min-width: 100px;
                text-align: center;
            }

            .flavor-btn:hover {
                border-color: var(--primary-color);
                color: var(--primary-color);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(220, 53, 69, 0.2);
            }

            .flavor-btn.selected {
                background: linear-gradient(135deg, var(--primary-color), #c82333);
                color: white;
                border-color: var(--primary-color);
                box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
                transform: translateY(-1px);
            }

            .flavor-btn.selected::before {
                content: '✓';
                position: absolute;
                top: -5px;
                right: -5px;
                background: var(--success-color);
                color: white;
                border-radius: 50%;
                width: 20px;
                height: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.7rem;
                font-weight: bold;
            }

            .flavor-btn:disabled {
                background: #f8f9fa;
                color: #6c757d;
                border-color: #dee2e6;
                cursor: not-allowed;
                transform: none;
            }

            .flavor-btn:disabled:hover {
                transform: none;
                box-shadow: none;
            }

            .selected-flavor-display {
                background: rgba(220, 53, 69, 0.1);
                padding: 0.8rem;
                border-radius: 8px;
                text-align: center;
                font-size: 0.95rem;
                color: var(--secondary-color);
                border: 1px solid rgba(220, 53, 69, 0.2);
            }

            .selected-flavor-display strong {
                color: var(--primary-color);
                font-weight: 600;
            }

            .flavor-options {
                display: flex;
                gap: 0.8rem;
                flex-wrap: wrap;
            }

            .flavor-btn {
                padding: 0.6rem 1.2rem;
                border: 2px solid #dc3545;
                background: white;
                color: #dc3545;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                min-width: 80px;
                text-align: center;
            }

            .flavor-btn:hover {
                background: #dc3545;
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
            }

            .flavor-btn.selected {
                background: #dc3545;
                color: white;
                box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
            }

            .selected-flavor-display {
                margin-top: 0.8rem;
                padding: 0.6rem;
                background: white;
                border-radius: 8px;
                border-left: 4px solid #dc3545;
                font-weight: 500;
                color: #2c3e50;
            }

            /* No Results */
            .no-results {
                text-align: center;
                padding: 3rem;
                color: var(--text-muted);
            }

            .no-results i {
                font-size: 3rem;
                margin-bottom: 1rem;
                opacity: 0.5;
            }

            /* Success Messages */
            .success-message {
                background: var(--success-color);
                color: white;
                padding: 1rem;
                border-radius: var(--border-radius);
                margin-bottom: 1rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .hidden {
                display: none;
            }

            /* Food Calculator Mobile Responsive */
            @media (max-width: 768px) {
                .food-calc-container {
                    padding: 1rem;
                    max-height: none;
                    overflow-y: auto;
                }

                .meals-section {
                    gap: 1rem;
                    flex: 1;
                    padding-bottom: 0;
                }

                .meal-container {
                    padding: 1rem;
                    margin-bottom: 1rem;
                    border-radius: 10px;
                }

                .meal-header {
                    flex-direction: column;
                    gap: 0.8rem;
                    margin-bottom: 0.8rem;
                    padding-bottom: 0.8rem;
                }

                .meal-title {
                    font-size: 1.1rem;
                    text-align: center;
                }

                .add-food-btn {
                    width: 100%;
                    padding: 0.6rem 1rem;
                    font-size: 0.85rem;
                    justify-content: center;
                }

                .food-item {
                    padding: 0.6rem;
                    flex-direction: column;
                    gap: 0.5rem;
                    text-align: center;
                }

                .food-name {
                    font-size: 0.9rem;
                    margin-bottom: 0.3rem;
                }

                .food-quantity, .food-calories {
                    font-size: 0.8rem;
                    margin: 0;
                }

                .remove-food-btn {
                    width: 25px;
                    height: 25px;
                    font-size: 0.8rem;
                    align-self: center;
                }

                .meal-totals {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.5rem;
                    padding: 0.8rem;
                }

                .total-label {
                    font-size: 0.7rem;
                }

                .total-value {
                    font-size: 0.9rem;
                }

                .total-unit {
                    font-size: 0.6rem;
                }

                .daily-total {
                    padding: 1.2rem;
                    margin-top: 1rem;
                    border-radius: 12px;
                }

                .daily-total-title {
                    font-size: 1.2rem;
                    margin-bottom: 1rem;
                }

                .daily-totals-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.8rem;
                }

                .daily-total-card {
                    padding: 1rem;
                    border-radius: 8px;
                }

                .daily-total-icon {
                    font-size: 1.5rem;
                    margin-bottom: 0.5rem;
                }

                .daily-total-label {
                    font-size: 0.8rem;
                }

                .daily-total-value {
                    font-size: 1.4rem;
                }

                .action-buttons {
                    flex-direction: column;
                    gap: 0.8rem;
                    margin-top: 1rem;
                }

                .calc-btn {
                    width: 100%;
                    padding: 0.8rem;
                    font-size: 0.9rem;
                }

                /* Food Modal Mobile Styles */
                .food-modal {
                    width: 95vw;
                    max-width: 95vw;
                    max-height: 85vh;
                    margin: 0;
                    border-radius: 15px;
                }

                .food-modal-body {
                    padding: 1rem;
                    max-height: 65vh;
                }

                .search-container {
                    max-width: 100%;
                }

                .search-input {
                    padding: 0.8rem 1rem 0.8rem 2.5rem;
                    font-size: 0.9rem;
                }

                .search-icon {
                    left: 0.8rem;
                    font-size: 1rem;
                }

                .food-categories {
                    gap: 0.3rem;
                    margin-bottom: 1rem;
                }

                .category-btn {
                    padding: 0.4rem 0.8rem;
                    font-size: 0.8rem;
                    border-radius: 20px;
                }

                .food-list {
                    max-height: 250px;
                    overflow-y: auto;
                }

                .food-list-item {
                    padding: 0.8rem;
                    border-radius: 8px;
                }

                .food-list-item h5 {
                    font-size: 0.9rem;
                    margin-bottom: 0.3rem;
                }

                .food-list-item .nutrition-summary {
                    font-size: 0.75rem;
                    gap: 0.5rem;
                }

                .selected-food-details {
                    padding: 1rem;
                    margin-top: 1rem;
                    border-radius: 8px;
                }

                .selected-food-details h4 {
                    font-size: 1.1rem;
                    margin-bottom: 0.8rem;
                }

                .food-info .food-name {
                    font-size: 1rem;
                    margin-bottom: 0.8rem;
                }

                .food-nutrition {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.8rem;
                    margin-bottom: 1rem;
                }

                .nutrition-item {
                    padding: 0.6rem;
                    border-radius: 6px;
                }

                .nutrition-label {
                    font-size: 0.75rem;
                }

                .nutrition-value {
                    font-size: 0.9rem;
                }

                .quantity-input {
                    margin-bottom: 1rem;
                }

                .quantity-input label {
                    font-size: 0.9rem;
                    margin-bottom: 0.3rem;
                }

                .quantity-input input {
                    padding: 0.6rem;
                    font-size: 0.9rem;
                }

                .add-to-meal-btn {
                    width: 100%;
                    padding: 0.8rem;
                    font-size: 0.9rem;
                }

                /* Ultra Calculator Mobile Styles */
                .ultra-calculator {
                    width: 98vw;
                    max-width: 98vw;
                    max-height: 85vh;
                    border-radius: 20px;
                    margin: 1rem auto;
                }

                .ultra-calc-header {
                    padding: 1rem;
                    flex-direction: column;
                    gap: 0.8rem;
                    text-align: center;
                }

                .calc-header-left, .calc-header-right {
                    justify-content: center;
                }

                .calc-title {
                    font-size: 1.1rem;
                }

                .calc-logo img {
                    width: 40px;
                }

                .calc-close-btn, .calc-share-btn {
                    padding: 0.4rem;
                    font-size: 1rem;
                }

                /* All Calculator Buttons Mobile Styles */
                .reset-calc-btn, .download-image-btn, .add-exercise-btn {
                    min-width: 200px !important;
                    padding: 0.8rem 1.5rem !important;
                    font-size: 0.9rem !important;
                }

                .reset-calc-btn i, .download-image-btn i, .add-exercise-btn i {
                    margin-left: 0.5rem !important;
                    font-size: 1rem !important;
                }

                /* Center all calculator button containers */
                .calc-form-section, .workout-actions {
                    display: flex !important;
                    flex-direction: column !important;
                    align-items: center !important;
                    gap: 1rem !important;
                }
            }

            /* Extra Small Mobile Devices */
            @media (max-width: 480px) {
                .food-calc-container {
                    padding: 0.8rem;
                    min-height: 100vh;
                    max-height: none;
                    overflow-y: auto;
                }

                .meals-section {
                    gap: 0.8rem;
                    flex: 1;
                    padding-bottom: 0;
                }

                .meal-container {
                    padding: 0.8rem;
                    margin-bottom: 0.8rem;
                    border-radius: 8px;
                }

                .meal-title {
                    font-size: 1rem;
                }

                .add-food-btn {
                    padding: 0.5rem 0.8rem;
                    font-size: 0.8rem;
                }

                .food-item {
                    padding: 0.5rem;
                    gap: 0.3rem;
                }

                .food-name {
                    font-size: 0.85rem;
                }

                .food-quantity, .food-calories {
                    font-size: 0.75rem;
                }

                .remove-food-btn {
                    width: 22px;
                    height: 22px;
                    font-size: 0.75rem;
                }

                .meal-totals {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.4rem;
                    padding: 0.6rem;
                }

                .total-label {
                    font-size: 0.65rem;
                }

                .total-value {
                    font-size: 0.85rem;
                }

                .total-unit {
                    font-size: 0.55rem;
                }

                .daily-total {
                    padding: 1rem;
                    margin-top: 0.8rem;
                    border-radius: 10px;
                }

                .daily-total-title {
                    font-size: 1.1rem;
                    margin-bottom: 0.8rem;
                }

                .daily-totals-grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.6rem;
                }

                .daily-total-card {
                    padding: 0.8rem;
                    border-radius: 6px;
                }

                .daily-total-icon {
                    font-size: 1.3rem;
                    margin-bottom: 0.4rem;
                }

                .daily-total-label {
                    font-size: 0.75rem;
                }

                .daily-total-value {
                    font-size: 1.2rem;
                }

                .action-buttons {
                    gap: 0.6rem;
                    margin-top: 0.8rem;
                }

                .calc-btn {
                    padding: 0.7rem;
                    font-size: 0.85rem;
                }

                /* All Calculator Buttons Extra Small Mobile */
                .reset-calc-btn, .download-image-btn, .add-exercise-btn {
                    min-width: 160px !important;
                    padding: 0.6rem 1rem !important;
                    font-size: 0.8rem !important;
                }

                .reset-calc-btn i, .download-image-btn i, .add-exercise-btn i {
                    margin-left: 0.4rem !important;
                    font-size: 0.9rem !important;
                }

                /* Center all calculator button containers */
                .calc-form-section, .workout-actions {
                    display: flex !important;
                    flex-direction: column !important;
                    align-items: center !important;
                    gap: 0.8rem !important;
                }

                /* Food Modal Extra Small Mobile */
                .food-modal {
                    width: 98vw;
                    max-width: 98vw;
                    max-height: 85vh;
                    border-radius: 12px;
                }

                .food-modal-body {
                    padding: 0.8rem;
                    flex: 1;
                    min-height: 0;
                    gap: 0.8rem;
                }

                .search-input {
                    padding: 0.7rem 0.8rem 0.7rem 2.2rem;
                    font-size: 0.85rem;
                }

                .search-icon {
                    left: 0.7rem;
                    font-size: 0.9rem;
                }

                .category-btn {
                    padding: 0.3rem 0.6rem;
                    font-size: 0.75rem;
                    border-radius: 15px;
                }

                .food-list {
                    max-height: 180px;
                }

                .food-list-item {
                    padding: 0.6rem;
                    border-radius: 6px;
                }

                .food-list-item h5 {
                    font-size: 0.85rem;
                    margin-bottom: 0.2rem;
                }

                .food-list-item .nutrition-summary {
                    font-size: 0.7rem;
                    gap: 0.3rem;
                }

                .selected-food-details {
                    padding: 0.8rem;
                    margin-top: 0.8rem;
                    border-radius: 6px;
                }

                .selected-food-details h4 {
                    font-size: 1rem;
                    margin-bottom: 0.6rem;
                }

                .food-info .food-name {
                    font-size: 0.9rem;
                    margin-bottom: 0.6rem;
                }

                .food-nutrition {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 0.6rem;
                    margin-bottom: 0.8rem;
                }

                .nutrition-item {
                    padding: 0.5rem;
                    border-radius: 4px;
                }

                .nutrition-label {
                    font-size: 0.7rem;
                }

                .nutrition-value {
                    font-size: 0.8rem;
                }

                .quantity-input {
                    margin-bottom: 0.8rem;
                }

                .quantity-input label {
                    font-size: 0.85rem;
                    margin-bottom: 0.2rem;
                }

                .quantity-input input {
                    padding: 0.5rem;
                    font-size: 0.85rem;
                }

                .add-to-meal-btn {
                    padding: 0.7rem;
                    font-size: 0.85rem;
                }

                /* Ultra Calculator Extra Small Mobile */
                .ultra-calculator {
                    width: 99vw;
                    max-width: 99vw;
                    max-height: 82vh;
                    border-radius: 15px;
                    margin: 0.5rem auto;
                }

                .ultra-calc-header {
                    padding: 0.8rem;
                    gap: 0.6rem;
                }

                .calc-title {
                    font-size: 1rem;
                }

                .calc-logo img {
                    width: 35px;
                }

                .calc-close-btn, .calc-share-btn {
                    padding: 0.3rem;
                    font-size: 0.9rem;
                }
            }

            /* Responsive Design - New Header Structure */
            @media (max-width: 768px) {
                .header-top {
                    flex-direction: row;
                    justify-content: space-between;
                    gap: 1rem;
                    padding: 0.8rem;
                }

                .three-dots-dropdown {
                    left: -180px;
                    min-width: 220px;
                }

                .three-dots-btn {
                    width: 35px;
                    height: 35px;
                    font-size: 1.2rem;
                }

                .header-center {
                    padding: 0;
                }

                .logo {
                    width: 60px;
                    height: 60px;
                }

                .brand-text h1 {
                    font-size: 1.4rem;
                }

                .brand-text p {
                    font-size: 0.75rem;
                }

                .header-menu-btn {
                    padding: 0.3rem 0.5rem;
                    font-size: 0.8rem;
                }

                .header-middle {
                    padding: 0.8rem 0;
                }

                .compact-search-bar {
                    max-width: 300px;
                }

                .compact-search-bar input {
                    font-size: 0.85rem;
                    padding: 0.5rem 2rem 0.5rem 0.8rem;
                }

                .header-bottom {
                    padding: 0.4rem 0;
                }

                .header-bottom-container {
                    flex-direction: row;
                    justify-content: space-around;
                    gap: 0.8rem;
                    padding: 0 0.5rem;
                }

                .nav-dropdown {
                    width: auto;
                    max-width: none;
                    margin: 0;
                }

                .nav-dropdown-btn {
                    padding: 0.6rem 1rem;
                    font-size: 0.8rem;
                    width: auto;
                    justify-content: center;
                    min-width: 90px;
                    white-space: nowrap;
                }

                .nav-dropdown-content {
                    left: 50%;
                    transform: translateX(-50%);
                    right: auto;
                    min-width: 180px;
                }

                .nav-dropdown.active .nav-dropdown-content {
                    transform: translateX(-50%) translateY(0);
                }

                .nav-dropdown-item {
                    padding: 0.6rem 1rem;
                    font-size: 0.8rem;
                }

                .menu-dropdown {
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    min-width: 300px;
                    max-width: 90vw;
                    max-height: 80vh;
                    overflow-y: auto;
                    border-radius: 15px;
                }

                .search-container {
                    padding: 1.5rem 1rem;
                }

                .search-input {
                    font-size: 1rem;
                    padding: 1rem 3.5rem 1rem 1.2rem;
                }

                .search-icon-btn {
                    width: 40px;
                    height: 40px;
                    right: 6px;
                    font-size: 1.1rem;
                }

                .products-grid {
                    grid-template-columns: 1fr;
                    gap: 1.5rem;
                }

                .section-title {
                    font-size: 2rem;
                }

                .modal-content {
                    margin: 1rem;
                    max-height: calc(100vh - 2rem);
                    display: flex;
                    flex-direction: column;
                }

                .modal-actions {
                    flex-direction: column;
                    position: relative;
                    background: white;
                    padding: 1rem;
                    border-top: 1px solid var(--border-color);
                    margin-top: auto;
                }

                .modal-actions .btn {
                    width: 100%;
                    margin-bottom: 0.5rem;
                }

                .modal-actions .btn:last-child {
                    margin-bottom: 0;
                }

                .modal-content {
                    padding-bottom: 0;
                }
            }

            /* Extra small screens */
            @media (max-width: 480px) {
                .header-bottom-container {
                    flex-wrap: wrap;
                    gap: 0.5rem;
                    padding: 0 0.3rem;
                }

                .nav-dropdown-btn {
                    padding: 0.5rem 0.8rem;
                    font-size: 0.75rem;
                    min-width: 80px;
                }

                .nav-dropdown-content {
                    min-width: 160px;
                }

                .compact-search-bar {
                    max-width: 280px;
                }

                .brand-text h1 {
                    font-size: 1.2rem;
                }

                .brand-text p {
                    font-size: 0.7rem;
                }


            }
        </style>
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <!-- Header Top Section -->
            <div class="header-top">
                <div class="header-center">
                    <div class="logo-section">
                        <div class="logo">
                            <a href="#" onclick="location.reload()">
                                <img src="images/logo.png" alt="Popeye Gym Logo" />
                            </a>
                        </div>
                        <div class="brand-text">
                            <h1>Popeye Gym</h1>
                            <p>يمكننا مساعدتك على التدرب بطريقة آمنة وذكية وصحية</p>
                        </div>
                    </div>
                </div>


            </div>

            <!-- Header Middle Section - Compact Search -->
            <div class="header-middle">
                <div class="header-middle-container">
                    <div class="compact-search-bar">
                        <input
                            type="text"
                            id="compact-search-input"
                            placeholder="بحث سريع..."
                            onkeypress="if(event.key === 'Enter') performComprehensiveSearch()"
                        />
                        <i class="fas fa-search search-icon" onclick="performComprehensiveSearch()"></i>
                    </div>
                </div>
            </div>



            <!-- Header Bottom Section - Navigation Dropdowns -->
            <div class="header-bottom">
                <div class="header-bottom-container">
                    <!-- المواعيد وأسعار الاشتراك Dropdown -->
                    <div class="nav-dropdown">
                        <div class="nav-dropdown-btn" onclick="toggleNavDropdown(this)">
                            <i class="fas fa-clock"></i>
                            <span>المواعيد وأسعار الاشتراك</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="nav-dropdown-content">
                            <div class="nav-dropdown-item" onclick="openPopeyeModal('kids')">
                                <i class="fas fa-child"></i>
                                <span>مواعيد الأطفال الإناث</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="openPopeyeModal('men-schedule')">
                                <i class="fas fa-male"></i>
                                <span>مواعيد الرجال</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="openPopeyeModal('women-schedule')">
                                <i class="fas fa-female"></i>
                                <span>مواعيد النساء</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="openPopeyeModal('pricing')">
                                <i class="fas fa-money-bill-wave"></i>
                                <span>أسعار الاشتراكات</span>
                            </div>
                        </div>
                    </div>

                    <!-- الحواسب والأدوات Dropdown -->
                    <div class="nav-dropdown">
                        <div class="nav-dropdown-btn" onclick="toggleNavDropdown(this)">
                            <i class="fas fa-tools"></i>
                            <span>الحواسب والأدوات</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="nav-dropdown-content">
                            <div class="nav-dropdown-item" onclick="showUltraCaloriesCalculator()">
                                <i class="fas fa-calculator"></i>
                                <span>حساب السعرات والبروتين</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="window.location.href='food.html'">
                                <i class="fas fa-utensils"></i>
                                <span>حاسبة سعرات الطعام</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="showBodyFatCalculator()">
                                <i class="fas fa-weight"></i>
                                <span>حاسبة الدهون</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="showEnergyCalculator()">
                                <i class="fas fa-bolt"></i>
                                <span>حاسبة الطاقة</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="showWaterCalculator()">
                                <i class="fas fa-tint"></i>
                                <span>حاسبة الماء</span>
                            </div>
                            <div class="nav-dropdown-item" onclick="showStopwatch()">
                                <i class="fas fa-stopwatch"></i>
                                <span>العداد</span>
                            </div>

                            <div class="nav-dropdown-item" onclick="showWorkoutTracker()">
                                <i class="fas fa-dumbbell"></i>
                                <span>تسجيل التمارين</span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </header>





        <!-- Filter Buttons -->
        <div class="filter-container">
            <button class="filter-btn active" onclick="filterByCategory('all')">
                <span><i class="fas fa-th-large"></i> جميع المنتجات</span>
            </button>
            <button class="filter-btn" onclick="filterByCategory('كرياتين')">
                <span><i class="fas fa-dumbbell"></i> كرياتين</span>
            </button>
            <button class="filter-btn" onclick="filterByCategory('بروتين')">
                <span><i class="fas fa-seedling"></i> بروتين</span>
            </button>
            <button class="filter-btn" onclick="filterByCategory('مكملات طاقة')">
                <span><i class="fas fa-bolt"></i> مكملات طاقة</span>
            </button>
            <button class="filter-btn" onclick="filterByCategory('ماسجنر')">
                <span><i class="fas fa-chart-line"></i> ماسجنر</span>
            </button>
            <button class="filter-btn" onclick="filterByCategory('favorites')">
                <span><i class="fas fa-heart"></i> المفضلة</span>
            </button>
        </div>



        <!-- Products Section -->
        <main class="products-section">
            <div id="products-grid" class="products-grid"></div>
        </main>

        <!-- Product Modal -->
        <div id="modal-overlay" class="modal-overlay hidden" onclick="closeModal()">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <h2 id="modal-title" class="modal-title"></h2>
                    <button class="close-button" onclick="closeModal()" aria-label="إغلاق النافذة">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="modal-body">
                    <div id="modal-body-content"></div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="orderViaWhatsApp()" style="flex: 1;">
                        <i class="fab fa-whatsapp"></i>
                        طلب عبر واتساب
                    </button>

                    <button class="btn btn-outline" onclick="copyProductLink()">
                        <i class="fas fa-link"></i>
                        نسخ الرابط
                    </button>
                </div>
            </div>
        </div>

        <!-- Popeye Info Modal -->
        <div id="popeye-modal" class="modal-overlay hidden" onclick="closePopeyeModal()">
            <div class="popeye-modal-content" onclick="event.stopPropagation()">
                <!-- Modal Header with Share Button -->
                <div class="popeye-modal-header">
                    <button class="popeye-close-btn" onclick="closePopeyeModal()" aria-label="إغلاق النافذة">
                        <i class="fas fa-times"></i>
                    </button>
                    <h1 class="popeye-header-title">POPEYE GYM</h1>
                    <button class="popeye-new-share-btn" onclick="sharePopeyeGymNew()" aria-label="مشاركة معلومات الجيم">
                        <i class="fas fa-share-nodes"></i>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="popeye-modal-body">
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Membership Pricing -->
                    <div class="popeye-pricing-section">
                        <!-- Men's Membership -->
                        <div class="popeye-pricing-card men-card">
                            <div class="pricing-card-header">
                                <div class="pricing-icon">
                                    <i class="fas fa-mars"></i>
                                </div>
                                <h3 class="pricing-title">اشتراك الرجال</h3>
                            </div>
                            <div class="pricing-content">
                                <div class="pricing-item">
                                    <span class="pricing-label">يومي:</span>
                                    <span class="pricing-value">30 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهر:</span>
                                    <span class="pricing-value">350 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهرين:</span>
                                    <span class="pricing-value">650 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">3 شهور:</span>
                                    <span class="pricing-value">950 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">20 حصة:</span>
                                    <span class="pricing-value">400 جنيه</span>
                                </div>
                            </div>
                        </div>

                        <!-- Women's Membership -->
                        <div class="popeye-pricing-card women-card">
                            <div class="pricing-card-header">
                                <div class="pricing-icon">
                                    <i class="fas fa-venus"></i>
                                </div>
                                <h3 class="pricing-title">اشتراك النساء</h3>
                            </div>
                            <div class="pricing-content">
                                <div class="pricing-item">
                                    <span class="pricing-label">يومي:</span>
                                    <span class="pricing-value">30 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهر:</span>
                                    <span class="pricing-value">250 جنيه</span>
                                    <span class="pricing-bonus">3 أيام في الأسبوع</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهرين:</span>
                                    <span class="pricing-value">450 جنيه</span>
                                    <span class="pricing-bonus">3 أيام في الأسبوع</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">20 حصة:</span>
                                    <span class="pricing-value">400 جنيه</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Training Schedule -->
                    <div class="popeye-schedule-section">
                        <div class="section-header">
                            <div class="header-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 class="section-title">مواعيد التدريب</h3>
                        </div>

                        <div class="schedule-cards">
                            <!-- Men's Schedule -->
                            <div class="schedule-card men-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-mars"></i>
                                    <h4>مواعيد الرجال</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">جميع الأيام</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">جميع الأوقات عدا أوقات السيدات</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Women's Schedule -->
                            <div class="schedule-card women-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-venus"></i>
                                    <h4>مواعيد النساء</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">السبت - الاثنين - الأربعاء</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">من 3 عصراً : 8 مساءً</div>
                                        </div>
                                    </div>
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">الأحد - الثلاثاء - الخميس</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">من 10 صباحاً : 1 ظهراً</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Kids Training -->
                    <div class="popeye-kids-section">
                        <div class="kids-card">
                            <div class="kids-header">
                                <div class="kids-icon">
                                    <i class="fas fa-child"></i>
                                </div>
                                <h3 class="kids-title">تدريب الأطفال الإناث</h3>
                            </div>
                            <div class="kids-content">
                                <div class="kids-info">
                                    <div class="kids-days">السبت - الاثنين - الأربعاء</div>
                                    <div class="kids-time">من 3:00 مساءً حتى 5:00 مساءً</div>
                                    <div class="kids-note">الاشتراك يومي فقط</div>
                                </div>
                                <div class="kids-warnings">
                                    <div class="warning-header">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span>تنبيهات مهمة</span>
                                    </div>
                                    <ul class="warning-list">
                                        <li>الفئة العمرية المسموحة: 9 إلى 14 سنة</li>
                                        <li>يمنع دخول أي مرافق داخل الجيم</li>
                                        <li>الالتزام بالمواعيد المحددة إجباري</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Section -->
                    <div class="popeye-contact-section">
                        <div class="contact-header">
                            <div class="contact-logo">
                                <img src="images/logo.png" alt="Popeye Gym">
                            </div>
                            <h3 class="contact-title">تواصل معنا</h3>
                        </div>
                        <div class="contact-links">
                            <a href="https://wa.me/01555037364" target="_blank" class="contact-link whatsapp-link">
                                <div class="contact-icon">
                                    <i class="fab fa-whatsapp"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">واتساب</span>
                                    <span class="contact-value">01555037364</span>
                                </div>
                            </a>
                            <a href="https://www.instagram.com/popeyegym___?igsh=MTdtc3J5cmNpYWU3Zg==" target="_blank" class="contact-link instagram-link">
                            <a href="https://vt.tiktok.com/ZSB7Ape5Q/" target="_blank" class="contact-link tiktok-link">
                                <div class="contact-icon">
                                    <i class="fab fa-tiktok"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">تيك توك</span>
                                    <span class="contact-value">@popeyegym</span>
                                </div>
                            </a>
                                <div class="contact-icon">
                                    <i class="fab fa-instagram"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">انستجرام</span>
                                    <span class="contact-value">@popeyegym___</span>
                                </div>
                            </a>
                            <a href="https://www.facebook.com/share/1Lh1ngiXdT/" target="_blank" class="contact-link facebook-link">
                                <div class="contact-icon">
                                    <i class="fab fa-facebook"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">فيسبوك</span>
                                    <span class="contact-value">Popeye Gym</span>
                                </div>
                            </a>
                        </div>
                        <div class="location-info">
                            <div class="location-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <span class="location-text">الجماليه - خلف مطعم شيخ الحاره</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // بيانات المنتجات
            const products = [

                {
                    id: '5',
                    name: 'كرياتين مونوهيدرات - عالي النقاء',
                    description: 'كرياتين مونوهيدرات فائق الجودة لزيادة القوة والطاقة العضلية وتحسين الأداء الرياضي',
                    category: 'كرياتين',
                    currentPrice: 1250,
                    originalPrice: 1500,
                    discount: 17,
                    features: [
                        'كرياتين مونوهيدرات 100% خالص',
                        'زيادة القوة والطاقة العضلية',
                        'تحسين الأداء في التمارين عالية الكثافة',
                        'تسريع التعافي بين المجموعات',
                        'زيادة حجم العضلات',
                        'سهل الذوبان والامتصاص',
                        'خالي من المواد المضافة',
                        'مختبر علمياً ومضمون الجودة'
                    ],
                    image: 'images/criatine.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    }
                },
                {
                    id: '7',
                    name: 'كرياتين مونوهيدرات نيتريفرسم - 500 جرام',
                    description: 'كرياتين مونوهيدرات نقي 100% من نيتريفرسم - 500 جرام، 5 جرام لكل سكوب، 30 حصة، بدون نكهة، بدون إضافات',
                    category: 'كرياتين',
                    currentPrice: 1500,
                    originalPrice: 1600,
                    discount: 6,
                    features: [
                        'كرياتين مونوهيدرات نقي 100%',
                        'الوزن: 500 جرام',
                        '5 جرام لكل سكوب',
                        'عدد الحصص: 30 حصة',
                        'بدون نكهة - بدون إضافات',
                        'زيادة القوة والطاقة العضلية',
                        'تحسين الأداء في التمارين عالية الكثافة',
                        'تسريع التعافي بين المجموعات',
                        'زيادة حجم العضلات',
                        'سهل الذوبان والامتصاص',
                        'مختبر علمياً ومضمون الجودة'
                    ],
                    image: 'images/criatine2.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    },
                    usage: 'يُخلط 5 جرام (مكيال واحد) مع 200-250 مل من الماء أو العصير. يُتناول مرة واحدة يومياً، ويُفضل بعد التمرين مباشرة.',
                    nutritionPer5g: {
                        creatineMonohydrate: 5,
                        additives: 0,
                        artificialFlavors: 0,
                        sugar: 0
                    }
                },
                {
                    id: '2',
                    name: 'Big Man Labs Red Rex - واي بروتين',
                    description: 'واي بروتين عالي الجودة من Red Rex - متوفر بحجمين مع 24 جرام بروتين لكل سكوب',
                    category: 'بروتين',
                    currentPrice: 1500,
                    originalPrice: 1800,
                    discount: 17,
                    features: [
                        'واي بروتين عالي الجودة',
                        '24 جرام بروتين لكل سكوب',
                        '130 سعرة حرارية لكل حصة',
                        'بدون سكر مضاف (0 جرام)',
                        'متوفر بحجمين: 1 كيلو و 2 كيلو',
                        'يُستخدم قبل أو بعد التمرين',
                        'سهل الهضم والامتصاص',
                        'يساعد في بناء العضلات',
                        'مناسب للاستخدام اليومي',
                        'جودة عالية مضمونة'
                    ],
                    sizes: [
                        { name: '1 كيلو', id: '1kg', price: 1500, available: true },
                        { name: '2 كيلو', id: '2kg', price: 3000, available: true }
                    ],
                    selectedSize: '1kg',
                    flavors: [
                        { name: 'فراولة', id: 'strawberry', available: true },
                        { name: 'فانيليا', id: 'vanilla', available: true },
                        { name: 'شوكولاتة', id: 'chocolate', available: true }
                    ],
                    selectedFlavor: 'strawberry',
                    image: 'images/wheyproteinredrex.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    },
                    usage: 'يُخلط سكوب واحد (30 جرام) مع 200-250 مل من الماء أو الحليب. يُتناول مرة إلى مرتين يومياً، ويُفضل قبل أو بعد التمرين مباشرة.',
                    nutritionPer30g: {
                        calories: 130,
                        protein: 24,
                        carbs: 3,
                        fats: 2,
                        sugar: 0,
                        sodium: 150
                    }
                },
                {
                    id: '3',
                    name: 'كرازي بامب - Dragon Ball',
                    description: 'كرازي بامب هو منتج باور عالي المفعول، تحتوي العبوة على 15 جرام (جرعة واحدة)',
                    category: 'مكملات طاقة',
                    currentPrice: 40,
                    originalPrice: 60,
                    discount: 33,
                    customDiscountText: '20 جنيه خصم',
                    features: [
                        'منتج باور عالي المفعول',
                        'يزيد من إنتاج الطاقة',
                        'يعمل على تحسين الأداء الرياضي',
                        'تركيبة قوية ومركزة',
                        'سريع الامتصاص والتأثير',
                        'مناسب للتمارين المكثفة',
                        'تصميم Dragon Ball المميز',
                        'جودة عالية مضمونة'
                    ],
                    image: 'images/crazypump.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 20,
                        estimatedDays: '1-2 أيام'
                    }
                },
                {
                    id: '8',
                    name: 'Animal Rage Creatine - كرياتين الوحش',
                    description: 'كرياتين مونوهيدرات بتصميم Animal Rage المميز - 300 جرام مع تركيبة قوية لزيادة الأداء والقوة العضلية',
                    category: 'كرياتين',
                    currentPrice: 1100,
                    originalPrice: 1200,
                    discount: 8,
                    features: [
                        'كرياتين مونوهيدرات نقي 100%',
                        'الوزن: 300 جرام',
                        'تصميم Animal Rage المميز',
                        'زيادة القوة والطاقة العضلية بشكل كبير',
                        'تحسين الأداء في التمارين عالية الكثافة',
                        'تسريع التعافي بين المجموعات',
                        'زيادة حجم العضلات وامتلائها',
                        'سهل الذوبان والامتصاص',
                        'خالي من المواد المضافة الضارة',
                        'مختبر علمياً ومضمون الجودة',
                        'مناسب للرياضيين المحترفين'
                    ],
                    image: 'images/criatine3.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    },
                    usage: 'يُخلط 5 جرام مع 200-250 مل من الماء أو العصير. يُتناول مرة واحدة يومياً، ويُفضل بعد التمرين مباشرة.',
                    nutritionPer5g: {
                        creatineMonohydrate: 5,
                        additives: 0,
                        artificialFlavors: 0,
                        sugar: 0
                    }
                },
                {
                    id: '9',
                    name: '100% Creatine Monohydrate - كرياتين نقي',
                    description: 'كرياتين مونوهيدرات نقي 100% - 300 جرام، 60 حصة، بدون نكهة، مثالي للرياضيين الذين يريدون النقاء الكامل',
                    category: 'كرياتين',
                    currentPrice: 1100,
                    originalPrice: 1200,
                    discount: 8,
                    features: [
                        'كرياتين مونوهيدرات نقي 100%',
                        'الوزن: 300 جرام',
                        'عدد الحصص: 60 حصة',
                        '5 جرام لكل حصة',
                        'بدون نكهة - بدون إضافات',
                        'نقاء تام وجودة عالية',
                        'زيادة القوة والطاقة العضلية',
                        'تحسين الأداء الرياضي',
                        'تسريع التعافي العضلي',
                        'زيادة حجم العضلات',
                        'سهل الذوبان في الماء',
                        'مختبر علمياً ومضمون الجودة'
                    ],
                    image: 'images/criatine4.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    },
                    usage: 'يُخلط 5 جرام (مكيال واحد) مع 200-250 مل من الماء أو العصير. يُتناول مرة واحدة يومياً، ويُفضل بعد التمرين مباشرة.',
                    nutritionPer5g: {
                        creatineMonohydrate: 5,
                        additives: 0,
                        artificialFlavors: 0,
                        sugar: 0
                    }
                },
                {
                    id: '10',
                    name: 'Marvelous Creatine - كرياتين مارفيلوس',
                    description: 'كرياتين مونوهيدرات 100% مايكرونايزد من مارفيلوس - 300 جرام، 60 حصة، تركيبة متطورة لزيادة القوة والأداء',
                    category: 'كرياتين',
                    currentPrice: 1100,
                    originalPrice: 1200,
                    discount: 8,
                    features: [
                        'كرياتين مونوهيدرات 100% مايكرونايزد',
                        'الوزن: 300 جرام',
                        'عدد الحصص: 60 حصة',
                        '5 جرام لكل حصة',
                        'تركيبة مارفيلوس المتطورة',
                        'سريع الامتصاص والذوبان',
                        'زيادة القوة والطاقة العضلية',
                        'تحسين الأداء الرياضي',
                        'تسريع التعافي العضلي',
                        'زيادة حجم العضلات وامتلائها',
                        'خالي من المواد المضافة الضارة',
                        'مختبر علمياً ومضمون الجودة'
                    ],
                    image: 'images/criatine5.jpg',
                    inStock: true,
                    shipping: {
                        available: true,
                        cost: 30,
                        estimatedDays: '2-3 أيام'
                    },
                    usage: 'يُخلط 5 جرام مع 200-250 مل من الماء أو العصير. يُتناول مرة واحدة يومياً، ويُفضل بعد التمرين مباشرة.',
                    nutritionPer5g: {
                        creatineMonohydrate: 5,
                        additives: 0,
                        artificialFlavors: 0,
                        sugar: 0
                    }
                },

                {
                    id: '6',
                    name: 'Gainer Pro - نيتريفرسم',
                    description: 'مكمل زيادة الوزن والكتلة العضلية عالي البروتين والكربوهيدرات للرياضيين الذين يسعون لزيادة الحجم والكتلة',
                    category: 'ماسجنر',
                    currentPrice: 750,
                    originalPrice: 850,
                    discount: 12,
                    features: [
                        'مصمم خصيصاً لزيادة الوزن والكتلة العضلية',
                        'يحتوي على 60 جرام بروتين عالي الجودة لكل حصة',
                        'كربوهيدرات مركبة للطاقة المستدامة',
                        'يحتوي على 1250 سعرة حرارية لكل حصة',
                        'مدعوم بالفيتامينات والمعادن الأساسية',
                        'يساعد على زيادة حجم العضلات والوزن',
                        'سهل الهضم والامتصاص',
                        'خالي من السكريات المضافة الضارة',
                        'مناسب للرياضيين والمبتدئين'
                    ],
                    sizes: [
                        { name: '1 كيلو', id: '1kg', price: 750, available: true },
                        { name: 'شكارة كاملة (5 كيلو)', id: '5kg', price: 3500, available: true }
                    ],
                    selectedSize: '1kg',
                    flavors: [
                        { name: 'فانيليا', id: 'vanilla', available: true },
                        { name: 'شوكولاتة', id: 'chocolate', available: true },
                        { name: 'فراولة', id: 'strawberry', available: true }
                    ],
                    selectedFlavor: 'vanilla',
                    image: 'images/gainerpro.png',
                    inStock: true,
                    usage: 'يُخلط 300 جرام (حوالي 4 مكاييل) مع 500-600 مل من الماء أو الحليب. يُتناول 1-2 مرة يومياً بين الوجبات أو بعد التمرين.',
                    nutritionPer100g: {
                        calories: 400,
                        protein: 20,
                        carbs: 65,
                        fats: 6,
                        fiber: 2,
                        sugar: 8
                    },
                    shipping: {
                        available: true,
                        cost: 35,
                        estimatedDays: '2-3 أيام'
                    }
                }
            ];

            // Global variables
            let currentProduct = null;

            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            let activeFilter = 'all';
            let filteredProducts = [...products];

            // Format price function
            function formatPrice(price) {
                return new Intl.NumberFormat('ar-EG', {
                    style: 'currency',
                    currency: 'EGP',
                    minimumFractionDigits: 0
                }).format(price).replace('EGP', 'جنيه');
            }

            // Get product icon
            function getProductIcon(category) {
                switch (category.toLowerCase()) {
                    case 'تدريب القوة':
                        return 'fas fa-dumbbell';
                    case 'معدات الكارديو':
                        return 'fas fa-running';
                    case 'المكملات الغذائية':
                        return 'fas fa-pills';
                    case 'إكسسوارات اللياقة':
                        return 'fas fa-weight-hanging';
                    default:
                        return 'fas fa-box';
                }
            }

            // Render products
            function renderProducts() {
                const grid = document.getElementById('products-grid');

                if (filteredProducts.length === 0) {
                    grid.innerHTML = `
                        <div class="no-results">
                            <i class="fas fa-search"></i>
                            <h3>لا توجد منتجات</h3>
                            <p>جرب تعديل مصطلحات البحث أو تصفح الفئات</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = filteredProducts.map(product => `
                    <div class="product-card" onclick="openModal('${product.id}')">
                        <div class="product-image">
                            ${product.image ? 
                                `<img src="${product.image}" alt="${product.name}" style="width: 100%; height: 100%; object-fit: contain; object-position: center;">` : 
                                `<i class="${getProductIcon(product.category)} product-placeholder"></i>`
                            }
                            <div class="discount-badge">
                                -${product.discount}%
                            </div>
                            <button class="favorite-btn ${favorites.includes(product.id) ? 'favorited' : ''}" onclick="event.stopPropagation(); toggleFavorite('${product.id}')" aria-label="إضافة للمفضلة">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>

                        <div class="product-info">
                            <h3 class="product-name">${product.name}</h3>
                            <p class="product-description">${product.description}</p>

                            <div class="product-pricing">
                                <div class="price-discount-badge">${product.customDiscountText || '100 جنيه خصم'}</div>
                                <span class="original-price">${formatPrice(product.originalPrice)}</span>
                                <span class="current-price">${formatPrice(product.currentPrice)}</span>
                            </div>


                        </div>
                    </div>
                `).join('');
            }

            // Comprehensive search data structure
            const searchData = {
                gymSchedules: {
                    title: "مواعيد الجيم",
                    content: [
                        "مواعيد الرجال: جميع الأوقات عدا أوقات السيدات",
                        "مواعيد النساء: السبت الاثنين الأربعاء من 3 عصراً إلى 8 مساءً",
                        "تدريب الأطفال الإناث: السبت الاثنين الأربعاء من 3:00 مساءً حتى 5:00 مساءً"
                    ],
                    keywords: ["مواعيد", "ساعات", "وقت", "رجال", "نساء", "أطفال", "جدول", "تدريب", "موعد", "ساعة", "امتى", "ايه", "مت", "وا", "سا", "مو", "تد", "رج", "نس"]
                },
                pricing: {
                    title: "الأسعار والاشتراكات",
                    content: [
                        "الاشتراك الشهري: 200 جنيه",
                        "الاشتراك الشهري للطلاب: 150 جنيه",
                        "الاشتراك السنوي: 2000 جنيه",
                        "اشتراك المدربين الشخصيين: 300 جنيه شهرياً",
                        "تدريب الأطفال: الاشتراك يومي فقط",
                        "خصومات خاصة للعائلات والمجموعات"
                    ],
                    keywords: ["اشتراك", "أسعار", "سعر", "تكلفة", "رسوم", "طلاب", "سنوي", "شهري", "يومي", "مدربين", "فلوس", "كام", "ثمن", "اش", "اس", "سع", "تك", "فل", "كا", "ثم"]
                },
                aboutPopeye: {
                    title: "حول Popeye Gym",
                    content: [
                        "\"باباي جيم\" - المكان المثالي لتحقيق أهدافك الرياضية",
                        "الجيم مخصص للرجال والسيدات بأوقات منفصلة، لضمان خصوصيتكم وراحتكم",
                        "نحن هنا لاستقبالكم بأفضل الخدمات الرياضية التي تليق بكم جميعًا",
                        "نساعدك على التدرب بذكاء وأمان وبأسلوب صحي لتحقيق النتائج التي تحلم بها",
                        "وذلك بفضل خبرتنا وتفانينا في تقديم تجربة تدريبية مميزة",
                        "الموقع: الجماليه - خلف مطعم شيخ الحاره",
                        "واتساب: 01555037364",
                        "انستجرام: @popeyegym___",
                        "فيسبوك: Popeye Gym",
                        "معدات حديثة ومتطورة للتدريب",
                        "مكملات غذائية عالية الجودة",
                        "مدربين محترفين ومؤهلين"
                    ],
                    keywords: ["popeye", "بوباي", "جيم", "نادي", "لياقة", "عضلات", "تدريب", "معدات", "موقع", "عنوان", "تواصل", "حول", "عن", "ايه", "مين", "فين", "po", "بو", "جي", "نا", "لي", "عض", "مع", "مو", "عن", "تو", "حو"]
                },
                warnings: {
                    title: "تنبيهات وقوانين الجيم",
                    content: [
                        "الفئة العمرية للأطفال: 9 إلى 14 سنة",
                        "يمنع دخول أي مرافق داخل الجيم",
                        "الالتزام بالمواعيد المحددة إجباري",
                        "يجب الحفاظ على نظافة الأجهزة",
                        "ممنوع التصوير داخل الجيم",
                        "يجب ارتداء ملابس رياضية مناسبة"
                    ],
                    keywords: ["تنبيهات", "قوانين", "قواعد", "ممنوع", "مطلوب", "يجب", "لا يجوز"]
                }
            };

            // البحث الشامل الجديد - يفتح نافذة Popeye مباشرة
            function performComprehensiveSearch() {
                const searchInput = document.getElementById('search-input') || document.getElementById('compact-search-input');
                if (!searchInput) {
                    console.log('Search input not found');
                    return;
                }
                const searchTerm = searchInput.value.toLowerCase().trim();

                if (!searchTerm) {
                    // إذا لم يكن هناك نص بحث، أظهر جميع المنتجات
                    filteredProducts = [...products];
                    renderProducts();
                    return;
                }

                // البحث في المنتجات
                filteredProducts = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm) ||
                    product.features.some(feature => feature.toLowerCase().includes(searchTerm))
                );

                renderProducts();

                // فتح نافذة Popeye مباشرة عند أي بحث
                if (searchTerm.length >= 2) {
                    setTimeout(() => {
                        showPopeyeInfo();
                    }, 300);
                }
            }





            // Toggle navigation dropdowns
            function toggleNavDropdown(element) {
                const dropdown = element.parentElement;
                const isActive = dropdown.classList.contains('active');

                // Close all other dropdowns
                document.querySelectorAll('.nav-dropdown.active').forEach(d => {
                    if (d !== dropdown) {
                        d.classList.remove('active');
                    }
                });

                // Toggle current dropdown
                if (isActive) {
                    dropdown.classList.remove('active');
                } else {
                    dropdown.classList.add('active');
                }
            }

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(event) {
                // Close nav dropdowns when clicking outside
                if (!event.target.closest('.nav-dropdown')) {
                    document.querySelectorAll('.nav-dropdown.active').forEach(d => {
                        d.classList.remove('active');
                    });
                }
            });

            // Track location button click
            function trackLocationClick() {
                console.log('تم النقر على زر الموقع - توجيه المستخدم إلى خرائط جوجل');

                // إضافة تأثير بصري عند النقر
                const locationBtn = document.querySelector('.premium-location-btn');
                if (locationBtn) {
                    locationBtn.style.transform = 'translateY(-1px) scale(0.98)';
                    setTimeout(() => {
                        locationBtn.style.transform = '';
                    }, 150);
                }
            }

            // إزالة وظيفة البحث القديمة والاعتماد على البحث الشامل فقط
            function performSearch() {
                // تم إلغاء هذه الوظيفة - استخدم performComprehensiveSearch بدلاً منها
                performComprehensiveSearch();
            }



            // Show ultra modern calories calculator
            function showUltraCaloriesCalculator() {
                const caloriesModal = document.getElementById('ultra-calories-modal');
                if (caloriesModal) {
                    caloriesModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';

                    // Reset to input page
                    const ultraInputPage = document.getElementById('ultraInputPage');
                    const ultraResultsPage = document.getElementById('ultraResultsPage');
                    if (ultraInputPage) ultraInputPage.classList.add('active');
                    if (ultraResultsPage) ultraResultsPage.classList.remove('active');
                }
            }

            // Close ultra calories calculator
            function closeUltraCaloriesModal() {
                const caloriesModal = document.getElementById('ultra-calories-modal');
                if (caloriesModal) {
                    caloriesModal.classList.add('hidden');
                    document.body.style.overflow = 'unset';
                }
            }

            // Navigate to results page
            function backToUltraInput() {
                const ultraInputPage = document.getElementById('ultraInputPage');
                const ultraResultsPage = document.getElementById('ultraResultsPage');
                if (ultraInputPage) ultraInputPage.classList.add('active');
                if (ultraResultsPage) ultraResultsPage.classList.remove('active');
            }

            // Share Ultra calculator function
            function shareUltraCalculator() {
                const shareData = {
                    title: 'حاسبة السعرات والبروتين المتطورة - Popeye Gym',
                    text: `🔥 احسب السعرات والبروتين اللازمة لجسمك مع حاسبة Popeye Gym المتطورة!

  🎯 مميزات الحاسبة:
  • حساب دقيق للسعرات الحرارية اليومية
  • توزيع مثالي للبروتين والكربوهيدرات والدهون
  • مؤشر كتلة الجسم (BMI)
  • نتائج مخصصة حسب مستوى نشاطك وهدفك

  💪 مع Popeye Gym

  📍 الموقع: الجماليه - خلف مطعم شيخ الحاره
  📱 واتساب: 01555037364`,
                    url: window.location.origin + window.location.pathname + '?showCalculator=true'
                };

                if (navigator.share) {
                    navigator.share(shareData).then(() => {
                        console.log('تم مشاركة الحاسبة بنجاح');
                    }).catch((error) => {
                        console.log('فشلت المشاركة:', error);
                        fallbackShareCalculator(shareData);
                    });
                } else {
                    fallbackShareCalculator(shareData);
                }
            }

            // Fallback share function for calculator
            function fallbackShareCalculator(shareData) {
                const shareText = `${shareData.text}\n\n🌐 ${shareData.url}`;

                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareText).then(() => {
                        showCalculatorShareSuccess();
                    }).catch(() => {
                        manualCopyCalculator(shareText);
                    });
                } else {
                    manualCopyCalculator(shareText);
                }
            }

            // Manual copy function for calculator
            function manualCopyCalculator(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();

                try {
                    document.execCommand('copy');
                    showCalculatorShareSuccess();
                } catch (err) {
                    console.error('فشل النسخ اليدوي:', err);
                    alert('عذراً، لم نتمكن من نسخ النص. يرجى المحاولة مرة أخرى.');
                }

                document.body.removeChild(textArea);
            }

            // Show success message for calculator share
            function showCalculatorShareSuccess() {
                // Create a beautiful success notification
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #dc3545, #c82333);
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 15px;
                    box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
                    z-index: 10000;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 0.8rem;
                    animation: slideInRight 0.5s ease-out;
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                `;

                notification.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.2rem; color: white;"></i>
                    <span>تم نسخ رابط الحاسبة بنجاح!</span>
                `;

                document.body.appendChild(notification);

                // Remove notification after 3 seconds
                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.5s ease-in forwards';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 500);
                }, 3000);
            }

            // Calculate ultra calories and macros
            function calculateUltraCalories() {
                // Check if all required elements exist
                const ageElement = document.getElementById('ultra-age');
                const genderElement = document.getElementById('ultra-gender');
                const weightElement = document.getElementById('ultra-weight');
                const heightElement = document.getElementById('ultra-height');
                const activityElement = document.getElementById('ultra-activity');
                const goalElement = document.getElementById('ultra-goal');
                const bodyFatElement = document.getElementById('ultra-body-fat');
                const experienceElement = document.getElementById('ultra-experience');

                if (!ageElement || !genderElement || !weightElement || !heightElement || !activityElement || !goalElement) {
                    console.log('Calculator elements not found');
                    return;
                }

                // Get input values
                const age = parseInt(ageElement.value);
                const gender = genderElement.value;
                const weight = parseFloat(weightElement.value);
                const height = parseInt(heightElement.value);
                const activity = activityElement.value;
                const goal = goalElement.value;
                const bodyFat = bodyFatElement ? parseFloat(bodyFatElement.value) || null : null;
                const experience = experienceElement ? experienceElement.value : null;

                // Validation
                if (!age || !weight || !height) {
                    showValidationWarning('يرجى ملء جميع الحقول المطلوبة لحساب احتياجاتك من الطاقة بدقة');
                    return;
                }

                if (age < 10 || age > 100) {
                    showValidationWarning('يرجى إدخال عمر صحيح (10-100 سنة)');
                    return;
                }

                if (weight < 20 || weight > 300) {
                    showValidationWarning('يرجى إدخال وزن صحيح (20-300 كيلوغرام)');
                    return;
                }

                if (height < 100 || height > 250) {
                    showValidationWarning('يرجى إدخال طول صحيح (100-250 سم)');
                    return;
                }

                // Calculate BMR using Mifflin-St Jeor Equation
                let bmr;
                if (gender === 'male') {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                } else {
                    bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                }

                // Apply activity factor
                const activityFactors = {
                    sedentary: 1.2,
                    light: 1.375,
                    moderate: 1.55,
                    active: 1.725,
                    very_active: 1.9
                };

                let tdee = bmr * activityFactors[activity];

                // Apply goal adjustment
                switch (goal) {
                    case 'lose':
                        tdee *= 0.8; // 20% deficit for fat loss
                        break;
                    case 'gain':
                        tdee *= 1.15; // 15% surplus for muscle gain
                        break;
                    // maintain stays the same
                }

                // Calculate macros based on experience and goal
                let proteinPerKg, carbPercentage, fatPercentage;

                switch (experience) {
                    case 'beginner':
                        proteinPerKg = goal === 'gain' ? 1.6 : 1.4;
                        carbPercentage = goal === 'lose' ? 0.35 : 0.45;
                        break;
                    case 'intermediate':
                        proteinPerKg = goal === 'gain' ? 1.8 : 1.6;
                        carbPercentage = goal === 'lose' ? 0.30 : 0.40;
                        break;
                    case 'advanced':
                        proteinPerKg = goal === 'gain' ? 2.0 : 1.8;
                        carbPercentage = goal === 'lose' ? 0.25 : 0.35;
                        break;
                }

                // Calculate macros
                const protein = Math.round(weight * proteinPerKg);
                const proteinCalories = protein * 4;

                const carbCalories = Math.round(tdee * carbPercentage);
                const carbs = Math.round(carbCalories / 4);

                const remainingCalories = tdee - proteinCalories - carbCalories;
                const fats = Math.round(remainingCalories / 9);

                // Calculate BMI
                const bmi = (weight / ((height / 100) ** 2)).toFixed(1);



                // Display results
                document.getElementById('ultra-calories-result').textContent = Math.round(tdee);
                document.getElementById('ultra-protein-result').textContent = protein;
                document.getElementById('ultra-carbs-result').textContent = carbs;
                document.getElementById('ultra-fats-result').textContent = fats;

                document.getElementById('ultra-bmi-result').textContent = bmi;

                // Switch to results page
                const ultraInputPage = document.getElementById('ultraInputPage');
                const ultraResultsPage = document.getElementById('ultraResultsPage');
                if (ultraInputPage) ultraInputPage.classList.remove('active');
                if (ultraResultsPage) ultraResultsPage.classList.add('active');

                window.ultraResults = {
                    calories: Math.round(tdee),
                    protein: protein,
                    carbs: carbs,
                    fats: fats,
                    bmi: bmi,
                    age: age,
                    gender: gender === 'male' ? 'ذكر' : 'أنثى',
                    weight: weight,
                    height: height,
                    goal: goal === 'lose' ? 'فقدان الوزن' : goal === 'gain' ? 'زيادة الوزن' : 'الحفاظ على الوزن',
                    activity: document.getElementById('ultra-activity').options[document.getElementById('ultra-activity').selectedIndex].text
                };
            }



            // Show report modal
            function showReportModal() {
                const reportModal = document.getElementById('report-modal');
                reportModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            // Show developer info - opens external link
            function showDeveloperInfo() {
                window.location.href = 'https://ahmedmehleb1.github.io/1/';
            }

            // Show Popeye info modal
            function showPopeyeInfo() {
                showPopeyeSection('about');
            }

            // Open Popeye modal with specific section
            function openPopeyeModal(section = 'about') {
                showPopeyeSection(section);
            }

            // Show specific Popeye section
            function showPopeyeSection(section) {
                const popeyeModal = document.getElementById('popeye-modal');
                const modalBody = document.querySelector('.popeye-modal-body');

                // Generate content based on section
                let content = '';
                let title = '';

                switch(section) {
                    case 'pricing':
                        title = 'أسعار الاشتراكات';
                        content = generatePricingContent();
                        break;
                    case 'schedules':
                        title = 'مواعيد الجيم';
                        content = generateSchedulesContent();
                        break;
                    case 'men-schedule':
                        title = 'مواعيد الرجال';
                        content = generateMenScheduleContent();
                        break;
                    case 'women-schedule':
                        title = 'مواعيد النساء';
                        content = generateWomenScheduleContent();
                        break;
                    case 'kids':
                        title = 'مواعيد الأطفال الإناث';
                        content = generateKidsContent();
                        break;
                    case 'about':
                    default:
                        title = 'حول Popeye Gym';
                        content = generateAboutContent();
                        break;
                }

                // Update modal title
                document.querySelector('.popeye-header-title').textContent = title;

                // Update modal body content
                modalBody.innerHTML = content;

                // Show modal
                popeyeModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            // Generate pricing content
            function generatePricingContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Membership Pricing -->
                    <div class="popeye-pricing-section">
                        <!-- Men's Membership -->
                        <div class="popeye-pricing-card men-card">
                            <div class="pricing-card-header">
                                <div class="pricing-icon">
                                    <i class="fas fa-mars"></i>
                                </div>
                                <h3 class="pricing-title">اشتراك الرجال</h3>
                            </div>
                            <div class="pricing-content">
                                <div class="pricing-item">
                                    <span class="pricing-label">يومي:</span>
                                    <span class="pricing-value">30 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهر:</span>
                                    <span class="pricing-value">350 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهرين:</span>
                                    <span class="pricing-value">650 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">3 شهور:</span>
                                    <span class="pricing-value">950 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">20 حصة:</span>
                                    <span class="pricing-value">400 جنيه</span>
                                </div>
                            </div>
                        </div>

                        <!-- Women's Membership -->
                        <div class="popeye-pricing-card women-card">
                            <div class="pricing-card-header">
                                <div class="pricing-icon">
                                    <i class="fas fa-venus"></i>
                                </div>
                                <h3 class="pricing-title">اشتراك النساء</h3>
                            </div>
                            <div class="pricing-content">
                                <div class="pricing-item">
                                    <span class="pricing-label">يومي:</span>
                                    <span class="pricing-value">30 جنيه</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهر:</span>
                                    <span class="pricing-value">250 جنيه</span>
                                    <span class="pricing-bonus">3 أيام في الأسبوع</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">شهرين:</span>
                                    <span class="pricing-value">450 جنيه</span>
                                    <span class="pricing-bonus">3 أيام في الأسبوع</span>
                                </div>
                                <div class="pricing-item">
                                    <span class="pricing-label">20 حصة:</span>
                                    <span class="pricing-value">400 جنيه</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Generate schedules content
            function generateSchedulesContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Training Schedule -->
                    <div class="popeye-schedule-section">
                        <div class="section-header">
                            <div class="header-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 class="section-title">مواعيد التدريب</h3>
                        </div>

                        <div class="schedule-cards">
                            <!-- Men's Schedule -->
                            <div class="schedule-card men-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-mars"></i>
                                    <h4>مواعيد الرجال</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">جميع الأيام</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">جميع الأوقات عدا أوقات السيدات</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Women's Schedule -->
                            <div class="schedule-card women-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-venus"></i>
                                    <h4>مواعيد النساء</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">السبت - الاثنين - الأربعاء</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">من 3 عصراً : 8 مساءً</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Generate kids content
            function generateKidsContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>

                    </div>

                    <!-- Kids Training -->
                    <div class="popeye-kids-section">
                        <div class="kids-card">
                            <div class="kids-header">
                                <div class="kids-icon">
                                    <i class="fas fa-child"></i>
                                </div>
                                <h3 class="kids-title">تدريب الأطفال الإناث</h3>
                            </div>
                            <div class="kids-content">
                                <div class="kids-info">
                                    <div class="kids-days">السبت - الاثنين - الأربعاء</div>
                                    <div class="kids-time">من 3:00 مساءً حتى 5:00 مساءً</div>
                                    <div class="kids-note">الاشتراك يومي فقط</div>
                                </div>
                                <div class="kids-warnings">
                                    <div class="warning-header">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span>تنبيهات مهمة</span>
                                    </div>
                                    <ul class="warning-list">
                                        <li>الفئة العمرية المسموحة: 9 إلى 14 سنة</li>
                                        <li>يمنع دخول أي مرافق داخل الجيم</li>
                                        <li>الالتزام بالمواعيد المحددة إجباري</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Generate men's schedule content
            function generateMenScheduleContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Men's Training Schedule -->
                    <div class="popeye-schedule-section">
                        <div class="section-header">
                            <div class="header-icon">
                                <i class="fas fa-mars"></i>
                            </div>
                            <h3 class="section-title">مواعيد الرجال</h3>
                        </div>

                        <div class="schedule-cards">
                            <!-- Men's Schedule -->
                            <div class="schedule-card men-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-mars"></i>
                                    <h4>مواعيد الرجال</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">جميع الأيام</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">جميع الأوقات عدا أوقات السيدات</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Generate women's schedule content
            function generateWomenScheduleContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Women's Training Schedule -->
                    <div class="popeye-schedule-section">
                        <div class="section-header">
                            <div class="header-icon">
                                <i class="fas fa-venus"></i>
                            </div>
                            <h3 class="section-title">مواعيد النساء</h3>
                        </div>

                        <div class="schedule-cards">
                            <!-- Women's Schedule -->
                            <div class="schedule-card women-schedule">
                                <div class="schedule-card-header">
                                    <i class="fas fa-venus"></i>
                                    <h4>مواعيد النساء</h4>
                                </div>
                                <div class="schedule-content">
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">السبت - الاثنين - الأربعاء</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">من 3 عصراً : 8 مساءً</div>
                                        </div>
                                    </div>
                                    <div class="schedule-day-group">
                                        <div class="schedule-days">الأحد - الثلاثاء - الخميس</div>
                                        <div class="schedule-times">
                                            <div class="time-slot">من 10 صباحاً : 1 ظهراً</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Generate about content
            function generateAboutContent() {
                return `
                    <!-- Main Logo Section -->
                    <div class="popeye-main-logo-section">
                        <div class="popeye-main-logo">
                            <img src="images/logo.png" alt="Popeye Gym" class="popeye-main-logo-img">
                        </div>
                        <h2 class="popeye-gym-title">POPEYE GYM</h2>
                    </div>

                    <!-- Contact Section -->
                    <div class="popeye-contact-section">
                        <div class="contact-header">
                            <div class="contact-logo">
                                <img src="images/logo.png" alt="Popeye Gym">
                            </div>
                            <h3 class="contact-title">تواصل معنا</h3>
                        </div>
                        <div class="contact-links">
                            <a href="https://wa.me/01555037364" target="_blank" class="contact-link whatsapp-link">
                                <div class="contact-icon">
                                    <i class="fab fa-whatsapp"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">واتساب</span>
                                    <span class="contact-value">01555037364</span>
                                </div>
                            </a>
                            <a href="https://www.instagram.com/popeyegym___?igsh=MTdtc3J5cmNpYWU3Zg==" target="_blank" class="contact-link instagram-link">
                            <a href="https://vt.tiktok.com/ZSB7Ape5Q/" target="_blank" class="contact-link tiktok-link">
                                <div class="contact-icon">
                                    <i class="fab fa-tiktok"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">تيك توك</span>
                                    <span class="contact-value">@popeyegym</span>
                                </div>
                            </a>
                                <div class="contact-icon">
                                    <i class="fab fa-instagram"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">انستجرام</span>
                                    <span class="contact-value">@popeyegym___</span>
                                </div>
                            </a>
                            <a href="https://www.facebook.com/share/1Lh1ngiXdT/" target="_blank" class="contact-link facebook-link">
                                <div class="contact-icon">
                                    <i class="fab fa-facebook"></i>
                                </div>
                                <div class="contact-info">
                                    <span class="contact-label">فيسبوك</span>
                                    <span class="contact-value">Popeye Gym</span>
                                </div>
                            </a>
                        </div>
                        <div class="location-info">
                            <div class="location-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <span class="location-text">الجماليه - خلف مطعم شيخ الحاره</span>
                        </div>
                    </div>
                `;
            }



            // Scroll to specific section within the modal
            function scrollToSection(section) {
                const modalBody = document.querySelector('.popeye-modal-body');
                let targetElement;

                switch(section) {
                    case 'schedules':
                        targetElement = document.querySelector('.popeye-schedule-section');
                        break;
                    case 'pricing':
                        targetElement = document.querySelector('.popeye-pricing-section');
                        break;
                    case 'women':
                        targetElement = document.querySelector('.women-schedule');
                        break;
                    case 'kids':
                        targetElement = document.querySelector('.popeye-kids-section');
                        break;
                    case 'about':
                    default:
                        targetElement = document.querySelector('.popeye-main-logo-section');
                        break;
                }

                if (targetElement) {
                    // Add highlight effect
                    targetElement.style.transition = 'all 0.5s ease';
                    targetElement.style.transform = 'scale(1.02)';
                    targetElement.style.boxShadow = '0 0 30px rgba(220, 53, 69, 0.3)';

                    // Scroll to the element
                    targetElement.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });

                    // Remove highlight after animation
                    setTimeout(() => {
                        targetElement.style.transform = 'scale(1)';
                        targetElement.style.boxShadow = '';
                    }, 1000);
                }
            }

            // Close Popeye modal
            function closePopeyeModal() {
                const popeyeModal = document.getElementById('popeye-modal');
                popeyeModal.classList.add('hidden');
                document.body.style.overflow = 'unset';
            }

            // Share Popeye Gym function with automatic modal opening
            function sharePopeyeGymNew() {
                const shareData = {
                    title: 'أسعار ومواعيد جيم باباي - Popeye Gym',
                    text: `💪 جيم باباي - معدات اللياقة البدنية والمكملات الغذائية

  💰 أسعار الاشتراك:
  • الرجال - شهري: 350 جنيه
  • النساء - شهري: 250 جنيه (3 أيام/أسبوع)
  • يومي: 30 جنيه

  ⏰ المواعيد:
  👨 الرجال: كل الأوقات عدا أوقات السيدات
  👩 النساء: السبت/الاثنين/الأربعاء (3ع-8م) - الأحد/الثلاثاء/الخميس (10ص-1ظ)

  📍 الموقع: الجماليه - خلف مطعم شيخ الحاره
  📱 واتساب: 01555037364`,
                    url: window.location.origin + window.location.pathname + '?showPopeyeInfo=true'
                };

                if (navigator.share) {
                    navigator.share(shareData).then(() => {
                        console.log('تم مشاركة معلومات الجيم بنجاح');
                    }).catch((error) => {
                        console.log('فشلت المشاركة:', error);
                        fallbackSharePopeye(shareData);
                    });
                } else {
                    fallbackSharePopeye(shareData);
                }
            }

            // Fallback share function for Popeye info
            function fallbackSharePopeye(shareData) {
                const shareText = `${shareData.text}\n\n🌐 ${shareData.url}`;

                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareText).then(() => {
                        showPopeyeShareSuccess();
                    }).catch(() => {
                        manualCopyPopeye(shareText);
                    });
                } else {
                    manualCopyPopeye(shareText);
                }
            }

            // Manual copy function for Popeye info
            function manualCopyPopeye(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();

                try {
                    document.execCommand('copy');
                    showPopeyeShareSuccess();
                } catch (err) {
                    console.error('فشل النسخ اليدوي:', err);
                    alert('عذراً، لم نتمكن من نسخ النص. يرجى المحاولة مرة أخرى.');
                }

                document.body.removeChild(textArea);
            }

            // Show success message for Popeye share
            function showPopeyeShareSuccess() {
                // Create a beautiful success notification
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #dc3545, #c82333);
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 15px;
                    box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
                    z-index: 10000;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 0.8rem;
                    animation: slideInRight 0.5s ease-out;
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                `;

                notification.innerHTML = `
                    <i class="fas fa-check-circle" style="font-size: 1.2rem; color: white;"></i>
                    <span>تم نسخ رابط معلومات الجيم بنجاح!</span>
                `;

                document.body.appendChild(notification);

                // Remove notification after 3 seconds
                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.5s ease-in forwards';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 500);
                }, 3000);
            }

            // Toggle favorite
            function toggleFavorite(productId) {
                const index = favorites.indexOf(productId);
                if (index > -1) {
                    favorites.splice(index, 1);
                } else {
                    favorites.push(productId);
                }

                localStorage.setItem('favorites', JSON.stringify(favorites));

                // Re-render if currently showing favorites
                if (activeFilter === 'favorites') {
                    applyFilters();
                } else {
                    renderProducts();
                }
            }

            // Filter by category
            function filterByCategory(category) {
                activeFilter = category;

                // Update active button
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));

                // البحث عن الزر الذي تم النقر عليه وإضافة فئة active
                const clickedButton = event ? event.target.closest('.filter-btn') : document.querySelector(`[onclick*="${category}"]`);
                if (clickedButton) {
                    clickedButton.classList.add('active');
                }

                applyFilters();
            }

            // Apply filters based on search and category
            function applyFilters() {
                const searchInput = document.getElementById('search-input') || document.getElementById('compact-search-input');
                const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
                let productsToFilter = [...products];

                // Apply category filter
                if (activeFilter === 'favorites') {
                    productsToFilter = products.filter(product => favorites.includes(product.id));
                } else if (activeFilter !== 'all') {
                    productsToFilter = products.filter(product => {
                        // البحث الأساسي في فئة المنتج
                        if (product.category.toLowerCase() === activeFilter.toLowerCase()) {
                            return true;
                        }

                        // البحث المتقدم في النص
                        const productName = product.name.toLowerCase();
                        const productDesc = product.description.toLowerCase();
                        const category = activeFilter.toLowerCase();

                        return productName.includes(category) || 
                               productDesc.includes(category) ||
                               product.features.some(feature => feature.toLowerCase().includes(category));
                    });
                }

                // Apply search filter
                if (searchTerm.trim()) {
                    productsToFilter = productsToFilter.filter(product => 
                        product.name.toLowerCase().includes(searchTerm) ||
                        product.description.toLowerCase().includes(searchTerm) ||
                        product.category.toLowerCase().includes(searchTerm) ||
                        product.features.some(feature => feature.toLowerCase().includes(searchTerm))
                    );
                }

                filteredProducts = productsToFilter;
                renderProducts();
            }



            // Close calories modal
            function closeCaloriesModal() {
                const caloriesModal = document.getElementById('calories-modal');
                caloriesModal.classList.add('hidden');
                document.body.style.overflow = 'unset';
            }

            // Close report modal
            function closeReportModal() {
                const reportModal = document.getElementById('report-modal');
                reportModal.classList.add('hidden');
                document.body.style.overflow = 'unset';
            }

            // Calculate calories and nutrition
            function calculateCalories() {
                const age = parseInt(document.getElementById('age').value);
                const gender = document.getElementById('gender').value;
                const weight = parseFloat(document.getElementById('weight').value);
                const height = parseFloat(document.getElementById('height').value);
                const activity = document.getElementById('activity').value;
                const goal = document.getElementById('goal').value;
                const bodyFat = parseFloat(document.getElementById('body-fat').value) || null;
                const experience = document.getElementById('experience').value;

                if (!age || !weight || !height || !activity || !goal || !experience) {
                    showValidationWarning('يرجى ملء جميع الحقول المطلوبة لحساب السعرات الحرارية بدقة');
                    return;
                }

                // Calculate BMR using multiple formulas for accuracy
                let bmr;
                if (bodyFat) {
                    // Katch-McArdle formula (more accurate with body fat)
                    const leanBodyMass = weight * (1 - (bodyFat / 100));
                    bmr = 370 + (21.6 * leanBodyMass);
                } else {
                    // Mifflin-St Jeor equation (more accurate than Harris-Benedict)
                    if (gender === 'male') {
                        bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
                    } else {
                        bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
                    }
                }

                // Calculate TDEE based on activity level
                const activityFactors = {
                    sedentary: 1.2,
                    light: 1.375,
                    moderate: 1.55,
                    active: 1.725,
                    very_active: 1.9
                };
                const tdee = bmr * activityFactors[activity];

                // Calculate calories based on goal and experience
                let calories;
                let calorieAdjustment = 0;

                if (goal === 'lose') {
                    calorieAdjustment = experience === 'beginner' ? -300 : 
                                       experience === 'intermediate' ? -400 : -500;
                } else if (goal === 'gain') {
                    calorieAdjustment = experience === 'beginner' ? 300 : 
                                       experience === 'intermediate' ? 400 : 500;
                }

                calories = tdee + calorieAdjustment;

                // Calculate macronutrients based on goal and experience
                let protein, fats, carbs;

                if (goal === 'gain') {
                    protein = weight * (experience === 'beginner' ? 1.8 : 
                                       experience === 'intermediate' ? 2.2 : 2.5);
                    fats = calories * 0.25 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                } else if (goal === 'lose') {
                    protein = weight * (experience === 'beginner' ? 2.0 : 
                                       experience === 'intermediate' ? 2.5 : 3.0);
                    fats = calories * 0.20 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                } else {
                    protein = weight * 2.0;
                    fats = calories * 0.25 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                }

                // Calculate additional metrics
                const bmi = weight / Math.pow(height / 100, 2);
                const idealWeight = gender === 'male' ? 
                    (height - 100) - ((height - 150) / 4) : 
                    (height - 100) - ((height - 150) / 2.5);
                const rmr = bmr * 0.9; // Resting Metabolic Rate
                const hourlyBurn = Math.round(tdee / 24);


                // Display main results
                document.getElementById('bmr-result').textContent = Math.round(bmr);
                document.getElementById('tdee-result').textContent = Math.round(tdee);
                document.getElementById('calories-result').textContent = Math.round(calories);
                document.getElementById('protein-result').textContent = Math.round(protein);
                document.getElementById('carbs-result').textContent = Math.round(carbs);
                document.getElementById('fats-result').textContent = Math.round(fats);


                // Update advanced metrics
                document.getElementById('bmi-result').textContent = bmi.toFixed(1);
                document.getElementById('ideal-weight-result').textContent = Math.round(idealWeight) + ' كجم';
                document.getElementById('rmr-result').textContent = Math.round(rmr);
                document.getElementById('hourly-burn-result').textContent = hourlyBurn;

                // Generate personalized tips
                generatePersonalizedTips(bmi, goal, experience, activity, age, gender);

                // Generate branded results image
                generateBrandedResultsImage({
                    calories: Math.round(calories),
                    protein: Math.round(protein),
                    carbs: Math.round(carbs),
                    fats: Math.round(fats),
                    bmr: Math.round(bmr),
                    tdee: Math.round(tdee),
                    bmi: bmi.toFixed(1),
                    goal: goal,
                    gender: gender,
                    age: age,
                    weight: weight
                });

                document.getElementById('results-section').classList.remove('hidden');
            }

            // Generate personalized tips based on user data
            function generatePersonalizedTips(bmi, goal, experience, activity, age, gender) {
                const tips = [];

                // BMI-based tips
                if (bmi < 18.5) {
                    tips.push('وزنك أقل من المعدل الطبيعي، ركز على زيادة السعرات الحرارية والبروتين');
                } else if (bmi > 25) {
                    tips.push('وزنك أعلى من المعدل الطبيعي، ركز على تقليل السعرات وزيادة النشاط');
                } else {
                    tips.push('وزنك في المعدل الطبيعي، حافظ على نظامك الغذائي المتوازن');
                }

                // Goal-based tips
                if (goal === 'lose') {
                    tips.push('لفقدان الوزن الصحي، اهدف لخسارة 0.5-1 كجم في الأسبوع');
                    tips.push('اشرب الماء قبل الوجبات لتقليل الشهية');
                } else if (goal === 'gain') {
                    tips.push('لزيادة الوزن الصحي، اهدف لزيادة 0.5 كجم في الأسبوع');
                    tips.push('تناول وجبات أكثر تكراراً وغنية بالبروتين');
                }

                // Experience-based tips
                if (experience === 'beginner') {
                    tips.push('كمبتدئ، ركز على تعلم الحركات الأساسية والاستمرارية');
                } else if (experience === 'advanced') {
                    tips.push('كمتقدم، يمكنك استخدام تقنيات التدريب المتقدمة');
                }

                // Activity-based tips
                if (activity === 'sedentary') {
                    tips.push('حاول المشي لمدة 30 دقيقة يومياً لتحسين صحتك');
                } else if (activity === 'very_active') {
                    tips.push('تأكد من الحصول على راحة كافية لتجنب الإجهاد');
                }

                // Age and gender-based tips
                if (age > 40) {
                    tips.push('بعد سن الأربعين، ركز على تمارين القوة للحفاظ على كتلة العضلات');
                }

                if (gender === 'female') {
                    tips.push('النساء يحتجن للحديد والكالسيوم أكثر، تأكدي من تناولهما');
                }

                // Update tips in HTML
                const tipsList = document.getElementById('personal-tips');
                tipsList.innerHTML = tips.map(tip => `<li>${tip}</li>`).join('');
            }

            // Add roundRect polyfill for older browsers
            function addRoundRectSupport(ctx) {
                if (!ctx.roundRect) {
                    ctx.roundRect = function(x, y, width, height, radius) {
                        this.beginPath();
                        this.moveTo(x + radius, y);
                        this.arcTo(x + width, y, x + width, y + height, radius);
                        this.arcTo(x + width, y + height, x, y + height, radius);
                        this.arcTo(x, y + height, x, y, radius);
                        this.arcTo(x, y, x + width, y, radius);
                        this.closePath();
                    };
                }
            }

            // Generate branded results image using HTML Canvas
            function generateBrandedResultsImage(data) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                // Add roundRect support
                addRoundRectSupport(ctx);

                // Set canvas size to match the template - optimized for social media
                canvas.width = 1080;
                canvas.height = 1350;

                // Load the template image
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = function() {
                    // Draw the template image as background
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                    // Add overlay for better text visibility
                    const overlay = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    overlay.addColorStop(0, 'rgba(0, 0, 0, 0.3)');
                    overlay.addColorStop(0.5, 'rgba(0, 0, 0, 0.6)');
                    overlay.addColorStop(1, 'rgba(0, 0, 0, 0.4)');
                    ctx.fillStyle = overlay;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // Set text properties for RTL Arabic text
                    ctx.textAlign = 'center';
                    ctx.direction = 'rtl';

                    // Main results container - modern glass effect
                    const contentY = 450;
                    const containerWidth = canvas.width - 120;
                    const containerHeight = 650;
                    const containerX = 60;

                    // Create glass morphism background
                    const glassBg = ctx.createLinearGradient(0, contentY, 0, contentY + containerHeight);
                    glassBg.addColorStop(0, 'rgba(255, 255, 255, 0.15)');
                    glassBg.addColorStop(0.5, 'rgba(255, 255, 255, 0.1)');
                    glassBg.addColorStop(1, 'rgba(255, 255, 255, 0.05)');

                    // Draw glass background with rounded corners
                    ctx.fillStyle = glassBg;
                    ctx.beginPath();
                    ctx.roundRect(containerX, contentY, containerWidth, containerHeight, 30);
                    ctx.fill();

                    // Add border with gym colors
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 4;
                    ctx.stroke();

                    // Inner glow effect
                    ctx.shadowColor = 'rgba(220, 53, 69, 0.5)';
                    ctx.shadowBlur = 20;
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    ctx.shadowBlur = 0;

                    // Title section with modern styling
                    let currentY = contentY + 80;
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 42px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('🏋️ نتائجك الشخصية 🏋️', canvas.width / 2, currentY);

                    currentY += 50;
                    ctx.font = 'bold 28px Arial';
                    ctx.fillStyle = '#ffd700';
                    ctx.fillText('حاسبة السعرات والبروتين المتطورة', canvas.width / 2, currentY);

                    // Modern results cards layout
                    currentY += 80;
                    const cardWidth = 420;
                    const cardHeight = 80;
                    const cardSpacing = 20;

                    // Create result cards with modern design
                    const results = [
                        { label: '🔥 السعرات اليومية', value: `${data.calories} كالوري`, color: '#ff6b6b' },
                        { label: '💪 البروتين', value: `${data.protein} جرام`, color: '#4ecdc4' },
                        { label: '🍞 الكربوهيدرات', value: `${data.carbs} جرام`, color: '#45b7d1' },
                        { label: '🥑 الدهون الصحية', value: `${data.fats} جرام`, color: '#f9ca24' },
                        { label: '📊 مؤشر كتلة الجسم', value: `${data.bmi}`, color: '#6c5ce7' }
                    ];

                    results.forEach((result, index) => {
                        const cardY = currentY + (index * (cardHeight + cardSpacing));
                        const cardX = (canvas.width - cardWidth) / 2;

                        // Card background with gradient
                        const cardGradient = ctx.createLinearGradient(cardX, cardY, cardX + cardWidth, cardY);
                        cardGradient.addColorStop(0, 'rgba(255, 255, 255, 0.2)');
                        cardGradient.addColorStop(1, 'rgba(255, 255, 255, 0.05)');

                        ctx.fillStyle = cardGradient;
                        ctx.beginPath();
                        ctx.roundRect(cardX, cardY, cardWidth, cardHeight, 15);
                        ctx.fill();

                        // Card border with accent color
                        ctx.strokeStyle = result.color;
                        ctx.lineWidth = 3;
                        ctx.stroke();

                        // Label text
                        ctx.fillStyle = '#ffffff';
                        ctx.font = 'bold 24px Arial';
                        ctx.textAlign = 'right';
                        ctx.fillText(result.label, cardX + cardWidth - 30, cardY + 30);

                        // Value text
                        ctx.fillStyle = result.color;
                        ctx.font = 'bold 28px Arial';
                        ctx.textAlign = 'right';
                        ctx.fillText(result.value, cardX + cardWidth - 30, cardY + 60);
                    });

                    // Goal section with special styling
                    currentY += (results.length * (cardHeight + cardSpacing)) + 40;

                    let goalText = '';
                    let goalEmoji = '';
                    if (data.goal === 'lose') {
                        goalText = 'إنقاص الوزن والحصول على جسم رشيق';
                        goalEmoji = '🔥';
                    } else if (data.goal === 'gain') {
                        goalText = 'زيادة الكتلة العضلية والقوة';
                        goalEmoji = '💪';
                    } else {
                        goalText = 'الحفاظ على الوزن والصحة';
                        goalEmoji = '⚖️';
                    }

                    // Goal card
                    const goalCardWidth = 500;
                    const goalCardHeight = 100;
                    const goalCardX = (canvas.width - goalCardWidth) / 2;

                    const goalGradient = ctx.createLinearGradient(goalCardX, currentY, goalCardX + goalCardWidth, currentY);
                    goalGradient.addColorStop(0, 'rgba(220, 53, 69, 0.3)');
                    goalGradient.addColorStop(1, 'rgba(220, 53, 69, 0.1)');

                    ctx.fillStyle = goalGradient;
                    ctx.beginPath();
                    ctx.roundRect(goalCardX, currentY, goalCardWidth, goalCardHeight, 20);
                    ctx.fill();

                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 3;
                    ctx.stroke();

                    // Goal text
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 32px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${goalEmoji} هدفك`, canvas.width / 2, currentY + 35);

                    ctx.font = 'bold 24px Arial';
                    ctx.fillStyle = '#ffd700';
                    ctx.fillText(goalText, canvas.width / 2, currentY + 70);

                    // Add decorative elements
                    drawModernDecorations(ctx, canvas.width, canvas.height);

                    // Display the generated image
                    displayGeneratedImage(canvas);
                };

                img.onerror = function() {
                    console.log('Creating modern results image without template background');
                    // Create a beautiful gradient background if template fails
                    createModernResultsImage(data, canvas, ctx);
                };

                img.src = 'images/popeye-template.jpg';
            }

            // Create modern decorative elements
            function drawModernDecorations(ctx, width, height) {
                // Top corner decorations
                ctx.strokeStyle = 'rgba(255, 215, 0, 0.6)';
                ctx.lineWidth = 8;
                ctx.lineCap = 'round';

                // Top left corner
                ctx.beginPath();
                ctx.moveTo(80, 80);
                ctx.lineTo(150, 80);
                ctx.moveTo(80, 80);
                ctx.lineTo(80, 150);
                ctx.stroke();

                // Top right corner
                ctx.beginPath();
                ctx.moveTo(width - 80, 80);
                ctx.lineTo(width - 150, 80);
                ctx.moveTo(width - 80, 80);
                ctx.lineTo(width - 80, 150);
                ctx.stroke();

                // Bottom decorative elements
                ctx.strokeStyle = 'rgba(220, 53, 69, 0.6)';

                // Bottom left corner
                ctx.beginPath();
                ctx.moveTo(80, height - 80);
                ctx.lineTo(150, height - 80);
                ctx.moveTo(80, height - 80);
                ctx.lineTo(80, height - 150);
                ctx.stroke();

                // Bottom right corner
                ctx.beginPath();
                ctx.moveTo(width - 80, height - 80);
                ctx.lineTo(width - 150, height - 80);
                ctx.moveTo(width - 80, height - 80);
                ctx.lineTo(width - 80, height - 150);
                ctx.stroke();
            }

            // Fallback modern design without template
            function createModernResultsImage(data, canvas, ctx) {
                // Create stunning gradient background
                const bgGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                bgGradient.addColorStop(0, '#1a1a2e');
                bgGradient.addColorStop(0.3, '#16213e');
                bgGradient.addColorStop(0.7, '#0f3460');
                bgGradient.addColorStop(1, '#533483');

                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Add geometric patterns
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.lineWidth = 2;
                for (let i = 0; i < canvas.width; i += 60) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i + 30, canvas.height);
                    ctx.stroke();
                }

                // Continue with the same modern layout as above
                // [Rest of the modern styling code would go here]

                displayGeneratedImage(canvas);
            }

            // Display the generated image in the results section
            function displayGeneratedImage(canvas) {
                // Create or update the image container
                let imageContainer = document.getElementById('branded-results-image');
                if (!imageContainer) {
                    imageContainer = document.createElement('div');
                    imageContainer.id = 'branded-results-image';
                    imageContainer.style.cssText = `
                        text-align: center;
                        margin: 2rem 0;
                        padding: 2rem;
                        background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(44, 62, 80, 0.1));
                        border-radius: 15px;
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                    `;

                    // Insert after the regular results
                    const resultsSection = document.getElementById('results-section');
                    resultsSection.insertBefore(imageContainer, resultsSection.firstChild);
                }

                // Convert canvas to image
                const img = document.createElement('img');
                img.src = canvas.toDataURL('image/png');
                img.style.cssText = `
                    max-width: 100%;
                    height: auto;
                    border-radius: 12px;
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
                    margin-bottom: 1rem;
                `;

                // Clear previous content and add new image
                imageContainer.innerHTML = '';
                imageContainer.appendChild(img);

                // Add title
                const title = document.createElement('h3');
                title.textContent = 'نتائجك الشخصية - جاهزة للمشاركة';
                title.style.cssText = `
                    color: #2c3e50;
                    font-size: 1.5rem;
                    margin-bottom: 1rem;
                    font-weight: 700;
                `;
                imageContainer.insertBefore(title, img);
            }

            // Fallback function if image loading fails
            function displayTextResults(data) {
                console.log('Displaying text-based results as fallback');
                // The existing results display will be used
            }

            // Advanced Calculator Functions
            function calculateAdvancedCalories() {
                // Show loading state
                const button = document.querySelector('.calculate-btn-advanced');
                const originalText = button.innerHTML;
                button.innerHTML = '<div class="btn-content"><i class="fas fa-spinner fa-spin btn-icon"></i><span class="btn-text">جاري الحساب...</span></div>';
                button.disabled = true;

                // Get all form elements safely
                const age = document.getElementById('age');
                const gender = document.getElementById('gender');
                const weight = document.getElementById('weight');
                const height = document.getElementById('height');
                const activity = document.getElementById('activity');
                const goal = document.getElementById('goal');
                const experience = document.getElementById('experience');
                const bodyFat = document.getElementById('body-fat');

                // Clear previous errors safely
                [age, gender, weight, height, activity, goal, experience, bodyFat].forEach(field => {
                    if (field) field.classList.remove('error');
                });

                let hasErrors = false;

                // Check each field safely
                if (!age || !age.value || isNaN(age.value) || age.value < 13 || age.value > 100) {
                    if (age) age.classList.add('error');
                    hasErrors = true;
                }

                if (!gender || !gender.value) {
                    if (gender) gender.classList.add('error');
                    hasErrors = true;
                }

                if (!weight || !weight.value || isNaN(weight.value) || weight.value < 30 || weight.value > 300) {
                    if (weight) weight.classList.add('error');
                    hasErrors = true;
                }

                if (!height || !height.value || isNaN(height.value) || height.value < 120 || height.value > 250) {
                    if (height) height.classList.add('error');
                    hasErrors = true;
                }

                if (!activity || !activity.value) {
                    if (activity) activity.classList.add('error');
                    hasErrors = true;
                }

                if (!goal || !goal.value) {
                    if (goal) goal.classList.add('error');
                    hasErrors = true;
                }

                if (!experience || !experience.value) {
                    if (experience) experience.classList.add('error');
                    hasErrors = true;
                }

                if (hasErrors) {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    button.style.animation = 'errorShake 0.5s ease-in-out';
                    setTimeout(() => {
                        button.style.animation = '';
                    }, 500);
                    return;
                }

                // Calculate with a slight delay for better UX
                setTimeout(() => {
                    performAdvancedCalculation();
                    button.innerHTML = originalText;
                    button.disabled = false;
                }, 800);
            }

            function performAdvancedCalculation() {
                // Get input values
                const age = parseFloat(document.getElementById('age').value);
                const gender = document.getElementById('gender').value;
                const weight = parseFloat(document.getElementById('weight').value);
                const height = parseFloat(document.getElementById('height').value);
                const activity = document.getElementById('activity').value;
                const goal = document.getElementById('goal').value;
                const bodyFat = parseFloat(document.getElementById('body-fat').value) || null;
                const experience = document.getElementById('experience').value;

                // Calculate BMR using Mifflin-St Jeor Equation
                let bmr;
                if (gender === 'male') {
                    bmr = 10 * weight + 6.25 * height - 5 * age + 5;
                } else {
                    bmr = 10 * weight + 6.25 * height - 5 * age - 161;
                }

                // Calculate TDEE based on activity level
                const activityMultipliers = {
                    sedentary: 1.2,
                    light: 1.375,
                    moderate: 1.55,
                    active: 1.725,
                    very_active: 1.9
                };

                const tdee = bmr * activityMultipliers[activity];

                // Calculate calories based on goal and experience
                let calories;
                let calorieAdjustment = 0;

                if (goal === 'lose') {
                    calorieAdjustment = experience === 'beginner' ? -300 : 
                                       experience === 'intermediate' ? -400 : -500;
                } else if (goal === 'gain') {
                    calorieAdjustment = experience === 'beginner' ? 300 : 
                                       experience === 'intermediate' ? 400 : 500;
                }

                calories = tdee + calorieAdjustment;

                // Calculate macronutrients
                let protein, carbs, fats;

                if (goal === 'lose') {
                    protein = weight * 2.5;
                    fats = calories * 0.25 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                } else if (goal === 'gain') {
                    protein = weight * 2.2;
                    fats = calories * 0.20 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                } else {
                    protein = weight * 2.0;
                    fats = calories * 0.25 / 9;
                    carbs = (calories - (protein * 4) - (fats * 9)) / 4;
                }

                // Calculate additional metrics
                const bmi = weight / ((height / 100) ** 2);
                const idealWeight = (height - 100) * 0.9;


                // Update results
                document.getElementById('calories-result').textContent = Math.round(calories);
                document.getElementById('protein-result').textContent = Math.round(protein);
                document.getElementById('carbs-result').textContent = Math.round(carbs);
                document.getElementById('fats-result').textContent = Math.round(fats);
                document.getElementById('bmi-result').textContent = bmi.toFixed(1);
                document.getElementById('ideal-weight-result').textContent = Math.round(idealWeight) + ' كجم';
                document.getElementById('bmr-result').textContent = Math.round(bmr);
                document.getElementById('tdee-result').textContent = Math.round(tdee);

                // Tips generation removed per user request

                // Switch to results page with animation from top
                const inputPage = document.getElementById('inputPage');
                const resultsPage = document.getElementById('resultsPage');

                inputPage.style.animation = 'slideOutDown 0.5s ease-in-out forwards';

                setTimeout(() => {
                    inputPage.classList.add('hidden');
                    resultsPage.classList.remove('hidden');
                    resultsPage.style.animation = 'slideInFromTop 0.5s ease-in-out forwards';
                }, 500);
            }

            // Go back to input page with animation
            function backToInputPage() {
                const inputPage = document.getElementById('inputPage');
                const resultsPage = document.getElementById('resultsPage');

                resultsPage.style.animation = 'slideOutUp 0.5s ease-in-out forwards';

                setTimeout(() => {
                    resultsPage.classList.add('hidden');
                    inputPage.classList.remove('hidden');
                    inputPage.style.animation = 'slideInFromBottom 0.5s ease-in-out forwards';
                }, 500);

                // Clear errors
                const inputs = document.querySelectorAll('.form-input, .form-select');
                inputs.forEach(input => {
                    if (input) input.classList.remove('error');
                });
            }

            // Generate personalized tips for advanced calculator
            function generateAdvancedTips(bmi, goal, experience, activity, age, gender) {
                const tips = [];

                // BMI-based tips
                if (bmi < 18.5) {
                    tips.push('وزنك أقل من المعدل الطبيعي، ركز على زيادة السعرات الحرارية والبروتين');
                } else if (bmi > 25) {
                    tips.push('وزنك أعلى من المعدل الطبيعي، ركز على تقليل السعرات وزيادة النشاط');
                } else {
                    tips.push('وزنك في المعدل الطبيعي، حافظ على نظامك الغذائي المتوازن');
                }

                // Goal-based tips
                if (goal === 'lose') {
                    tips.push('لفقدان الوزن الصحي، اهدف لخسارة 0.5-1 كجم في الأسبوع');
                    tips.push('اشرب المياه قبل الوجبات وتناول الخضروات أولاً');
                } else if (goal === 'gain') {
                    tips.push('لزيادة الوزن بشكل صحي، ركز على الأطعمة الغنية بالسعرات');
                    tips.push('تناول وجبات أكثر تكراراً وأضف المكسرات والأفوكادو');
                } else {
                    tips.push('للحفاظ على الوزن، تناول وجبات متوازنة ومارس الرياضة بانتظام');
                }

                // Experience-based tips
                if (experience === 'beginner') {
                    tips.push('ابدأ بتغييرات صغيرة وتدريجية في نظامك الغذائي');
                    tips.push('احرص على تناول البروتين في كل وجبة');
                } else if (experience === 'intermediate') {
                    tips.push('فكر في تنويع مصادر البروتين والكربوهيدرات');
                    tips.push('راقب تقدمك وعدّل خطتك حسب النتائج');
                } else {
                    tips.push('يمكنك تجربة استراتيجيات متقدمة مثل تدوير الكربوهيدرات');
                    tips.push('ركز على توقيت تناول العناصر الغذائية حول التمرين');
                }

                // Activity-based tips
                if (activity === 'sedentary' || activity === 'light') {
                    tips.push('حاول زيادة نشاطك اليومي مثل المشي أو استخدام السلالم');
                } else if (activity === 'very_active') {
                    tips.push('تأكد من الحصول على راحة كافية بين جلسات التدريب');
                }

                // Age and gender-based tips
                if (age > 40) {
                    tips.push('مع تقدم العمر، ركز على تمارين القوة للحفاظ على كتلة العضلات');
                }

                if (gender === 'female') {
                    tips.push('تأكدي من تناول كمية كافية من الكالسيوم والحديد');
                }

                // Display tips
                const tipsContainer = document.getElementById('personal-tips');
                tipsContainer.innerHTML = '';
                tips.forEach(tip => {
                    const tipElement = document.createElement('div');
                    tipElement.className = 'tip-item';
                    tipElement.textContent = tip;
                    tipsContainer.appendChild(tipElement);
                });
            }



            // Generate advanced image with results using mobile-optimized design
            function generateAdvancedImage() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                // Set canvas size optimized for mobile sharing (1080x1350 - Instagram portrait)
                canvas.width = 1080;
                canvas.height = 1350;

                // Create clean white background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Add subtle pattern
                ctx.fillStyle = 'rgba(220, 53, 69, 0.03)';
                for (let i = 0; i < canvas.width; i += 40) {
                    for (let j = 0; j < canvas.height; j += 40) {
                        ctx.fillRect(i, j, 2, 2);
                    }
                }

                // Header section with logo
                drawModernHeader(ctx, canvas.width, canvas.height);

                // Results section
                drawMobileResults(ctx, canvas.width, canvas.height);

                // Footer with contact info
                drawModernFooter(ctx, canvas.width, canvas.height);


            }

            // Draw modern header with logo
            function drawModernHeader(ctx, width, height) {
                const headerHeight = 220;

                // Header background gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, headerHeight);
                gradient.addColorStop(0, '#dc3545');
                gradient.addColorStop(1, '#c82333');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, headerHeight);

                // Logo circle background
                ctx.beginPath();
                ctx.arc(width / 2, 70, 45, 0, 2 * Math.PI);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.fill();

                // Logo text
                ctx.fillStyle = '#dc3545';
                ctx.font = 'bold 36px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('P', width / 2, 80);

                // Gym name
                ctx.fillStyle = 'white';
                ctx.font = 'bold 42px Arial';
                ctx.fillText('Popeye Gym', width / 2, 140);

                // Subtitle
                ctx.font = '22px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText('نتائج حاسبة السعرات والبروتين', width / 2, 170);

                // Date
                ctx.font = '18px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                const currentDate = new Date().toLocaleDateString('ar-EG');
                ctx.fillText(`التاريخ: ${currentDate}`, width / 2, 195);
            }

            // Draw mobile-optimized results
            function drawMobileResults(ctx, width, height) {
                const results = {
                    calories: document.getElementById('calories-result').textContent,
                    protein: document.getElementById('protein-result').textContent,
                    carbs: document.getElementById('carbs-result').textContent,
                    fats: document.getElementById('fats-result').textContent
                };

                const startY = 250;
                const cardHeight = 85;
                const cardWidth = width - 60;
                const cardX = 30;
                const gap = 15;

                const resultsData = [
                    { label: 'السعرات اليومية', value: results.calories, unit: 'سعرة', color: '#dc3545', icon: '🔥' },
                    { label: 'البروتين', value: results.protein, unit: 'جرام', color: '#28a745', icon: '🥩' },
                    { label: 'الكربوهيدرات', value: results.carbs, unit: 'جرام', color: '#007bff', icon: '🍞' },
                    { label: 'الدهون', value: results.fats, unit: 'جرام', color: '#ffc107', icon: '🥑' },

                ];

                resultsData.forEach((item, index) => {
                    const y = startY + (index * (cardHeight + gap));

                    // Card shadow
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                    ctx.fillRect(cardX + 3, y + 3, cardWidth, cardHeight);

                    // Card background
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(cardX, y, cardWidth, cardHeight);

                    // Card border
                    ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(cardX, y, cardWidth, cardHeight);

                    // Colored left border
                    ctx.fillStyle = item.color;
                    ctx.fillRect(cardX, y, 6, cardHeight);

                    // Icon background
                    ctx.beginPath();
                    ctx.arc(cardX + 55, y + cardHeight/2, 25, 0, 2 * Math.PI);
                    ctx.fillStyle = item.color + '20';
                    ctx.fill();

                    // Icon
                    ctx.font = '28px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(item.icon, cardX + 55, y + cardHeight/2 + 8);

                    // Label
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 24px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(item.label, cardX + cardWidth - 30, y + 30);

                    // Value and unit
                    ctx.fillStyle = item.color;
                    ctx.font = 'bold 32px Arial';
                    ctx.fillText(`${item.value} ${item.unit}`, cardX + cardWidth - 30, y + 65);
                });
            }

            // Draw modern footer with contact info
            function drawModernFooter(ctx, width, height) {
                const footerHeight = 280;
                const footerY = height - footerHeight;

                // Footer background
                ctx.fillStyle = '#f8f9fa';
                ctx.fillRect(0, footerY, width, footerHeight);

                // Top border
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, footerY, width, 4);

                // Gym logo and name
                ctx.beginPath();
                ctx.arc(width / 2, footerY + 50, 35, 0, 2 * Math.PI);
                ctx.fillStyle = '#dc3545';
                ctx.fill();

                ctx.fillStyle = 'white';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('P', width / 2, footerY + 60);

                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 36px Arial';
                ctx.fillText('Popeye Gym', width / 2, footerY + 110);

                ctx.font = '20px Arial';
                ctx.fillStyle = '#6c757d';
                ctx.fillText('معدات اللياقة البدنية والمكملات الغذائية', width / 2, footerY + 140);

                // Contact info
                const contactInfo = [
                    { icon: '📍', text: 'الجماليه - خلف مطعم شيخ الحاره', color: '#dc3545' },
                    { icon: '📱', text: '01555037364', color: '#25d366' },
                    { icon: '📘', text: '@popeyegym___', color: '#4267B2' },
                    { icon: '📷', text: 'Popeye Gym', color: '#E4405F' }
                ];

                contactInfo.forEach((info, index) => {
                    const y = footerY + 170 + (index * 25);

                    ctx.fillStyle = info.color;
                    ctx.font = '20px Arial';
                    ctx.textAlign = 'left';
                    ctx.fillText(info.icon, 50, y);

                    ctx.fillStyle = '#495057';
                    ctx.font = '18px Arial';
                    ctx.fillText(info.text, 85, y);
                });

                // Generated timestamp
                ctx.fillStyle = '#adb5bd';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`تم إنشاء التقرير: ${new Date().toLocaleString('ar-EG')}`, width / 2, footerY + 270);
            }

            // Draw transparent website logo in background
            function drawTransparentWebsiteLogo(ctx, x, y) {
                ctx.save();
                ctx.globalAlpha = 0.1;
                ctx.fillStyle = 'white';
                ctx.font = 'bold 60px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('POPEYE', x, y - 10);
                ctx.font = 'bold 30px Arial';
                ctx.fillText('GYM', x, y + 30);
                ctx.restore();
            }

            // Draw results on the provided image background
            function drawResultsOnImage(ctx, canvas) {
                // Get current results
                const results = {
                    calories: document.getElementById('calories-result').textContent,
                    protein: document.getElementById('protein-result').textContent,
                    carbs: document.getElementById('carbs-result').textContent,
                    fats: document.getElementById('fats-result').textContent
                };

                // Results area background (positioned below the white line in the image)
                const resultsY = 350;
                const boxWidth = 600;
                const boxHeight = 250;
                const boxX = (canvas.width - boxWidth) / 2;

                // Semi-transparent background for results
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillRect(boxX, resultsY, boxWidth, boxHeight);

                // Results title
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج حاسبة السعرات', canvas.width / 2, resultsY + 35);

                // Draw results in a neat grid
                const resultsData = [
                    { label: 'السعرات', value: results.calories, unit: 'سعرة/يوم', color: '#dc3545', icon: '🔥' },
                    { label: 'البروتين', value: results.protein, unit: 'جرام/يوم', color: '#8e44ad', icon: '🥩' },
                    { label: 'الكربوهيدرات', value: results.carbs, unit: 'جرام/يوم', color: '#dc3545', icon: '🍞' },
                    { label: 'الدهون', value: results.fats, unit: 'جرام/يوم', color: '#8B0000', icon: '🥑' },

                ];

                resultsData.forEach((item, index) => {
                    const col = index % 2;
                    const row = Math.floor(index / 2);
                    const x = boxX + 50 + (col * 250);
                    const y = resultsY + 70 + (row * 60);

                    // Result value
                    ctx.fillStyle = item.color;
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'left';
                    ctx.fillText(`${item.icon} ${item.label}: ${item.value}`, x, y);

                    // Unit
                    ctx.fillStyle = '#666';
                    ctx.font = '14px Arial';
                    ctx.fillText(item.unit, x, y + 20);
                });


            }

            // Draw transparent logo as watermark
            function drawTransparentLogo(ctx, x, y) {
                ctx.save();
                ctx.translate(x, y);
                ctx.globalAlpha = 0.1;

                // Draw large Popeye logo silhouette
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 200px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('💪', 0, 0);

                ctx.restore();
            }

            // Draw advanced results layout
            function drawAdvancedResults(ctx, results) {
                const startY = 250;
                let currentY = startY;

                // Main results cards
                const mainResults = [
                    { label: 'السعرات المطلوبة', value: results.calories, unit: 'سعرة/يوم', color: '#dc3545' },
                    { label: 'البروتين', value: results.protein, unit: 'جرام/يوم', color: '#8B0000' }
                ];

                mainResults.forEach((result, index) => {
                    const x = (index * 450) + 270;
                    drawResultCard(ctx, x, currentY, result, true);
                });

                currentY += 180;

                // Secondary results
                const secondaryResults = [
                    { label: 'الكربوهيدرات', value: results.carbs, unit: 'جرام/يوم', color: '#dc3545' },
                    { label: 'الدهون', value: results.fats, unit: 'جرام/يوم', color: '#9b59b6' },

                ];

                secondaryResults.forEach((result, index) => {
                    const x = (index * 300) + 240;
                    drawResultCard(ctx, x, currentY, result, false);
                });

                currentY += 150;

                // Additional metrics
                const additionalMetrics = [
                    { label: 'مؤشر كتلة الجسم', value: results.bmi, unit: '', color: '#2c3e50' },
                    { label: 'الوزن المثالي', value: results.idealWeight, unit: '', color: '#2c3e50' },
                    { label: 'معدل الأيض الأساسي', value: results.bmr, unit: 'سعرة/يوم', color: '#2c3e50' },
                    { label: 'إجمالي الطاقة المطلوبة', value: results.tdee, unit: 'سعرة/يوم', color: '#2c3e50' }
                ];

                additionalMetrics.forEach((metric, index) => {
                    const x = (index % 2) * 450 + 270;
                    const y = currentY + Math.floor(index / 2) * 120;
                    drawMetricCard(ctx, x, y, metric);
                });
            }

            // Draw individual result card
            function drawResultCard(ctx, x, y, result, isMain) {
                const width = isMain ? 350 : 250;
                const height = isMain ? 150 : 120;

                // Card background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.fillRect(x - width/2, y, width, height);

                // Card border
                ctx.strokeStyle = result.color;
                ctx.lineWidth = 3;
                ctx.strokeRect(x - width/2, y, width, height);

                // Label
                ctx.fillStyle = '#2c3e50';
                ctx.font = isMain ? 'bold 22px Arial' : 'bold 18px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(result.label, x, y + 35);

                // Value
                ctx.fillStyle = result.color;
                ctx.font = isMain ? 'bold 36px Arial' : 'bold 28px Arial';
                ctx.fillText(result.value, x, y + (isMain ? 80 : 65));

                // Unit
                ctx.fillStyle = '#6c757d';
                ctx.font = isMain ? '16px Arial' : '14px Arial';
                ctx.fillText(result.unit, x, y + (isMain ? 105 : 85));
            }

            // Draw metric card
            function drawMetricCard(ctx, x, y, metric) {
                const width = 350;
                const height = 100;

                // Card background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillRect(x - width/2, y, width, height);

                // Card border
                ctx.strokeStyle = metric.color;
                ctx.lineWidth = 2;
                ctx.strokeRect(x - width/2, y, width, height);

                // Label
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(metric.label, x, y + 30);

                // Value
                ctx.fillStyle = metric.color;
                ctx.font = 'bold 24px Arial';
                ctx.fillText(metric.value + ' ' + metric.unit, x, y + 60);
            }

            // Draw footer with contact information
            function drawFooterInfo(ctx, width, height) {
                const footerHeight = 200;
                const footerY = height - footerHeight;

                // Footer background
                ctx.fillStyle = 'rgba(44, 62, 80, 0.95)';
                ctx.fillRect(0, footerY, width, footerHeight);

                // Gym name
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Popeye Gym', width / 2, footerY + 40);

                // Contact info
                ctx.font = '18px Arial';
                ctx.fillStyle = '#ecf0f1';

                const contactInfo = [
                    '📍 الجماليه - خلف مطعم شيخ الحاره',
                    '📱 WhatsApp: +201065278069',
                    '📘 Facebook: popeyegym',
                    '📷 Instagram: @popeyegym'
                ];

                contactInfo.forEach((info, index) => {
                    ctx.fillText(info, width / 2, footerY + 75 + (index * 25));
                });
            }

            // Draw website logo (same as header)
            function drawWebsiteLogo(ctx, x, y, size) {
                ctx.save();
                ctx.translate(x, y);

                // Create circular background for logo
                ctx.beginPath();
                ctx.arc(0, 0, size/2, 0, 2 * Math.PI);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fill();

                // Add border
                ctx.beginPath();
                ctx.arc(0, 0, size/2, 0, 2 * Math.PI);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.lineWidth = 4;
                ctx.stroke();

                // Draw Popeye character in the logo style
                ctx.globalAlpha = 0.8;

                // Draw muscular arms
                ctx.fillStyle = '#2c3e50';
                ctx.beginPath();
                ctx.ellipse(-25, -5, 18, 12, 0, 0, 2 * Math.PI);
                ctx.fill();

                ctx.beginPath();
                ctx.ellipse(25, -5, 18, 12, 0, 0, 2 * Math.PI);
                ctx.fill();

                // Draw head
                ctx.beginPath();
                ctx.arc(0, -8, 14, 0, 2 * Math.PI);
                ctx.fill();

                // Draw body
                ctx.beginPath();
                ctx.ellipse(0, 10, 10, 18, 0, 0, 2 * Math.PI);
                ctx.fill();

                // Draw sailor hat
                ctx.fillStyle = '#dc3545';
                ctx.beginPath();
                ctx.ellipse(0, -20, 16, 6, 0, 0, 2 * Math.PI);
                ctx.fill();

                ctx.restore();
            }

            // Draw transparent logo as watermark in background
            function drawTransparentWatermark(ctx, canvasWidth, canvasHeight) {
                ctx.save();
                ctx.translate(canvasWidth / 2, canvasHeight / 2);
                ctx.globalAlpha = 0.03;

                // Large background watermark
                const logoSize = 300;

                // Draw muscular arms
                ctx.fillStyle = '#dc3545';
                ctx.beginPath();
                ctx.ellipse(-100, -30, 70, 50, 0, 0, 2 * Math.PI);
                ctx.fill();

                ctx.beginPath();
                ctx.ellipse(100, -30, 70, 50, 0, 0, 2 * Math.PI);
                ctx.fill();

                // Draw head
                ctx.beginPath();
                ctx.arc(0, -40, 55, 0, 2 * Math.PI);
                ctx.fill();

                // Draw body
                ctx.beginPath();
                ctx.ellipse(0, 40, 40, 70, 0, 0, 2 * Math.PI);
                ctx.fill();

                // Draw sailor hat
                ctx.beginPath();
                ctx.ellipse(0, -80, 65, 20, 0, 0, 2 * Math.PI);
                ctx.fill();

                ctx.restore();
            }

            // Draw professional results with clean white design
            function drawProfessionalResults(ctx, results, canvasWidth, canvasHeight) {
                // Add transparent watermark
                drawTransparentWatermark(ctx, canvasWidth, canvasHeight);

                const startY = 350;
                const cardHeight = 120;
                const cardWidth = canvasWidth - 80;
                const cardMargin = 15;
                const cardX = 40;

                const resultsData = [
                    { label: 'معدل الأيض الأساسي', value: results.bmr, unit: 'سعرة/يوم', color: '#dc3545', icon: '🔥' },
                    { label: 'إجمالي الطاقة المطلوبة', value: results.tdee, unit: 'سعرة/يوم', color: '#dc3545', icon: '⚡' },
                    { label: 'السعرات المطلوبة', value: results.calories, unit: 'سعرة/يوم', color: '#8B0000', icon: '🍎' },
                    { label: 'البروتين', value: results.protein, unit: 'جرام/يوم', color: '#3498db', icon: '🥩' },
                    { label: 'الكربوهيدرات', value: results.carbs, unit: 'جرام/يوم', color: '#9b59b6', icon: '🍞' },
                    { label: 'الدهون', value: results.fats, unit: 'جرام/يوم', color: '#e67e22', icon: '🥑' },

                    { label: 'مؤشر كتلة الجسم', value: results.bmi, unit: '', color: '#34495e', icon: '⚖️' },
                    { label: 'الوزن المثالي', value: results.idealWeight, unit: 'كجم', color: '#2c3e50', icon: '🎯' },
                ];

                resultsData.forEach((item, index) => {
                    const y = startY + (index * (cardHeight + cardMargin));

                    // Draw card with clean white background
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.fillRect(cardX, y, cardWidth, cardHeight);

                    // Add shadow
                    ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 4;
                    ctx.shadowBlur = 8;
                    ctx.fillRect(cardX, y, cardWidth, cardHeight);

                    // Reset shadow
                    ctx.shadowColor = 'transparent';
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                    ctx.shadowBlur = 0;

                    // Draw colored left border
                    ctx.fillStyle = item.color;
                    ctx.fillRect(cardX, y, 8, cardHeight);

                    // Draw icon background circle
                    ctx.beginPath();
                    ctx.arc(cardX + 70, y + cardHeight/2, 35, 0, 2 * Math.PI);
                    ctx.fillStyle = item.color + '20';
                    ctx.fill();

                    // Draw icon
                    ctx.fillStyle = item.color;
                    ctx.font = '36px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(item.icon, cardX + 70, y + cardHeight/2);

                    // Draw label
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 28px Arial';
                    ctx.textAlign = 'right';
                    ctx.textBaseline = 'top';
                    ctx.fillText(item.label, cardX + cardWidth - 30, y + 20);

                    // Draw value
                    ctx.fillStyle = item.color;
                    ctx.font = 'bold 40px Arial';
                    ctx.fillText(item.value, cardX + cardWidth - 30, y + 55);

                    // Draw unit
                    if (item.unit) {
                        ctx.fillStyle = '#7f8c8d';
                        ctx.font = '20px Arial';
                        ctx.fillText(item.unit, cardX + cardWidth - 30, y + 95);
                    }
                });
            }

            // Draw professional footer with contact info
            function drawProfessionalFooter(ctx, canvasWidth, canvasHeight) {
                const footerHeight = 280;
                const footerY = canvasHeight - footerHeight;

                // Footer background with subtle gradient
                const footerGradient = ctx.createLinearGradient(0, footerY, 0, canvasHeight);
                footerGradient.addColorStop(0, '#f8f9fa');
                footerGradient.addColorStop(1, '#e9ecef');
                ctx.fillStyle = footerGradient;
                ctx.fillRect(0, footerY, canvasWidth, footerHeight);

                // Add top border
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, footerY, canvasWidth, 4);

                // Draw decorative line
                ctx.strokeStyle = '#dc3545';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(canvasWidth / 2 - 150, footerY + 40);
                ctx.lineTo(canvasWidth / 2 + 150, footerY + 40);
                ctx.stroke();

                // Gym name
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 44px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Popeye Gym', canvasWidth / 2, footerY + 80);

                // Subtitle
                ctx.fillStyle = '#dc3545';
                ctx.font = 'bold 24px Arial';
                ctx.fillText('معدات اللياقة البدنية والمكملات الغذائية', canvasWidth / 2, footerY + 115);

                // Contact info section
                ctx.fillStyle = '#495057';
                ctx.font = '24px Arial';

                const contactInfo = [
                    { icon: '📍', text: 'الجماليه - خلف مطعم شيخ الحاره', color: '#dc3545' },
                    { icon: '📱', text: 'WhatsApp: +201065278069', color: '#25d366' },
                    { icon: '📘', text: 'Facebook: popeyegym', color: '#4267B2' },
                    { icon: '📷', text: 'Instagram: @popeyegym', color: '#E4405F' }
                ];

                contactInfo.forEach((info, index) => {
                    const y = footerY + 155 + (index * 30);

                    // Draw icon with color
                    ctx.fillStyle = info.color;
                    ctx.font = '24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(info.icon, canvasWidth / 2 - 200, y);

                    // Draw text
                    ctx.fillStyle = '#495057';
                    ctx.font = '22px Arial';
                    ctx.textAlign = 'left';
                    ctx.fillText(info.text, canvasWidth / 2 - 170, y);
                });

                // Add generation timestamp
                ctx.fillStyle = '#6c757d';
                ctx.font = '18px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`تم إنشاء التقرير: ${new Date().toLocaleString('ar-EG')}`, canvasWidth / 2, footerY + 270);
            }

            // Get current results from the page
            function getCurrentResults() {
                const resultsDiv = document.getElementById('calculator-results');
                if (!resultsDiv || resultsDiv.style.display === 'none') {
                    return null;
                }

                const getValueById = (id) => {
                    const element = document.getElementById(id);
                    return element ? parseFloat(element.textContent) || element.textContent : 0;
                };

                return {
                    bmr: getValueById('bmr-value'),
                    tdee: getValueById('tdee-value'),
                    calories: getValueById('calories-value'),
                    protein: getValueById('protein-value'),
                    carbs: getValueById('carbs-value'),
                    fats: getValueById('fats-value'),

                    bmi: getValueById('bmi-value'),
                    idealWeight: getValueById('ideal-weight-value')
                };
            }



            // Draw simplified logo
            function drawLogo(ctx, x, y) {
                ctx.save();
                ctx.translate(x, y);

                // Draw circle background
                ctx.beginPath();
                ctx.arc(0, 0, 40, 0, 2 * Math.PI);
                ctx.fillStyle = '#fff';
                ctx.fill();

                // Draw "P" letter
                ctx.fillStyle = '#dc3545';
                ctx.font = 'bold 48px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('P', 0, 0);

                ctx.restore();
            }

            // Draw results on canvas
            function drawResults(ctx, results) {
                const startY = 250;
                const cardHeight = 80;
                const cardWidth = 700;
                const cardMargin = 20;

                const resultsData = [
                    { label: 'معدل الأيض الأساسي', value: results.bmr, unit: 'سعرة/يوم' },
                    { label: 'إجمالي الطاقة المطلوبة', value: results.tdee, unit: 'سعرة/يوم' },
                    { label: 'السعرات المطلوبة', value: results.calories, unit: 'سعرة/يوم' },
                    { label: 'البروتين', value: results.protein, unit: 'جرام/يوم' },
                    { label: 'الكربوهيدرات', value: results.carbs, unit: 'جرام/يوم' },
                    { label: 'الدهون', value: results.fats, unit: 'جرام/يوم' },

                    { label: 'مؤشر كتلة الجسم', value: results.bmi, unit: '' },
                    { label: 'الوزن المثالي', value: results.idealWeight, unit: '' },
                ];

                resultsData.forEach((item, index) => {
                    const y = startY + (index * (cardHeight + cardMargin));

                    // Draw card background
                    ctx.fillStyle = 'rgba(255,255,255,0.1)';
                    ctx.fillRect(50, y, cardWidth, cardHeight);

                    // Draw card border
                    ctx.strokeStyle = 'rgba(255,255,255,0.2)';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(50, y, cardWidth, cardHeight);

                    // Draw label
                    ctx.fillStyle = '#fff';
                    ctx.font = '18px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(item.label, cardWidth - 20, y + 30);

                    // Draw value
                    ctx.fillStyle = '#FFD700';
                    ctx.font = 'bold 24px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(item.value, cardWidth - 20, y + 55);

                    // Draw unit
                    if (item.unit) {
                        ctx.fillStyle = 'rgba(255,255,255,0.7)';
                        ctx.font = '14px Arial';
                        ctx.fillText(item.unit, cardWidth - 20 - ctx.measureText(item.value).width - 10, y + 55);
                    }
                });
            }

            // Send report
            async function sendReport() {
                const issue = document.getElementById('issue-description').value;


                if (!issue.trim()) {
                    alert('يرجى وصف المشكلة');
                    return;
                }

                const submitBtn = document.getElementById('submit-report');
                submitBtn.disabled = true;
                submitBtn.textContent = 'جاري الإرسال...';

                try {
                    const response = await fetch('/api/send-report', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            issue: issue,
                            email: 'khaledeeta0@gmail.com',
                            timestamp: new Date().toISOString(),
                            recipient: 'khaledeeta0@gmail.com'
                        })
                    });

                    if (response.ok) {
                        alert('تم إرسال التقرير بنجاح!');
                        document.getElementById('issue-description').value = '';

                        closeReportModal();
                    } else {
                        alert('حدث خطأ أثناء إرسال التقرير');
                    }
                } catch (error) {
                    console.error('Error sending report:', error);
                    alert('حدث خطأ أثناء إرسال التقرير');
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'إرسال التقرير';
                }
            }

            // Open modal
            function openModal(productId) {
                currentProduct = products.find(p => p.id === productId);
                if (!currentProduct) return;

                // Update Meta Tags for this specific product
                updateProductMetaTags(currentProduct);

                document.getElementById('modal-title').textContent = currentProduct.name;
                document.getElementById('modal-body-content').innerHTML = `
                    <div class="product-image" style="margin-bottom: 1.5rem; height: 350px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15); padding: 20px;">
                        ${currentProduct.image ? 
                            `<img src="${currentProduct.image}" alt="${currentProduct.name}" style="width: 100%; height: 100%; object-fit: contain; object-position: center; border-radius: 15px; max-width: 90%; max-height: 90%;">` : 
                            `<i class="${getProductIcon(currentProduct.category)} product-placeholder"></i>`
                        }
                        <div class="discount-badge" style="position: absolute; top: 1rem; right: 1rem; background: var(--primary-color); color: white; padding: 0.5rem 1rem; border-radius: 50px; font-weight: 600; font-size: 0.9rem; box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);">
                            -${currentProduct.discount}%
                        </div>
                    </div>

                    <div class="product-pricing" style="margin-bottom: 1rem;">
                        <div class="price-discount-badge">${currentProduct.customDiscountText || '100 جنيه خصم'}</div>
                        <span class="original-price">${formatPrice(currentProduct.originalPrice)}</span>
                        <span class="current-price">${formatPrice(currentProduct.sizes ? currentProduct.sizes.find(s => s.id === currentProduct.selectedSize)?.price || currentProduct.currentPrice : currentProduct.currentPrice)}</span>
                    </div>

                    <p class="product-description" style="margin-bottom: 1.5rem;">
                        ${currentProduct.description}
                    </p>

                    ${currentProduct.sizes ? `
                        <div class="flavor-section" style="margin-bottom: 1.5rem;">
                            <div class="flavor-title">
                                <i class="fas fa-weight-hanging"></i>
                                اختر الحجم المطلوب:
                            </div>
                            <div class="flavor-options">
                                ${currentProduct.sizes.map(size => `
                                    <button class="flavor-btn ${size.id === currentProduct.selectedSize ? 'selected' : ''}" 
                                            onclick="selectSize('${size.id}')" 
                                            ${!size.available ? 'disabled' : ''}>
                                        ${size.name} - ${formatPrice(size.price)}
                                    </button>
                                `).join('')}
                            </div>
                            <div class="selected-flavor-display">
                                الحجم المختار: <strong>${currentProduct.sizes.find(s => s.id === currentProduct.selectedSize)?.name || '1 كيلو'} - ${formatPrice(currentProduct.sizes.find(s => s.id === currentProduct.selectedSize)?.price || currentProduct.currentPrice)}</strong>
                            </div>
                        </div>
                    ` : ''}

                    ${currentProduct.flavors ? `
                        <div class="flavor-section">
                            <div class="flavor-title">
                                <i class="fas fa-palette"></i>
                                اختر النكهة المفضلة لديك:
                            </div>
                            <div class="flavor-options">
                                ${currentProduct.flavors.map(flavor => `
                                    <button class="flavor-btn ${flavor.id === currentProduct.selectedFlavor ? 'selected' : ''}" 
                                            onclick="selectFlavor('${flavor.id}')" 
                                            ${!flavor.available ? 'disabled' : ''}>
                                        ${flavor.name}
                                    </button>
                                `).join('')}
                            </div>
                            <div class="selected-flavor-display">
                                النكهة المختارة: <strong>${currentProduct.flavors.find(f => f.id === currentProduct.selectedFlavor)?.name || 'فانيليا'}</strong>
                            </div>
                        </div>
                    ` : ''}

                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="margin-bottom: 0.5rem; color: var(--secondary-color);">
                            مميزات المنتج:
                        </h4>
                        <ul class="product-features">
                            ${currentProduct.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>

                    ${currentProduct.usage ? `
                        <div style="margin-bottom: 1.5rem;">
                            <h4 style="margin-bottom: 0.5rem; color: var(--secondary-color);">
                                طريقة الاستخدام:
                            </h4>
                            <p style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-left: 4px solid #dc3545;">
                                ${currentProduct.usage}
                            </p>
                        </div>
                    ` : ''}

                    ${currentProduct.nutritionPer100g ? `
                        <div style="margin-bottom: 1.5rem;">
                            <h4 style="margin-bottom: 0.5rem; color: var(--secondary-color);">
                                القيم الغذائية لكل 100 جرام:
                            </h4>
                            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.5rem;">
                                <div><strong>السعرات:</strong> ${currentProduct.nutritionPer100g.calories} سعرة</div>
                                <div><strong>البروتين:</strong> ${currentProduct.nutritionPer100g.protein} جم</div>
                                <div><strong>الكربوهيدرات:</strong> ${currentProduct.nutritionPer100g.carbs} جم</div>
                                <div><strong>الدهون:</strong> ${currentProduct.nutritionPer100g.fats} جم</div>
                                ${currentProduct.nutritionPer100g.fiber ? `<div><strong>الألياف:</strong> ${currentProduct.nutritionPer100g.fiber} جم</div>` : ''}
                                ${currentProduct.nutritionPer100g.sugar ? `<div><strong>السكر:</strong> ${currentProduct.nutritionPer100g.sugar} جم</div>` : ''}
                            </div>
                        </div>
                    ` : ''}


                `;

                const modalOverlay = document.getElementById('modal-overlay');
                if (modalOverlay) {
                    modalOverlay.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                }
            }

            // Close modal
            function closeModal() {
                const modalOverlay = document.getElementById('modal-overlay');
                if (modalOverlay) {
                    modalOverlay.classList.add('hidden');
                    document.body.style.overflow = 'unset';
                    currentProduct = null;
                }
            }

            // Select size function
            function selectSize(sizeId) {
                if (!currentProduct || !currentProduct.sizes) return;

                currentProduct.selectedSize = sizeId;
                const selectedSize = currentProduct.sizes.find(s => s.id === sizeId);

                // Update current price based on selected size
                if (selectedSize) {
                    currentProduct.currentPrice = selectedSize.price;
                }

                // Update size buttons
                document.querySelectorAll('.flavor-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                event.target.classList.add('selected');

                // Update selected size display
                const selectedSizeName = selectedSize?.name || '';
                const selectedSizePrice = selectedSize?.price || currentProduct.currentPrice;
                const sizeDisplayElements = document.querySelectorAll('.selected-flavor-display');
                sizeDisplayElements.forEach((element, index) => {
                    if (index === 0) { // First element is the size display
                        element.innerHTML = `الحجم المختار: <strong>${selectedSizeName} - ${formatPrice(selectedSizePrice)}</strong>`;
                    }
                });

                // Update main price display
                const currentPriceElement = document.querySelector('.current-price');
                if (currentPriceElement) {
                    currentPriceElement.textContent = formatPrice(selectedSizePrice);
                }
            }

            // Select flavor function
            function selectFlavor(flavorId) {
                if (!currentProduct || !currentProduct.flavors) return;

                currentProduct.selectedFlavor = flavorId;

                // Update flavor buttons
                document.querySelectorAll('.flavor-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                event.target.classList.add('selected');

                // Update selected flavor display
                const selectedFlavorName = currentProduct.flavors.find(f => f.id === flavorId)?.name || '';
                const displayElement = document.querySelector('.selected-flavor-display');
                if (displayElement) {
                    displayElement.innerHTML = `النكهة المختارة: <strong>${selectedFlavorName}</strong>`;
                }
            }

            // Order via WhatsApp
            function orderViaWhatsApp() {
                if (!currentProduct) return;

                const whatsappNumber = "201555037364";
                let productDetails = `
    مرحباً، أريد طلب المنتج التالي:

    📦 المنتج: ${currentProduct.name}
    💰 السعر: ${formatPrice(currentProduct.currentPrice)}
    🏷️ الفئة: ${currentProduct.category}`;

                // Add selected size if product has sizes
                if (currentProduct.sizes && currentProduct.selectedSize) {
                    const selectedSizeName = currentProduct.sizes.find(s => s.id === currentProduct.selectedSize)?.name;
                    const selectedSizePrice = currentProduct.sizes.find(s => s.id === currentProduct.selectedSize)?.price;
                    if (selectedSizeName) {
                        productDetails += `\n📏 الحجم المختار: ${selectedSizeName} - ${formatPrice(selectedSizePrice)}`;
                    }
                }

                // Add selected flavor if product has flavors
                if (currentProduct.flavors && currentProduct.selectedFlavor) {
                    const selectedFlavorName = currentProduct.flavors.find(f => f.id === currentProduct.selectedFlavor)?.name;
                    if (selectedFlavorName) {
                        productDetails += `\n🎨 النكهة المختارة: ${selectedFlavorName}`;
                    }
                }

                productDetails += `

    ${currentProduct.description}

    الميزات:
    ${currentProduct.features.map(feature => `• ${feature}`).join('\n')}

    هل المنتج متوفر؟
                `.trim();

                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(productDetails)}`;
                window.open(whatsappUrl, '_blank');
            }

            // Update Meta Tags for specific product
            function updateProductMetaTags(product) {
                const baseUrl = window.location.origin;
                const productUrl = `${baseUrl}${window.location.pathname}?product=${product.id}`;

                // Update Open Graph tags
                document.getElementById('dynamic-og-title').setAttribute('content', `${product.name} - Popeye Gym`);
                document.getElementById('dynamic-og-description').setAttribute('content', `${product.description} - السعر: ${formatPrice(product.currentPrice)} بدلاً من ${formatPrice(product.originalPrice)} (خصم ${product.discount}%)`);
                document.getElementById('dynamic-og-image').setAttribute('content', product.image ? `${baseUrl}/${product.image}` : `${baseUrl}/images/logo.png`);

                // Update Twitter Card tags
                document.getElementById('dynamic-twitter-title').setAttribute('content', `${product.name} - Popeye Gym`);
                document.getElementById('dynamic-twitter-description').setAttribute('content', `${product.description} - السعر: ${formatPrice(product.currentPrice)} بدلاً من ${formatPrice(product.originalPrice)} (خصم ${product.discount}%)`);
                document.getElementById('dynamic-twitter-image').setAttribute('content', product.image ? `${baseUrl}/${product.image}` : `${baseUrl}/images/logo.png`);

                // Update page URL in Open Graph
                document.querySelector('meta[property="og:url"]').setAttribute('content', productUrl);
            }

            // Copy product link
            function copyProductLink() {
                if (!currentProduct) return;

                const productUrl = `${window.location.origin}${window.location.pathname}?product=${currentProduct.id}`;

                if (navigator.clipboard) {
                    navigator.clipboard.writeText(productUrl).then(() => {
                        showSuccessMessage('تم نسخ الرابط بنجاح! الآن سيفتح المنتج تلقائياً عند زيارة الرابط');
                    }).catch(err => {
                        console.error('Failed to copy link:', err);
                        fallbackCopyText(productUrl);
                    });
                } else {
                    fallbackCopyText(productUrl);
                }
            }

            // Fallback copy function
            function fallbackCopyText(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showSuccessMessage('تم نسخ الرابط بنجاح!');
                } catch (err) {
                    console.error('Fallback copy failed:', err);
                }
                document.body.removeChild(textArea);
            }

            // Show success message
            function showSuccessMessage(message) {
                const modalBody = document.getElementById('modal-body-content');
                const successDiv = document.createElement('div');
                successDiv.className = 'success-message';
                successDiv.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    ${message}
                `;
                modalBody.insertBefore(successDiv, modalBody.firstChild);

                setTimeout(() => {
                    successDiv.remove();
                }, 3000);
            }

            // Handle keyboard events
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    closeCaloriesModal();
                    closeReportModal();
                }
            });



            // Check for product parameter in URL
            function checkProductParam() {
                const urlParams = new URLSearchParams(window.location.search);
                const productId = urlParams.get('product');
                const showPopeyeInfo = urlParams.get('showPopeyeInfo');
                const showCalorieCalculator = urlParams.get('showCalculator');
                const showReport = urlParams.get('showReport');
                const showDeveloper = urlParams.get('showDeveloper');

                if (productId) {
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        // Update Meta Tags immediately for direct links
                        updateProductMetaTags(product);
                        setTimeout(() => openModal(productId), 500);
                    }
                }

                if (showPopeyeInfo === 'true') {
                    setTimeout(() => showPopeyeInfo(), 500);
                }

                if (showCalorieCalculator === 'true') {
                    setTimeout(() => showUltraCaloriesCalculator(), 500);
                }

                if (showReport === 'true') {
                    setTimeout(() => showReportModal(), 500);
                }

                if (showDeveloper === 'true') {
                    setTimeout(() => showDeveloperInfo(), 500);
                }
            }

            // Food Calculator Functions
            let currentMealNumber = 1;
            let selectedFood = null;
            let mealData = {
                1: [],
                2: [],
                3: [],
                4: [],
                5: [],
                6: []
            };

            // Egyptian food database
            const foodDatabase = [
                // البروتينات
                { name: "صدر دجاج مسلوق", calories: 165, protein: 31, carbs: 0, fats: 3.6, category: "proteins" },
                { name: "لحم بقري مطهي", calories: 250, protein: 26, carbs: 0, fats: 15, category: "proteins" },
                { name: "سمك بلطي مشوي", calories: 128, protein: 26, carbs: 0, fats: 2.6, category: "proteins" },
                { name: "بيض مسلوق", calories: 155, protein: 13, carbs: 1.1, fats: 11, category: "proteins" },
                { name: "تونة مصفاة", calories: 128, protein: 25, carbs: 0, fats: 2.5, category: "proteins" },
                { name: "جبنة قريش", calories: 98, protein: 11, carbs: 3.4, fats: 4.3, category: "proteins" },
                { name: "واي بروتين", calories: 120, protein: 24, carbs: 3, fats: 1, category: "proteins" },

                // الكربوهيدرات
                { name: "أرز أبيض مسلوق", calories: 130, protein: 2.7, carbs: 28, fats: 0.3, category: "carbs" },
                { name: "خبز بلدي", calories: 265, protein: 9, carbs: 49, fats: 3.2, category: "carbs" },
                { name: "شوفان", calories: 389, protein: 17, carbs: 66, fats: 7, category: "carbs" },
                { name: "مكرونة مسلوقة", calories: 131, protein: 5, carbs: 25, fats: 1.1, category: "carbs" },
                { name: "بطاطس مسلوقة", calories: 87, protein: 2, carbs: 20, fats: 0.1, category: "carbs" },
                { name: "بطاطا مشوية", calories: 90, protein: 2, carbs: 21, fats: 0.1, category: "carbs" },

                // الفواكه
                { name: "موز", calories: 89, protein: 1.1, carbs: 23, fats: 0.3, category: "fruits" },
                { name: "تفاح", calories: 52, protein: 0.3, carbs: 14, fats: 0.2, category: "fruits" },
                { name: "برتقال", calories: 47, protein: 0.9, carbs: 12, fats: 0.1, category: "fruits" },
                { name: "عنب", calories: 62, protein: 0.6, carbs: 16, fats: 0.2, category: "fruits" },
                { name: "مانجو", calories: 60, protein: 0.8, carbs: 15, fats: 0.4, category: "fruits" },
                { name: "بلح", calories: 20, protein: 0.2, carbs: 5.3, fats: 0.03, category: "fruits" },

                // الخضروات
                { name: "خس", calories: 15, protein: 1.4, carbs: 2.9, fats: 0.2, category: "vegetables" },
                { name: "طماطم", calories: 18, protein: 0.9, carbs: 3.9, fats: 0.2, category: "vegetables" },
                { name: "خيار", calories: 16, protein: 0.7, carbs: 4, fats: 0.1, category: "vegetables" },
                { name: "جزر", calories: 41, protein: 0.9, carbs: 10, fats: 0.2, category: "vegetables" },
                { name: "بروكلي", calories: 34, protein: 2.8, carbs: 7, fats: 0.4, category: "vegetables" },
                { name: "فلفل ألوان", calories: 31, protein: 1, carbs: 7, fats: 0.3, category: "vegetables" },

                // الألبان
                { name: "لبن كامل الدسم", calories: 61, protein: 3.2, carbs: 4.8, fats: 3.3, category: "dairy" },
                { name: "لبن خالي الدسم", calories: 34, protein: 3.4, carbs: 5, fats: 0.1, category: "dairy" },
                { name: "زبادي طبيعي", calories: 59, protein: 3.5, carbs: 4.7, fats: 3.3, category: "dairy" },
                { name: "جبنة فيتا", calories: 75, protein: 4, carbs: 1.2, fats: 6, category: "dairy" },
                { name: "جبنة شيدر", calories: 113, protein: 7, carbs: 1, fats: 9, category: "dairy" },

                // المكسرات
                { name: "لوز", calories: 579, protein: 21, carbs: 22, fats: 50, category: "nuts" },
                { name: "عين جمل", calories: 654, protein: 15, carbs: 14, fats: 65, category: "nuts" },
                { name: "فول سوداني", calories: 567, protein: 26, carbs: 16, fats: 49, category: "nuts" },
                { name: "كاجو", calories: 553, protein: 18, carbs: 30, fats: 44, category: "nuts" },
                { name: "فستق", calories: 560, protein: 20, carbs: 28, fats: 45, category: "nuts" },

                // الزيوت والدهون
                { name: "زيت زيتون", calories: 884, protein: 0, carbs: 0, fats: 100, category: "oils" },
                { name: "زبدة", calories: 717, protein: 0.9, carbs: 0.1, fats: 81, category: "oils" },
                { name: "طحينة", calories: 595, protein: 18, carbs: 21, fats: 54, category: "oils" },
                { name: "أفوكادو", calories: 160, protein: 2, carbs: 9, fats: 15, category: "oils" },
                { name: "زيت عباد الشمس", calories: 884, protein: 0, carbs: 0, fats: 100, category: "oils" }
            ];

            function showFoodCaloriesCalculator() {
                const foodCaloriesModal = document.getElementById('food-calories-modal');
                const menuDropdown = document.getElementById('menu-dropdown');

                if (foodCaloriesModal) foodCaloriesModal.classList.remove('hidden');
                if (menuDropdown) menuDropdown.classList.add('hidden');
                updateDailyTotals();
            }

            function closeFoodCaloriesModal() {
                const foodCaloriesModal = document.getElementById('food-calories-modal');
                if (foodCaloriesModal) foodCaloriesModal.classList.add('hidden');
            }

            function showFoodModal(mealNumber) {
                currentMealNumber = mealNumber;
                const foodSelectionModal = document.getElementById('food-selection-modal');
                if (foodSelectionModal) foodSelectionModal.classList.remove('hidden');
                populateFoodList();
            }

            function closeFoodModal() {
                const foodSelectionModal = document.getElementById('food-selection-modal');
                const selectedFoodDetails = document.getElementById('selected-food-details');

                if (foodSelectionModal) foodSelectionModal.classList.add('hidden');
                selectedFood = null;
                if (selectedFoodDetails) selectedFoodDetails.classList.add('hidden');
            }

            function populateFoodList(category = 'all', searchTerm = '') {
                const foodList = document.getElementById('food-list');
                let filteredFoods = foodDatabase;

                if (category !== 'all') {
                    filteredFoods = filteredFoods.filter(food => food.category === category);
                }

                if (searchTerm) {
                    filteredFoods = filteredFoods.filter(food => 
                        food.name.includes(searchTerm)
                    );
                }

                foodList.innerHTML = '';
                filteredFoods.forEach(food => {
                    const foodElement = document.createElement('div');
                    foodElement.className = 'food-list-item';
                    foodElement.onclick = () => selectFood(food);
                    foodElement.innerHTML = `
                        <h5>${food.name}</h5>
                        <div class="nutrition-summary">
                            ${food.calories} سعرة | ${food.protein}جم بروتين | ${food.carbs}جم كارب | ${food.fats}جم دهون
                        </div>
                    `;
                    foodList.appendChild(foodElement);
                });
            }

            function selectFood(food) {
                selectedFood = food;

                // Update selected food details
                document.getElementById('selected-food-name').textContent = food.name;
                document.getElementById('selected-food-calories').textContent = food.calories;
                document.getElementById('selected-food-protein').textContent = food.protein + ' جم';
                document.getElementById('selected-food-carbs').textContent = food.carbs + ' جم';
                document.getElementById('selected-food-fats').textContent = food.fats + ' جم';

                document.getElementById('selected-food-details').classList.remove('hidden');

                // Highlight selected item
                document.querySelectorAll('.food-list-item').forEach(item => {
                    if (item && item.classList) {
                        item.classList.remove('selected');
                    }
                });
                const selectedItem = event.target.closest('.food-list-item');
                if (selectedItem && selectedItem.classList) {
                    selectedItem.classList.add('selected');
                }
            }

            function addFoodToMeal() {
                if (!selectedFood) return;

                const quantity = parseInt(document.getElementById('food-quantity').value) || 100;
                const multiplier = quantity / 100;

                const foodItem = {
                    name: selectedFood.name,
                    quantity: quantity,
                    calories: Math.round(selectedFood.calories * multiplier),
                    protein: Math.round(selectedFood.protein * multiplier * 10) / 10,
                    carbs: Math.round(selectedFood.carbs * multiplier * 10) / 10,
                    fats: Math.round(selectedFood.fats * multiplier * 10) / 10
                };

                mealData[currentMealNumber].push(foodItem);
                updateMealDisplay(currentMealNumber);
                updateDailyTotals();
                closeFoodModal();
            }

            function updateMealDisplay(mealNumber) {
                const mealFoodsContainer = document.getElementById(`meal-foods-${mealNumber}`);
                const mealTotalsContainer = document.getElementById(`meal-totals-${mealNumber}`);

                if (!mealFoodsContainer || !mealTotalsContainer) {
                    console.warn(`Meal containers not found for meal ${mealNumber}`);
                    return;
                }

                mealFoodsContainer.innerHTML = '';

                let mealCalories = 0, mealProtein = 0, mealCarbs = 0, mealFats = 0;

                mealData[mealNumber].forEach((food, index) => {
                    const foodElement = document.createElement('div');
                    foodElement.className = 'food-item';
                    foodElement.innerHTML = `
                        <div class="food-name">${food.name}</div>
                        <div class="food-quantity">${food.quantity}جم</div>
                        <div class="food-calories">${food.calories} سعرة</div>
                        <button class="remove-food-btn" onclick="removeFoodFromMeal(${mealNumber}, ${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    mealFoodsContainer.appendChild(foodElement);

                    mealCalories += food.calories;
                    mealProtein += food.protein;
                    mealCarbs += food.carbs;
                    mealFats += food.fats;
                });

                // Update meal totals
                const caloriesElement = mealTotalsContainer.querySelector('[data-type="calories"]');
                const proteinElement = mealTotalsContainer.querySelector('[data-type="protein"]');
                const carbsElement = mealTotalsContainer.querySelector('[data-type="carbs"]');
                const fatsElement = mealTotalsContainer.querySelector('[data-type="fats"]');

                if (caloriesElement) caloriesElement.textContent = mealCalories;
                if (proteinElement) proteinElement.textContent = Math.round(mealProtein * 10) / 10;
                if (carbsElement) carbsElement.textContent = Math.round(mealCarbs * 10) / 10;
                if (fatsElement) fatsElement.textContent = Math.round(mealFats * 10) / 10;
            }

            function removeFoodFromMeal(mealNumber, foodIndex) {
                mealData[mealNumber].splice(foodIndex, 1);
                updateMealDisplay(mealNumber);
                updateDailyTotals();
            }

            function updateDailyTotals() {
                let totalCalories = 0, totalProtein = 0, totalCarbs = 0, totalFats = 0;

                for (let meal = 1; meal <= 6; meal++) {
                    mealData[meal].forEach(food => {
                        totalCalories += food.calories;
                        totalProtein += food.protein;
                        totalCarbs += food.carbs;
                        totalFats += food.fats;
                    });
                }

                const dailyCaloriesElement = document.getElementById('daily-calories');
                const dailyProteinElement = document.getElementById('daily-protein');
                const dailyCarbsElement = document.getElementById('daily-carbs');
                const dailyFatsElement = document.getElementById('daily-fats');

                if (dailyCaloriesElement) dailyCaloriesElement.textContent = totalCalories;
                if (dailyProteinElement) dailyProteinElement.textContent = Math.round(totalProtein * 10) / 10 + ' جم';
                if (dailyCarbsElement) dailyCarbsElement.textContent = Math.round(totalCarbs * 10) / 10 + ' جم';
                if (dailyFatsElement) dailyFatsElement.textContent = Math.round(totalFats * 10) / 10 + ' جم';
            }

            function clearAllMeals() {
                for (let meal = 1; meal <= 6; meal++) {
                    mealData[meal] = [];
                    updateMealDisplay(meal);
                }
                updateDailyTotals();
                hideClearMealsConfirmation();
            }

            function showClearMealsConfirmation() {
                document.getElementById('clear-meals-confirmation').classList.remove('hidden');
            }

            function hideClearMealsConfirmation() {
                document.getElementById('clear-meals-confirmation').classList.add('hidden');
            }

            // Modern validation warning system
            function showValidationWarning(message) {
                // Remove existing warnings
                const existingWarning = document.getElementById('validation-warning');
                if (existingWarning) {
                    existingWarning.remove();
                }

                // Create warning element
                const warning = document.createElement('div');
                warning.id = 'validation-warning';
                warning.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    background: linear-gradient(135deg, #f39c12, #e67e22);
                    color: white;
                    padding: 16px 24px;
                    border-radius: 12px;
                    box-shadow: 0 8px 20px rgba(243, 156, 18, 0.3);
                    font-size: 16px;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    min-width: 300px;
                    max-width: 400px;
                    transform: translateX(100%);
                    transition: transform 0.4s ease, opacity 0.4s ease;
                    opacity: 0;
                `;

                warning.innerHTML = `
                    <div style="background: rgba(255, 255, 255, 0.2); padding: 8px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 18px;"></i>
                    </div>
                    <div style="flex: 1;">${message}</div>
                    <button onclick="hideValidationWarning()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer; padding: 0; opacity: 0.8;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                document.body.appendChild(warning);

                // Animate in
                setTimeout(() => {
                    warning.style.transform = 'translateX(0)';
                    warning.style.opacity = '1';
                }, 100);

                // Auto hide after 5 seconds
                setTimeout(() => {
                    hideValidationWarning();
                }, 5000);
            }

            function hideValidationWarning() {
                const warning = document.getElementById('validation-warning');
                if (warning) {
                    warning.style.transform = 'translateX(100%)';
                    warning.style.opacity = '0';
                    setTimeout(() => {
                        warning.remove();
                    }, 400);
                }
            }




            function shareFoodCalculator() {
                if (navigator.share) {
                    navigator.share({
                        title: 'حاسبة سعرات الطعام - Popeye Gym',
                        text: 'احسب سعرات طعامك اليومي بدقة مع حاسبة Popeye Gym المتطورة',
                        url: window.location.href + '?showFoodCalculator=true'
                    });
                } else {
                    const url = window.location.href + '?showFoodCalculator=true';
                    navigator.clipboard.writeText(url).then(() => {
                        alert('تم نسخ رابط الحاسبة!');
                    });
                }
            }

            // Download Food Calories Results as Image
            function downloadFoodCaloriesResults() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                // Set canvas dimensions for mobile-friendly format
                canvas.width = 800;
                canvas.height = 1000;

                // Get current food calories data
                const dailyCalories = document.getElementById('daily-calories')?.textContent || '0';
                const dailyProtein = document.getElementById('daily-protein')?.textContent || '0 جم';
                const dailyCarbs = document.getElementById('daily-carbs')?.textContent || '0 جم';
                const dailyFats = document.getElementById('daily-fats')?.textContent || '0 جم';

                const foodData = {
                    calories: dailyCalories,
                    protein: dailyProtein.replace(' جم', ''),
                    carbs: dailyCarbs.replace(' جم', ''),
                    fats: dailyFats.replace(' جم', ''),
                    totalMeals: getTotalMealsCount()
                };

                createFoodCaloriesImage(ctx, canvas, foodData);
                downloadCanvasAsImage(canvas, 'popeye-gym-food-calories-results.png');
            }

            // Create premium food calories results image
            function createFoodCaloriesImage(ctx, canvas, data) {
                const width = canvas.width;
                const height = canvas.height;

                // Background gradient
                const gradient = ctx.createLinearGradient(0, 0, width, height);
                gradient.addColorStop(0, '#dc3545');
                gradient.addColorStop(1, '#c82333');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);

                // Draw header with logo
                drawFoodCaloriesHeader(ctx, width);

                // Draw main results
                const results = [
                    { icon: '🔥', label: 'السعرات الإجمالية', value: data.calories, unit: 'سعرة حرارية', color: '#dc3545' },
                    { icon: '💪', label: 'البروتين', value: data.protein, unit: 'جرام', color: '#28a745' },
                    { icon: '🍞', label: 'الكربوهيدرات', value: data.carbs, unit: 'جرام', color: '#ffc107' },
                    { icon: '🥑', label: 'الدهون', value: data.fats, unit: 'جرام', color: '#17a2b8' }
                ];

                const cardWidth = 160;
                const cardHeight = 140;
                const startX = (width - (2 * cardWidth + 20)) / 2;
                let startY = 280;

                // Draw results in 2x2 grid
                results.forEach((result, index) => {
                    const row = Math.floor(index / 2);
                    const col = index % 2;
                    const x = startX + col * (cardWidth + 20);
                    const y = startY + row * (cardHeight + 30);

                    drawFoodResultCard(ctx, x, y, cardWidth, cardHeight, result);
                });

                // Draw additional info section
                drawFoodAdditionalInfo(ctx, width, height, data);

                // Draw footer
                drawFoodCaloriesFooter(ctx, width, height);
            }

            // Draw food calories header with logo
            function drawFoodCaloriesHeader(ctx, canvasWidth) {
                // Header background with pattern
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, canvasWidth, 200);

                // Logo section - draw Popeye Gym logo instead of "PG"
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.beginPath();
                ctx.arc(100, 100, 40, 0, 2 * Math.PI);
                ctx.fill();

                // Logo - using Popeye character emoji instead of letters
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('💪', 100, 110);

                // Add "Popeye Gym" text near logo
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('Popeye', 100, 130);
                ctx.fillText('Gym', 100, 148);

                // Main title
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج حاسبة سعرات الطعام', canvasWidth / 2, 80);

                // Subtitle
                ctx.font = '18px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText('تحليل يومي شامل للمأكولات والمغذيات', canvasWidth / 2, 110);

                // Date stamp
                const currentDate = new Date().toLocaleDateString('ar-EG');
                ctx.font = '14px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.fillText(`التاريخ: ${currentDate}`, canvasWidth / 2, 140);
            }

            // Draw food result card
            function drawFoodResultCard(ctx, x, y, width, height, result) {
                // Card shadow
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(x + 3, y + 3, width, height);

                // Card background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.fillRect(x, y, width, height);

                // Card border
                ctx.strokeStyle = result.color;
                ctx.lineWidth = 3;
                ctx.strokeRect(x, y, width, height);

                // Icon
                ctx.font = '36px Arial';
                ctx.textAlign = 'center';
                ctx.fillStyle = result.color;
                ctx.fillText(result.icon, x + width/2, y + 45);

                // Label
                ctx.font = '16px Arial';
                ctx.fillStyle = '#6c757d';
                ctx.fillText(result.label, x + width/2, y + 75);

                // Value
                ctx.font = 'bold 28px Arial';
                ctx.fillStyle = '#2c3e50';
                ctx.fillText(result.value, x + width/2, y + 105);

                // Unit
                ctx.font = '12px Arial';
                ctx.fillStyle = '#6c757d';
                ctx.fillText(result.unit, x + width/2, y + 125);
            }

            // Draw additional food info
            function drawFoodAdditionalInfo(ctx, width, height, data) {
                const infoY = height - 200;

                // Info section background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.fillRect(50, infoY, width - 100, 120);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 18px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('معلومات إضافية', width / 2, infoY + 25);

                ctx.font = '14px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText(`عدد الوجبات المسجلة: ${data.totalMeals}`, width / 2, infoY + 50);
                ctx.fillText('تم الحساب وفقاً للقيم الغذائية المعتمدة', width / 2, infoY + 75);
                ctx.fillText('🌟 Popeye Gym - خبراء التغذية واللياقة 🌟', width / 2, infoY + 100);
            }

            // Draw food calories footer
            function drawFoodCaloriesFooter(ctx, canvasWidth, canvasHeight) {
                const footerY = canvasHeight - 80;

                // Footer background
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(0, footerY, canvasWidth, 80);

                // Contact info
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Popeye Gym - الجماليه', canvasWidth / 2, footerY + 25);

                ctx.font = '14px Arial';
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.fillText('📍 خلف مطعم شيخ الحاره', canvasWidth / 2, footerY + 45);
                ctx.fillText('📱 واتساب: 01555037364', canvasWidth / 2, footerY + 65);
            }

            // Helper function to count total meals
            function getTotalMealsCount() {
                let totalMeals = 0;
                for (let meal = 1; meal <= 6; meal++) {
                    if (mealData[meal] && mealData[meal].length > 0) {
                        totalMeals++;
                    }
                }
                return totalMeals;
            }

            // Food search and category filters
            document.addEventListener('DOMContentLoaded', function() {
                // Search functionality
                const searchInput = document.getElementById('food-search');
                if (searchInput) {
                    searchInput.addEventListener('input', function() {
                        const activeCategory = document.querySelector('.category-btn.active')?.dataset.category || 'all';
                        populateFoodList(activeCategory, this.value);
                    });
                }

                // Category buttons
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        const searchTerm = document.getElementById('food-search')?.value || '';
                        populateFoodList(this.dataset.category, searchTerm);
                    });
                });
            });

            // Initialize the page
            document.addEventListener('DOMContentLoaded', function() {
                renderProducts();
                checkProductParam();
            });
            // Body Fat Calculator Functions
            function showBodyFatCalculator() {
                const bodyFatModal = document.getElementById('body-fat-modal');
                const menuDropdown = document.getElementById('menu-dropdown');
                if (bodyFatModal) bodyFatModal.classList.remove('hidden');
                if (menuDropdown) menuDropdown.classList.add('hidden');
                updateBodyFatFields();
            }

            function closeBodyFatModal() {
                const bodyFatModal = document.getElementById('body-fat-modal');
                if (bodyFatModal) bodyFatModal.classList.add('hidden');
                showBodyFatInputPage();
            }

            function showBodyFatInputPage() {
                const bodyFatInputPage = document.getElementById('bodyFatInputPage');
                const bodyFatResultsPage = document.getElementById('bodyFatResultsPage');
                if (bodyFatInputPage) bodyFatInputPage.classList.add('active');
                if (bodyFatResultsPage) bodyFatResultsPage.classList.remove('active');
            }

            function showBodyFatResultsPage() {
                const bodyFatInputPage = document.getElementById('bodyFatInputPage');
                const bodyFatResultsPage = document.getElementById('bodyFatResultsPage');
                if (bodyFatInputPage) bodyFatInputPage.classList.remove('active');
                if (bodyFatResultsPage) bodyFatResultsPage.classList.add('active');
            }

            function updateBodyFatFields() {
                const gender = document.getElementById('bf-gender').value;
                const hipsGroup = document.getElementById('bf-hips-group');
                const hipsInput = document.getElementById('bf-hips');

                if (gender === 'male') {
                    hipsGroup.style.display = 'none';
                    hipsInput.required = false;
                } else {
                    hipsGroup.style.display = 'block';
                    hipsInput.required = true;
                }
            }

            function calculateBodyFat() {
                console.log('🧮 بدء حساب نسبة الدهون...');

                const gender = document.getElementById('bf-gender').value;
                const weight = parseFloat(document.getElementById('bf-weight').value);
                const height = parseFloat(document.getElementById('bf-height').value);
                const neck = parseFloat(document.getElementById('bf-neck').value);
                const waist = parseFloat(document.getElementById('bf-waist').value);
                const hips = parseFloat(document.getElementById('bf-hips').value);

                console.log('📊 البيانات المدخلة:', { gender, weight, height, neck, waist, hips });

                // Validation
                if (!weight || !height || !neck || !waist) {
                    console.log('❌ خطأ: بيانات ناقصة');
                    showValidationWarning('يرجى إدخال جميع القيم المطلوبة لحساب نسبة دهون الجسم');
                    return;
                }

                if (gender === 'female' && !hips) {
                    console.log('❌ خطأ: قياس المؤخرة مطلوب للنساء');
                    showValidationWarning('يرجى إدخال قياس المؤخرة للنساء');
                    return;
                }

                let bodyFatPercentage;

                // US Navy Formula
                if (gender === 'male') {
                    // Male formula: 495 / (1.0324 - 0.19077 * log10(waist - neck) + 0.15456 * log10(height)) - 450
                    bodyFatPercentage = 495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(height)) - 450;
                } else {
                    // Female formula: 495 / (1.29579 - 0.35004 * log10(waist + hips - neck) + 0.22100 * log10(height)) - 450
                    bodyFatPercentage = 495 / (1.29579 - 0.35004 * Math.log10(waist + hips - neck) + 0.22100 * Math.log10(height)) - 450;
                }

                // Ensure reasonable bounds
                bodyFatPercentage = Math.max(0, Math.min(50, bodyFatPercentage));

                // Calculate fat weight and lean mass
                const fatWeight = (bodyFatPercentage / 100) * weight;
                const leanMass = weight - fatWeight;

                console.log('📈 النتائج المحسوبة:', { bodyFatPercentage, fatWeight, leanMass });

                // Display results
                document.getElementById('bf-percentage').textContent = bodyFatPercentage.toFixed(1);
                document.getElementById('bf-fat-weight').textContent = fatWeight.toFixed(1);
                document.getElementById('bf-lean-mass').textContent = leanMass.toFixed(1);

                // Body fat category
                const category = getBodyFatCategory(bodyFatPercentage, gender);
                document.getElementById('bf-category').textContent = category.name;
                document.getElementById('bf-category').style.color = category.color;

                // Info text
                document.getElementById('bf-info-text').textContent = category.info;

                console.log('✅ تم عرض النتائج بنجاح');
                showBodyFatResultsPage();
            }

            function getBodyFatCategory(percentage, gender) {
                if (gender === 'male') {
                    if (percentage < 6) return { name: 'نحيف جداً', color: '#0066cc', info: 'نسبة دهون منخفضة جداً - قد تكون غير صحية' };
                    if (percentage < 14) return { name: 'رياضي', color: '#28a745', info: 'نسبة دهون ممتازة للرياضيين' };
                    if (percentage < 18) return { name: 'لائق بدنياً', color: '#ffc107', info: 'نسبة دهون صحية وجيدة' };
                    if (percentage < 25) return { name: 'متوسط', color: '#fd7e14', info: 'نسبة دهون ضمن المعدل الطبيعي' };
                    return { name: 'زائد الوزن', color: '#dc3545', info: 'نسبة دهون مرتفعة - يُنصح بالتمارين والحمية' };
                } else {
                    if (percentage < 16) return { name: 'نحيفة جداً', color: '#0066cc', info: 'نسبة دهون منخفضة جداً - قد تكون غير صحية' };
                    if (percentage < 20) return { name: 'رياضية', color: '#28a745', info: 'نسبة دهون ممتازة للرياضيات' };
                    if (percentage < 25) return { name: 'لائقة بدنياً', color: '#ffc107', info: 'نسبة دهون صحية وجيدة' };
                    if (percentage < 32) return { name: 'متوسط', color: '#fd7e14', info: 'نسبة دهون ضمن المعدل الطبيعي' };
                    return { name: 'زائدة الوزن', color: '#dc3545', info: 'نسبة دهون مرتفعة - يُنصح بالتمارين والحمية' };
                }
            }

            function shareBodyFatCalculator() {
                const percentage = document.getElementById('bf-percentage').textContent;
                const fatWeight = document.getElementById('bf-fat-weight').textContent;
                const leanMass = document.getElementById('bf-lean-mass').textContent;

                const shareData = {
                    title: 'حاسبة نسبة الدهون في الجسم - Popeye Gym',
                    text: `🔥 تحليل نسبة الدهون في جسمي:

📊 نسبة الدهون: ${percentage}%
⚖️ وزن الدهون: ${fatWeight} كجم
💪 الكتلة اللادهنية: ${leanMass} كجم

احسب نسبة الدهون في جسمك مع حاسبة Popeye Gym المتطورة! 💪

#PopeyeGym #BodyFat #Fitness #صحة #رياضة`,
                    url: window.location.href
                };

                if (navigator.share) {
                    navigator.share(shareData).catch(console.error);
                } else {
                    // Fallback for browsers without native sharing
                    const text = shareData.text + '\n\n' + shareData.url;

                    // Try to copy to clipboard
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(text).then(() => {
                            alert('تم نسخ النتائج إلى الحافظة!');
                        }).catch(() => {
                            // Fallback to manual copy
                            const textarea = document.createElement('textarea');
                            textarea.value = text;
                            document.body.appendChild(textarea);
                            textarea.select();
                            document.execCommand('copy');
                            document.body.removeChild(textarea);
                            alert('تم نسخ النتائج إلى الحافظة!');
                        });
                    } else {
                        alert('يرجى نسخ النتائج يدوياً:\n\n' + text);
                    }
                }
            }


            // Energy Requirements Calculator Functions
            function showEnergyCalculator() {
                document.getElementById('energy-calculator-modal').classList.remove('hidden');
                document.getElementById('menu-dropdown').classList.add('hidden');
                updateEnergyFormulaFields();
            }

            function closeEnergyCalculatorModal() {
                document.getElementById('energy-calculator-modal').classList.add('hidden');
                showEnergyInputPage();
            }

            function showEnergyInputPage() {
                document.getElementById('energyInputPage').classList.add('active');
                document.getElementById('energyResultsPage').classList.remove('active');
            }

            function showEnergyResultsPage() {
                document.getElementById('energyInputPage').classList.remove('active');
                document.getElementById('energyResultsPage').classList.add('active');
            }

            function updateEnergyFormulaFields() {
                const formula = document.getElementById('energy-formula').value;
                const bodyFatInput = document.getElementById('body-fat-input');

                if (formula === 'katch') {
                    bodyFatInput.style.display = 'block';
                    document.getElementById('energy-bodyfat').required = true;
                } else {
                    bodyFatInput.style.display = 'none';
                    document.getElementById('energy-bodyfat').required = false;
                }
            }

            // Add event listener for formula change
            document.addEventListener('DOMContentLoaded', function() {
                const formulaSelect = document.getElementById('energy-formula');
                if (formulaSelect) {
                    formulaSelect.addEventListener('change', updateEnergyFormulaFields);
                }
            });

            function calculateEnergyRequirements() {
                const gender = document.getElementById('energy-gender').value;
                const age = parseInt(document.getElementById('energy-age').value);
                const weight = parseFloat(document.getElementById('energy-weight').value);
                const height = parseFloat(document.getElementById('energy-height').value);
                const formula = document.getElementById('energy-formula').value;
                const activity = document.getElementById('energy-activity').value;
                const bodyFat = parseFloat(document.getElementById('energy-bodyfat').value);

                // Validation
                if (!age || !weight || !height) {
                    showValidationWarning('يرجى إدخال جميع القيم المطلوبة لحساب احتياجاتك من الطاقة');
                    return;
                }

                if (formula === 'katch' && !bodyFat) {
                    showValidationWarning('يرجى إدخال نسبة الدهون لاستخدام معادلة كاتش ماكردل');
                    return;
                }

                let bmr;
                let formulaName;

                // Calculate BMR based on selected formula
                switch (formula) {
                    case 'mifflin':
                        // Mifflin-St Jeor Equation
                        if (gender === 'male') {
                            bmr = 10 * weight + 6.25 * height - 5 * age + 5;
                        } else {
                            bmr = 10 * weight + 6.25 * height - 5 * age - 161;
                        }
                        formulaName = 'ميفلين سانت جوير';
                        break;

                    case 'harris':
                        // Harris-Benedict Equation (Revised)
                        if (gender === 'male') {
                            bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                        } else {
                            bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                        }
                        formulaName = 'هاريس بندكت';
                        break;

                    case 'katch':
                        // Katch-McArdle Formula
                        const leanMass = weight * (1 - bodyFat / 100);
                        bmr = 370 + (21.6 * leanMass);
                        formulaName = 'كاتش ماكردل';
                        break;

                    default:
                        bmr = 0;
                        formulaName = 'غير محدد';
                }

                // Activity multipliers
                const activityMultipliers = {
                    bmr: 1.0,
                    sedentary: 1.2,
                    light: 1.375,
                    moderate: 1.55,
                    high: 1.725,
                    extreme: 1.9
                };

                const activityNames = {
                    bmr: 'معدل الأيض الأساسي',
                    sedentary: 'خامل',
                    light: 'نشاط خفيف',
                    moderate: 'نشاط متوسط',
                    high: 'نشاط عالي',
                    extreme: 'نشاط شديد'
                };

                const multiplier = activityMultipliers[activity] || 1.0;
                const tdee = bmr * multiplier;

                // Calculate goals
                const weightLoss = Math.round(tdee - 500); // 500 cal deficit for weight loss
                const maintainWeight = Math.round(tdee);
                const weightGain = Math.round(tdee + 500); // 500 cal surplus for weight gain

                // Display results
                document.getElementById('bmr-value').textContent = Math.round(bmr);
                document.getElementById('tdee-value').textContent = Math.round(tdee);
                document.getElementById('formula-used').textContent = formulaName;
                document.getElementById('activity-level').textContent = activityNames[activity];
                document.getElementById('weight-loss').textContent = weightLoss;
                document.getElementById('maintain-weight').textContent = maintainWeight;
                document.getElementById('weight-gain').textContent = weightGain;

                // Update info text based on formula
                const infoTexts = {
                    mifflin: 'معادلة ميفلين سانت جوير هي الأكثر دقة للأشخاص العاديين. تُعتبر المعيار الذهبي لحساب معدل الأيض الأساسي.',
                    harris: 'معادلة هاريس بندكت المُحدثة. مناسبة للاستخدام العام ولكن قد تكون أقل دقة من ميفلين سانت جوير.',
                    katch: 'معادلة كاتش ماكردل تعتمد على الكتلة اللادهنية. الأكثر دقة للرياضيين والأشخاص ذوي نسبة الدهون المنخفضة.'
                };

                document.getElementById('energy-info-text').textContent = infoTexts[formula] + ' النتائج تقديرية وقد تختلف حسب عوامل فردية.';

                showEnergyResultsPage();
            }

            function shareEnergyCalculator() {
                const bmr = document.getElementById('bmr-value').textContent;
                const tdee = document.getElementById('tdee-value').textContent;
                const formula = document.getElementById('formula-used').textContent;
                const activity = document.getElementById('activity-level').textContent;
                const weightLoss = document.getElementById('weight-loss').textContent;
                const maintainWeight = document.getElementById('maintain-weight').textContent;
                const weightGain = document.getElementById('weight-gain').textContent;

                const shareData = {
                    title: 'حساب الاحتياجات من الطاقة - Popeye Gym',
                    text: `⚡ نتائج حساب الاحتياجات من الطاقة:

💓 معدل الأيض الأساسي: ${bmr} سعرة حرارية
🔥 إجمالي الطاقة المطلوبة: ${tdee} سعرة حرارية
📊 المعادلة: ${formula}
🏃‍♂️ مستوى النشاط: ${activity}

🎯 الاحتياجات حسب الهدف:
📉 فقدان الوزن: ${weightLoss} سعرة حرارية
⚖️ الحفاظ على الوزن: ${maintainWeight} سعرة حرارية
📈 زيادة الوزن: ${weightGain} سعرة حرارية

احسب احتياجاتك من الطاقة مع حاسبة Popeye Gym المتطورة! 💪

#PopeyeGym #BMR #TDEE #Nutrition #صحة #رياضة`,
                    url: window.location.href
                };

                if (navigator.share) {
                    navigator.share(shareData).catch(console.error);
                } else {
                    // Fallback for browsers without native sharing
                    const text = shareData.text + '\n\n' + shareData.url;

                    // Try to copy to clipboard
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(text).then(() => {
                            alert('تم نسخ النتائج إلى الحافظة!');
                        }).catch(() => {
                            // Fallback to manual copy
                            const textarea = document.createElement('textarea');
                            textarea.value = text;
                            document.body.appendChild(textarea);
                            textarea.select();
                            document.execCommand('copy');
                            document.body.removeChild(textarea);
                            alert('تم نسخ النتائج إلى الحافظة!');
                        });
                    } else {
                        alert('يرجى نسخ النتائج يدوياً:\n\n' + text);
                    }
                }
            }


            // Water Calculator Functions
            function showWaterCalculator() {
                document.getElementById('water-calculator-modal').classList.remove('hidden');
                document.getElementById('menu-dropdown').classList.add('hidden');
            }

            function closeWaterCalculatorModal() {
                document.getElementById('water-calculator-modal').classList.add('hidden');
                showWaterInputPage();
            }

            function showWaterInputPage() {
                document.getElementById('waterInputPage').classList.add('active');
                document.getElementById('waterResultsPage').classList.remove('active');
            }

            function showWaterResultsPage() {
                document.getElementById('waterInputPage').classList.remove('active');
                document.getElementById('waterResultsPage').classList.add('active');
            }

            function calculateWaterNeeds() {
                const gender = document.getElementById('water-gender').value;
                const age = parseInt(document.getElementById('water-age').value);
                const weight = parseFloat(document.getElementById('water-weight').value);
                const height = parseFloat(document.getElementById('water-height').value);
                const activity = document.getElementById('water-activity').value;
                const exerciseDuration = parseInt(document.getElementById('water-exercise-duration').value) || 0;
                const exerciseIntensity = document.getElementById('water-exercise-intensity').value;
                const climate = document.getElementById('water-climate').value;
                const humidity = document.getElementById('water-humidity').value;
                const pregnancy = document.getElementById('water-pregnancy').value;
                const illness = document.getElementById('water-illness').value;
                const caffeine = parseInt(document.getElementById('water-caffeine').value) || 0;

                // Validation
                if (!age || !weight || !height) {
                    showValidationWarning('يرجى إدخال جميع القيم المطلوبة لحساب احتياجاتك من الماء');
                    return;
                }

                // Base water needs calculation
                let baseWater = 0;

                // Method 1: Based on weight (35ml per kg)
                baseWater = weight * 0.035;

                // Adjust for gender and age
                if (gender === 'female') {
                    baseWater *= 0.95; // Females need slightly less
                }

                if (age > 65) {
                    baseWater *= 0.9; // Older adults need less
                } else if (age < 18) {
                    baseWater *= 1.1; // Young people need more
                }

                // Activity adjustments
                let exerciseWater = 0;
                const activityMultipliers = {
                    light: 0.3,
                    moderate: 0.5,
                    high: 0.7,
                    extreme: 1.0
                };

                exerciseWater = baseWater * activityMultipliers[activity];

                // Additional water for specific exercise duration
                if (exerciseDuration > 0) {
                    const intensityMultipliers = {
                        low: 0.003,
                        moderate: 0.005,
                        high: 0.007
                    };
                    exerciseWater += exerciseDuration * intensityMultipliers[exerciseIntensity];
                }

                // Climate adjustments
                let climateWater = 0;
                const climateMultipliers = {
                    'cold': -0.1,
                    'temperate': 0,
                    'hot': 0.3,
                    'very-hot': 0.5
                };

                climateWater = baseWater * climateMultipliers[climate];

                // Humidity adjustments
                const humidityMultipliers = {
                    low: 0.1,
                    moderate: 0,
                    high: -0.05
                };
                climateWater += baseWater * humidityMultipliers[humidity];



                // Health condition adjustments
                let additionalWater = 0;

                // Pregnancy and breastfeeding
                if (pregnancy === 'pregnant') {
                    additionalWater += 0.3;
                } else if (pregnancy === 'breastfeeding') {
                    additionalWater += 0.7;
                }

                // Illness adjustments
                if (illness === 'fever') {
                    additionalWater += 0.5;
                } else if (illness === 'diarrhea') {
                    additionalWater += 0.7;
                } else if (illness === 'kidney') {
                    additionalWater += 0.3;
                }

                // Caffeine adjustment (each cup needs extra 150ml)
                additionalWater += caffeine * 0.15;

                // Total water calculation
                const totalWater = baseWater + exerciseWater + climateWater + additionalWater;

                // Display results
                document.getElementById('daily-water').textContent = totalWater.toFixed(1);
                document.getElementById('water-glasses').textContent = Math.round(totalWater * 4); // 250ml glasses
                document.getElementById('water-bottles').textContent = Math.round(totalWater * 2); // 500ml bottles
                document.getElementById('hourly-water').textContent = Math.round((totalWater * 1000) / 16); // 16 waking hours

                // Breakdown
                document.getElementById('basic-water').textContent = baseWater.toFixed(1);
                document.getElementById('exercise-water').textContent = exerciseWater.toFixed(1);
                document.getElementById('climate-water').textContent = climateWater.toFixed(1);
                document.getElementById('additional-water').textContent = additionalWater.toFixed(1);

                // Generate drinking schedule
                generateWaterSchedule(totalWater);

                showWaterResultsPage();
            }

            function generateWaterSchedule(totalWater) {
                const waterPerHour = (totalWater * 1000) / 16; // 16 waking hours
                const schedule = [];

                // Morning boost
                schedule.push('🌅 عند الاستيقاظ: كوبين من الماء (500مل)');

                // Throughout the day
                for (let hour = 8; hour <= 22; hour += 2) {
                    const amount = Math.round(waterPerHour * 2);
                    const timeStr = hour > 12 ? `${hour - 12}:00 م` : `${hour}:00 ص`;
                    schedule.push(`🕐 ${timeStr}: ${amount}مل`);
                }

                // Before meals
                schedule.push('🍽️ قبل الوجبات: كوب من الماء (250مل)');

                // After exercise
                schedule.push('🏃‍♂️ بعد التمرين: كوبين إضافيين (500مل)');

                // Evening
                schedule.push('🌙 قبل النوم بساعة: كوب من الماء (250مل)');

                document.getElementById('schedule-content').innerHTML = schedule.join('<br>');
            }

            function shareWaterCalculator() {
                const dailyWater = document.getElementById('daily-water').textContent;
                const glasses = document.getElementById('water-glasses').textContent;
                const bottles = document.getElementById('water-bottles').textContent;
                const hourly = document.getElementById('hourly-water').textContent;
                const basic = document.getElementById('basic-water').textContent;
                const exercise = document.getElementById('exercise-water').textContent;
                const climate = document.getElementById('climate-water').textContent;
                const additional = document.getElementById('additional-water').textContent;

                const gender = document.getElementById('water-gender').value === 'male' ? 'رجل' : 'امرأة';
                const age = document.getElementById('water-age').value;
                const weight = document.getElementById('water-weight').value;

                const shareData = {
                    title: 'حساب كمية الماء المطلوبة - Popeye Gym',
                    text: `💧 نتائج حساب كمية الماء اليومية:

👤 البيانات: ${gender} - ${age} سنة - ${weight} كجم

💧 كمية الماء اليومية: ${dailyWater} لتر
🥤 عدد الأكواب: ${glasses} كوب
🍼 زجاجات الماء: ${bottles} زجاجة
⏰ كل ساعة: ${hourly} مل

📊 تفصيل الاحتياجات:
👤 الاحتياج الأساسي: ${basic} لتر
🏃‍♂️ للنشاط البدني: ${exercise} لتر
🌡️ للمناخ: ${climate} لتر
➕ إضافات أخرى: ${additional} لتر

احسب احتياجاتك من الماء مع حاسبة Popeye Gym المتطورة! 💪

#PopeyeGym #Water #Hydration #صحة #رياضة #ماء`,
                    url: window.location.href
                };

                if (navigator.share) {
                    navigator.share(shareData).catch(console.error);
                } else {
                    // Fallback for browsers without native sharing
                    const text = shareData.text + '\n\n' + shareData.url;

                    // Try to copy to clipboard
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(text).then(() => {
                            alert('تم نسخ النتائج إلى الحافظة!');
                        }).catch(() => {
                            // Fallback to manual copy
                            const textarea = document.createElement('textarea');
                            textarea.value = text;
                            document.body.appendChild(textarea);
                            textarea.select();
                            document.execCommand('copy');
                            document.body.removeChild(textarea);
                            alert('تم نسخ النتائج إلى الحافظة!');
                        });
                    } else {
                        alert('يرجى نسخ النتائج يدوياً:\n\n' + text);
                    }
                }
            }




            // Location Modal Functions
            function openLocationModal() {
                const modal = document.createElement('div');
                modal.id = 'location-modal';
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content report-modal">
                        <div class="modal-header">
                            <h2>موقع الجيم</h2>
                            <button class="close-btn" onclick="closeLocationModal()">&times;</button>
                        </div>
                        <div class="report-form">
                            <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #dc3545, #b02030); border-radius: 15px; margin-bottom: 2rem; color: white;">
                                <div style="font-size: 4rem; margin-bottom: 1rem;">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <h3 style="margin: 0 0 0.5rem 0; font-size: 1.8rem; font-weight: 700;">موقع Popeye Gym</h3>
                                <p style="margin: 0; font-size: 1.1rem; opacity: 0.9;">الجماليه - خلف مطعم شيخ الحاره</p>
                            </div>

                            <div style="background: rgba(231, 76, 60, 0.05); padding: 1.5rem; border-radius: 12px; border-right: 4px solid #dc3545; margin-bottom: 1.5rem;">
                                <h4 style="color: #dc3545; margin-bottom: 1rem; font-size: 1.2rem;">
                                    <i class="fas fa-info-circle" style="margin-left: 0.5rem;"></i>
                                    معلومات الموقع
                                </h4>
                                <ul style="list-style: none; padding: 0; margin: 0;">
                                    <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; border-bottom: 1px solid rgba(231, 76, 60, 0.1);">
                                        <i class="fas fa-location-arrow" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                        الجماليه - خلف مطعم شيخ الحاره
                                    </li>
                                    <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; border-bottom: 1px solid rgba(231, 76, 60, 0.1);">
                                        <i class="fas fa-clock" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                        مفتوح يومياً
                                    </li>
                                    <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">
                                        <i class="fas fa-phone" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                        للاستفسارات: اتصل بنا
                                    </li>
                                </ul>
                            </div>

                            <div class="form-actions">
                                <button class="btn-primary" onclick="window.open('https://maps.app.goo.gl/NKZj1KynGYWic8fm8?g_st=ipc', '_blank')">
                                    <i class="fas fa-external-link-alt" style="margin-left: 0.5rem;"></i>
                                    فتح الخريطة
                                </button>
                                <button class="btn-secondary" onclick="closeLocationModal()">إغلاق</button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                document.getElementById('threeDotsDropdown').classList.remove('show');
            }

            function closeLocationModal() {
                const modal = document.getElementById('location-modal');
                if (modal) {
                    modal.remove();
                }
            }



            // Developer Site Function
            function openDeveloperSite() {
                window.open('https://ahmedmehleb1.github.io/1/', '_blank');
            }



        </script>

        <!-- Developer Info Modal -->
        <div id="developer-modal" class="modal-overlay hidden">
            <div class="modal-content report-modal">
                <div class="modal-header">
                    <h2>حول المطور</h2>
                    <button class="close-btn" onclick="closeDeveloperModal()">&times;</button>
                </div>
                <div class="report-form">
                    <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #dc3545, #c82333); border-radius: 15px; margin-bottom: 2rem; color: white;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">
                            <i class="fas fa-code"></i>
                        </div>
                        <h3 style="margin: 0 0 0.5rem 0; font-size: 1.8rem; font-weight: 700;">مطور الموقع</h3>
                        <p style="margin: 0; font-size: 1.1rem; opacity: 0.9;">مطور ويب متخصص في التطبيقات الحديثة</p>
                    </div>

                    <div style="background: rgba(231, 76, 60, 0.05); padding: 1.5rem; border-radius: 12px; border-right: 4px solid #dc3545; margin-bottom: 1.5rem;">
                        <h4 style="color: #dc3545; margin-bottom: 1rem; font-size: 1.2rem;">
                            <i class="fas fa-info-circle" style="margin-left: 0.5rem;"></i>
                            معلومات التطوير
                        </h4>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; border-bottom: 1px solid rgba(231, 76, 60, 0.1);">
                                <i class="fas fa-laptop-code" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                تطوير مواقع ويب متجاوبة وحديثة
                            </li>
                            <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; border-bottom: 1px solid rgba(231, 76, 60, 0.1);">
                                <i class="fas fa-mobile-alt" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                تطبيقات موبايل وويب متقدمة
                            </li>
                            <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500; border-bottom: 1px solid rgba(231, 76, 60, 0.1);">
                                <i class="fas fa-database" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                إدارة قواعد البيانات والخوادم
                            </li>
                            <li style="padding: 0.5rem 0; color: #2c3e50; font-weight: 500;">
                                <i class="fas fa-paint-brush" style="color: #dc3545; margin-left: 0.8rem; width: 20px;"></i>
                                تصميم واجهات مستخدم احترافية
                            </li>
                        </ul>
                    </div>

                    <div style="background: rgba(220, 53, 69, 0.05); padding: 1.5rem; border-radius: 12px; border-right: 4px solid #dc3545; margin-bottom: 1.5rem;">
                        <h4 style="color: #dc3545; margin-bottom: 1rem; font-size: 1.2rem;">
                            <i class="fas fa-tools" style="margin-left: 0.5rem;"></i>
                            التقنيات المستخدمة
                        </h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <span style="background: #dc3545; color: white; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">HTML5</span>
                            <span style="background: #dc3545; color: white; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">CSS3</span>
                            <span style="background: #dc3545; color: white; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">JavaScript</span>
                            <span style="background: #dc3545; color: white; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">Responsive Design</span>
                            <span style="background: #dc3545; color: white; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">Modern UI/UX</span>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <p style="color: #2c3e50; font-size: 1rem; margin-bottom: 1.5rem; line-height: 1.6;">
                            تم تطوير هذا الموقع بأحدث التقنيات لضمان أفضل تجربة مستخدم ممكنة.
                            نحن نسعى دائماً لتقديم حلول تقنية مبتكرة ومتطورة.
                        </p>
                        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                            <button style="background: linear-gradient(45deg, #25D366, #128C7E); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;" onclick="window.open('https://wa.me/+201551814955', '_blank')">
                                <i class="fab fa-whatsapp"></i>
                                تواصل معنا
                            </button>
                            <button style="background: linear-gradient(45deg, #dc3545, #c82333); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;" onclick="closeDeveloperModal()">
                                <i class="fas fa-times"></i>
                                إغلاق
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Report Issue Modal -->
        <div id="report-modal" class="modal-overlay hidden">
            <div class="modal-content report-modal">
                <div class="modal-header">
                    <h2>الإبلاغ عن مشكلة</h2>
                    <button class="close-btn" onclick="closeReportModal()">&times;</button>
                </div>
                <div class="report-form">
                    <div class="form-group">
                        <label for="issue-description">وصف المشكلة *</label>
                        <textarea id="issue-description" class="form-textarea" placeholder="يرجى وصف المشكلة التي تواجهها بالتفصيل..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeReportModal()">إلغاء</button>
                        <button type="button" id="submit-report" class="btn-primary" onclick="sendReport()">إرسال التقرير</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ultra Modern Calorie Calculator Modal -->
        <div id="ultra-calories-modal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareUltraCalculator()" title="مشاركة الحاسبة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <h2 class="calc-title">حاسبة السعرات والبروتين</h2>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeUltraCaloriesModal()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Page 1: Input Form -->
                <div class="calc-page active" id="ultraInputPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-user-circle" style="color: #dc3545;"></i>
                            البيانات الأساسية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-age">العمر *</label>
                                <input type="number" id="ultra-age" class="calc-form-input" placeholder="25" min="10" max="100">
                                <div class="calc-form-help">أدخل عمرك بالسنوات</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-gender">الجنس *</label>
                                <select id="ultra-gender" class="calc-form-select">
                                    <option value="male">ذكر</option>
                                    <option value="female">أنثى</option>
                                </select>
                                <div class="calc-form-help">يؤثر على معدل الأيض</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-ruler-vertical" style="color: #dc3545;"></i>
                            القياسات الجسدية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-weight">الوزن (كيلوغرام) *</label>
                                <input type="number" id="ultra-weight" class="calc-form-input" placeholder="70" min="20" max="300" step="0.1">
                                <div class="calc-form-help">وزنك الحالي بالكيلوغرام</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-height">الطول (سم) *</label>
                                <input type="number" id="ultra-height" class="calc-form-input" placeholder="175" min="100" max="250">
                                <div class="calc-form-help">طولك بالسنتيمتر</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-dumbbell" style="color: #dc3545;"></i>
                            النشاط والهدف
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-activity">مستوى النشاط البدني *</label>
                                <select id="ultra-activity" class="calc-form-select">
                                    <option value="sedentary">قليل الحركة (عمل مكتبي)</option>
                                    <option value="light">نشاط خفيف (1-3 أيام/أسبوع)</option>
                                    <option value="moderate">نشاط متوسط (3-5 أيام/أسبوع)</option>
                                    <option value="active">نشاط عالي (6-7 أيام/أسبوع)</option>
                                    <option value="very_active">نشاط عالي جداً (2x يومياً)</option>
                                </select>
                                <div class="calc-form-help">اختر المستوى الذي يناسب نشاطك</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-goal">الهدف من النظام الغذائي *</label>
                                <select id="ultra-goal" class="calc-form-select">
                                    <option value="maintain">الحفاظ على الوزن</option>
                                    <option value="lose">فقدان الوزن</option>
                                    <option value="gain">زيادة الوزن</option>
                                </select>
                                <div class="calc-form-help">هدفك الأساسي</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-line" style="color: #dc3545;"></i>
                            بيانات متقدمة
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-body-fat">نسبة الدهون (اختياري)</label>
                                <input type="number" id="ultra-body-fat" class="calc-form-input" placeholder="15" min="5" max="50" step="0.1">
                                <div class="calc-form-help">نسبة الدهون في جسمك</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="ultra-experience">مستوى الخبرة في التدريب *</label>
                                <select id="ultra-experience" class="calc-form-select">
                                    <option value="beginner">مبتدئ (أقل من سنة)</option>
                                    <option value="intermediate">متوسط (1-3 سنوات)</option>
                                    <option value="advanced">متقدم (أكثر من 3 سنوات)</option>
                                </select>
                                <div class="calc-form-help">مستوى خبرتك في التدريب</div>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="calc-btn" onclick="calculateUltraCalories()">
                        <i class="fas fa-rocket" style="margin-left: 0.5rem;"></i>
                        عرض النتائج
                    </button>
                </div>

                <!-- Page 2: Results Display -->
                <div class="calc-page" id="ultraResultsPage">
                    <div class="calc-results-header">
                        <button class="calc-back-btn" onclick="backToUltraInput()">
                            <i class="fas fa-arrow-right"></i>
                            العودة
                        </button>
                        <h3 class="calc-results-title">نتائجك الشخصية</h3>
                    </div>

                    <div class="calc-results-grid">
                        <div class="calc-result-card">
                            <div class="calc-result-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="calc-result-label">السعرات المطلوبة</div>
                            <div class="calc-result-value" id="ultra-calories-result">0</div>
                            <div class="calc-result-unit">سعرة/يوم</div>
                        </div>

                        <div class="calc-result-card">
                            <div class="calc-result-icon">
                                <i class="fas fa-drumstick-bite"></i>
                            </div>
                            <div class="calc-result-label">البروتين</div>
                            <div class="calc-result-value" id="ultra-protein-result">0</div>
                            <div class="calc-result-unit">جرام/يوم</div>
                        </div>

                        <div class="calc-result-card">
                            <div class="calc-result-icon">
                                <i class="fas fa-bread-slice"></i>
                            </div>
                            <div class="calc-result-label">الكربوهيدرات</div>
                            <div class="calc-result-value" id="ultra-carbs-result">0</div>
                            <div class="calc-result-unit">جرام/يوم</div>
                        </div>

                        <div class="calc-result-card">
                            <div class="calc-result-icon">
                                <i class="fas fa-tint"></i>
                            </div>
                            <div class="calc-result-label">الدهون</div>
                            <div class="calc-result-value" id="ultra-fats-result">0</div>
                            <div class="calc-result-unit">جرام/يوم</div>
                        </div>



                        <div class="calc-result-card">
                            <div class="calc-result-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="calc-result-label">BMI</div>
                            <div class="calc-result-value" id="ultra-bmi-result">0</div>
                            <div class="calc-result-unit">مؤشر كتلة الجسم</div>
                        </div>
                    </div>

                    <!-- Download Button Section -->
                    <div class="calc-form-section">
                        <button class="calc-btn download-image-btn" onclick="downloadCaloriesAsImage()">
                            <i class="fas fa-download"></i>
                            تحميل كصورة
                            <span class="btn-shine"></span>
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <!-- Food Calories Calculator Modal -->
        <div id="food-calories-modal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareFoodCalculator()" title="مشاركة الحاسبة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <h2 class="calc-title">حاسبة سعرات الطعام</h2>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeFoodCaloriesModal()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Main Food Calculator Content -->
                <div class="calc-page active" id="foodCalculatorPage">
                    <div class="food-calc-container">
                        <!-- Meals Section -->
                        <div class="meals-section">
                            <div class="section-header" style="margin-bottom: 2rem;">
                                <h3 style="color: #2c3e50; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-utensils" style="color: #dc3545;"></i>
                                    وجباتك اليومية
                                </h3>
                            </div>

                            <!-- Meal 1 -->
                            <div class="meal-container" id="meal-1">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-sun"></i>
                                        وجبة 1 (الإفطار)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(1)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-1"></div>
                                <div class="meal-totals" id="meal-totals-1">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Meal 2 -->
                            <div class="meal-container" id="meal-2">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-clock"></i>
                                        وجبة 2 (سناك صباحي)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(2)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-2"></div>
                                <div class="meal-totals" id="meal-totals-2">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Meal 3 -->
                            <div class="meal-container" id="meal-3">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-sun-o"></i>
                                        وجبة 3 (الغداء)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(3)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-3"></div>
                                <div class="meal-totals" id="meal-totals-3">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Meal 4 -->
                            <div class="meal-container" id="meal-4">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-clock"></i>
                                        وجبة 4 (سناك بعد الظهر)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(4)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-4"></div>
                                <div class="meal-totals" id="meal-totals-4">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Meal 5 -->
                            <div class="meal-container" id="meal-5">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-moon"></i>
                                        وجبة 5 (العشاء)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(5)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-5"></div>
                                <div class="meal-totals" id="meal-totals-5">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Meal 6 -->
                            <div class="meal-container" id="meal-6">
                                <div class="meal-header">
                                    <h4 class="meal-title">
                                        <i class="fas fa-star"></i>
                                        وجبة 6 (سناك ليلي)
                                    </h4>
                                    <button class="add-food-btn" onclick="showFoodModal(6)">
                                        <i class="fas fa-plus"></i>
                                        إضافة طعام
                                    </button>
                                </div>
                                <div class="meal-foods" id="meal-foods-6"></div>
                                <div class="meal-totals" id="meal-totals-6">
                                    <div class="total-item">
                                        <span class="total-label">السعرات:</span>
                                        <span class="total-value" data-type="calories">0</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">البروتين:</span>
                                        <span class="total-value" data-type="protein">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الكارب:</span>
                                        <span class="total-value" data-type="carbs">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                    <div class="total-item">
                                        <span class="total-label">الدهون:</span>
                                        <span class="total-value" data-type="fats">0</span>
                                        <span class="total-unit">جم</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Daily Total -->
                            <div class="daily-total">
                                <h3 class="daily-total-title">
                                    <i class="fas fa-chart-bar"></i>
                                    إجمالي اليوم
                                </h3>
                                <div class="daily-totals-grid">
                                    <div class="daily-total-card">
                                        <div class="daily-total-icon">
                                            <i class="fas fa-fire"></i>
                                        </div>
                                        <div class="daily-total-label">السعرات الإجمالية</div>
                                        <div class="daily-total-value" id="daily-calories">0</div>
                                    </div>
                                    <div class="daily-total-card">
                                        <div class="daily-total-icon">
                                            <i class="fas fa-drumstick-bite"></i>
                                        </div>
                                        <div class="daily-total-label">البروتين</div>
                                        <div class="daily-total-value" id="daily-protein">0 جم</div>
                                    </div>
                                    <div class="daily-total-card">
                                        <div class="daily-total-icon">
                                            <i class="fas fa-bread-slice"></i>
                                        </div>
                                        <div class="daily-total-label">الكربوهيدرات</div>
                                        <div class="daily-total-value" id="daily-carbs">0 جم</div>
                                    </div>
                                    <div class="daily-total-card">
                                        <div class="daily-total-icon">
                                            <i class="fas fa-tint"></i>
                                        </div>
                                        <div class="daily-total-label">الدهون</div>
                                        <div class="daily-total-value" id="daily-fats">0 جم</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="action-buttons">
                                <button class="calc-btn" onclick="downloadFoodCaloriesResults()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px; margin-left: 1rem;">
                                    <i class="fas fa-download" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                    تحميل النتائج كصورة
                                    <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                                </button>
                                <button class="calc-btn" onclick="showClearMealsConfirmation()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);">
                                    <i class="fas fa-trash"></i>
                                    مسح جميع الوجبات
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Food Selection Modal -->
        <div id="food-selection-modal" class="modal-overlay hidden">
            <div class="modal-content food-modal">
                <div class="modal-header">
                    <h3>إضافة طعام للوجبة</h3>
                    <button class="close-btn" onclick="closeFoodModal()">&times;</button>
                </div>
                <div class="food-modal-body">
                    <!-- Search Section -->
                    <div class="food-search-section">
                        <div class="search-container">
                            <input type="text" id="food-search" class="search-input" placeholder="ابحث عن الطعام..." />
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>

                    <!-- Food Categories -->
                    <div class="food-categories">
                        <button class="category-btn active" data-category="all">جميع الأطعمة</button>
                        <button class="category-btn" data-category="proteins">البروتينات</button>
                        <button class="category-btn" data-category="carbs">الكربوهيدرات</button>
                        <button class="category-btn" data-category="fruits">الفواكه</button>
                        <button class="category-btn" data-category="vegetables">الخضروات</button>
                        <button class="category-btn" data-category="dairy">الألبان</button>
                        <button class="category-btn" data-category="nuts">المكسرات</button>
                        <button class="category-btn" data-category="oils">الزيوت</button>
                    </div>

                    <!-- Food List -->
                    <div class="food-list" id="food-list">
                        <!-- Foods will be populated by JavaScript -->
                    </div>

                    <!-- Selected Food Details -->
                    <div class="selected-food-details hidden" id="selected-food-details">
                        <h4>تفاصيل الطعام المختار</h4>
                        <div class="food-info">
                            <div class="food-name" id="selected-food-name"></div>
                            <div class="food-nutrition">
                                <div class="nutrition-item">
                                    <span>السعرات (لكل 100جم):</span>
                                    <span id="selected-food-calories">0</span>
                                </div>
                                <div class="nutrition-item">
                                    <span>البروتين:</span>
                                    <span id="selected-food-protein">0 جم</span>
                                </div>
                                <div class="nutrition-item">
                                    <span>الكربوهيدرات:</span>
                                    <span id="selected-food-carbs">0 جم</span>
                                </div>
                                <div class="nutrition-item">
                                    <span>الدهون:</span>
                                    <span id="selected-food-fats">0 جم</span>
                                </div>
                            </div>
                            <div class="quantity-section">
                                <label for="food-quantity">الكمية (جرام):</label>
                                <input type="number" id="food-quantity" min="1" value="100" step="1" />
                            </div>
                            <div class="add-food-section">
                                <button class="add-to-meal-btn" onclick="addFoodToMeal()">
                                    <i class="fas fa-plus"></i>
                                    إضافة إلى الوجبة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Body Fat Calculator Modal -->
        <div id="body-fat-modal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareBodyFatCalculator()" title="مشاركة الحاسبة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <h2 class="calc-title">حاسبة نسبة الدهون في الجسم</h2>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeBodyFatModal()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Page 1: Input Form -->
                <div class="calc-page active" id="bodyFatInputPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-user-circle" style="color: #dc3545;"></i>
                            البيانات الأساسية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="bf-gender">الجنس *</label>
                                <select id="bf-gender" class="calc-form-select" onchange="updateBodyFatFields()">
                                    <option value="male">رجل</option>
                                    <option value="female">امرأة</option>
                                </select>
                                <div class="calc-form-help">يحدد طريقة الحساب</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="bf-weight">الوزن *</label>
                                <input type="number" id="bf-weight" class="calc-form-input" placeholder="70" min="30" max="200" step="0.1">
                                <div class="calc-form-help">كجم</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="bf-height">الطول *</label>
                                <input type="number" id="bf-height" class="calc-form-input" placeholder="170" min="100" max="250">
                                <div class="calc-form-help">سم</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-ruler" style="color: #dc3545;"></i>
                            المقاسات
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="bf-neck">الرقبة *</label>
                                <input type="number" id="bf-neck" class="calc-form-input" placeholder="38" min="20" max="60" step="0.1">
                                <div class="calc-form-help">سم</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="bf-waist">الوسط *</label>
                                <input type="number" id="bf-waist" class="calc-form-input" placeholder="85" min="50" max="150" step="0.1">
                                <div class="calc-form-help">سم</div>
                            </div>
                            <div class="calc-form-group" id="bf-hips-group">
                                <label class="calc-form-label" for="bf-hips">المؤخرة *</label>
                                <input type="number" id="bf-hips" class="calc-form-input" placeholder="95" min="60" max="150" step="0.1">
                                <div class="calc-form-help">سم (للنساء فقط)</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <button class="calc-btn" onclick="calculateBodyFat()" style="background: linear-gradient(135deg, #dc3545, #e74c3c); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                            <i class="fas fa-calculator"></i>
                            احسب نسبة الدهون
                        </button>
                    </div>
                </div>

                <!-- Page 2: Results -->
                <div class="calc-page" id="bodyFatResultsPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-pie" style="color: #dc3545;"></i>
                            النتائج
                        </h3>

                        <div class="calc-results-grid">
                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div class="calc-result-label">نسبة الدهون</div>
                                <div class="calc-result-value" id="bf-percentage">0</div>
                                <div class="calc-result-unit">%</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-weight-hanging"></i>
                                </div>
                                <div class="calc-result-label">وزن الدهون</div>
                                <div class="calc-result-value" id="bf-fat-weight">0</div>
                                <div class="calc-result-unit">كجم</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-dumbbell"></i>
                                </div>
                                <div class="calc-result-label">وزن الكتلة اللادهنية</div>
                                <div class="calc-result-value" id="bf-lean-mass">0</div>
                                <div class="calc-result-unit">كجم</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="calc-result-label">التقييم</div>
                                <div class="calc-result-value" id="bf-category" style="font-size: 1rem;">-</div>
                                <div class="calc-result-unit"></div>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; padding: 1rem; background: #ffffff; border-radius: 12px; border-right: 4px solid #dc3545;">
                            <h4 style="color: #2c3e50; margin-bottom: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: #dc3545;"></i>
                                معلومات مهمة
                            </h4>
                            <div id="bf-info-text" style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                النتائج تقريبية وتعتمد على معادلة الجيش الأمريكي. للحصول على نتائج دقيقة، يُنصح بإجراء فحص طبي متخصص.
                            </div>
                        </div>



                        <div class="calc-form-section" style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-top: 2rem;">
                            <button class="calc-btn reset-calc-btn" onclick="showBodyFatInputPage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-edit" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                إعادة الحساب
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                            <button class="calc-btn download-image-btn" onclick="downloadBodyFatAsImage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-download" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                تحميل كصورة
                                <span class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Energy Requirements Calculator Modal -->
        <div id="energy-calculator-modal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareEnergyCalculator()" title="مشاركة الحاسبة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <h2 class="calc-title">حساب الاحتياجات من الطاقة</h2>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeEnergyCalculatorModal()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Page 1: Input Form -->
                <div class="calc-page active" id="energyInputPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-user-circle" style="color: #dc3545;"></i>
                            البيانات الأساسية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-gender">الجنس *</label>
                                <select id="energy-gender" class="calc-form-select">
                                    <option value="male">رجل</option>
                                    <option value="female">امرأة</option>
                                </select>
                                <div class="calc-form-help">يؤثر على معدل الأيض الأساسي</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-age">السن *</label>
                                <input type="number" id="energy-age" class="calc-form-input" placeholder="25" min="10" max="100">
                                <div class="calc-form-help">سنة</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-weight">الوزن *</label>
                                <input type="number" id="energy-weight" class="calc-form-input" placeholder="70" min="30" max="200" step="0.1">
                                <div class="calc-form-help">كجم</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-height">الطول *</label>
                                <input type="number" id="energy-height" class="calc-form-input" placeholder="170" min="100" max="250">
                                <div class="calc-form-help">سم</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-calculator" style="color: #dc3545;"></i>
                            إعدادات الحساب
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-formula">المعادلة *</label>
                                <select id="energy-formula" class="calc-form-select">
                                    <option value="mifflin">ميفلين سانت جوير</option>
                                    <option value="harris">هاريس بندكت</option>
                                    <option value="katch">كاتش ماكردل</option>
                                </select>
                                <div class="calc-form-help">اختر المعادلة المناسبة</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="energy-activity">مستوى النشاط *</label>
                                <select id="energy-activity" class="calc-form-select">
                                    <option value="bmr">معدل الأيض الأساسي (BMR)</option>
                                    <option value="sedentary">خامل (لا يمارس الرياضة)</option>
                                    <option value="light">نشاط خفيف (1-3 أيام/أسبوع)</option>
                                    <option value="moderate">نشاط متوسط (3-5 أيام/أسبوع)</option>
                                    <option value="high">نشاط عالي (6-7 أيام/أسبوع)</option>
                                    <option value="extreme">نشاط شديد (مرتين يومياً)</option>
                                </select>
                                <div class="calc-form-help">حدد مستوى نشاطك البدني</div>
                            </div>
                            <div class="calc-form-group" id="body-fat-input" style="display: none;">
                                <label class="calc-form-label" for="energy-bodyfat">نسبة الدهون</label>
                                <input type="number" id="energy-bodyfat" class="calc-form-input" placeholder="15" min="5" max="50" step="0.1">
                                <div class="calc-form-help">% (مطلوب لمعادلة كاتش ماكردل)</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <button class="calc-btn" onclick="calculateEnergyRequirements()" style="background: linear-gradient(135deg, #dc3545, #e74c3c); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                            <i class="fas fa-bolt"></i>
                            احسب الاحتياجات من الطاقة
                        </button>
                    </div>
                </div>

                <!-- Page 2: Results -->
                <div class="calc-page" id="energyResultsPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-line" style="color: #dc3545;"></i>
                            النتائج
                        </h3>

                        <div class="calc-results-grid">
                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                                <div class="calc-result-label">معدل الأيض الأساسي</div>
                                <div class="calc-result-value" id="bmr-value">0</div>
                                <div class="calc-result-unit">سعرة حرارية</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="calc-result-label">إجمالي الطاقة المطلوبة</div>
                                <div class="calc-result-value" id="tdee-value">0</div>
                                <div class="calc-result-unit">سعرة حرارية</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <div class="calc-result-label">المعادلة المستخدمة</div>
                                <div class="calc-result-value" id="formula-used" style="font-size: 1rem;">-</div>
                                <div class="calc-result-unit"></div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-running"></i>
                                </div>
                                <div class="calc-result-label">مستوى النشاط</div>
                                <div class="calc-result-value" id="activity-level" style="font-size: 1rem;">-</div>
                                <div class="calc-result-unit"></div>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <div style="margin-top: 2rem;">
                            <h4 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-list-ul" style="color: #dc3545;"></i>
                                تفصيل الاحتياجات حسب الهدف
                            </h4>
                            <div class="calc-results-grid">
                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-arrow-down" style="color: #dc3545;"></i>
                                    </div>
                                    <div class="calc-result-label">فقدان الوزن</div>
                                    <div class="calc-result-value" id="weight-loss">0</div>
                                    <div class="calc-result-unit">سعرة حرارية</div>
                                </div>

                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-balance-scale" style="color: #ffc107;"></i>
                                    </div>
                                    <div class="calc-result-label">الحفاظ على الوزن</div>
                                    <div class="calc-result-value" id="maintain-weight">0</div>
                                    <div class="calc-result-unit">سعرة حرارية</div>
                                </div>

                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-arrow-up" style="color: #28a745;"></i>
                                    </div>
                                    <div class="calc-result-label">زيادة الوزن</div>
                                    <div class="calc-result-value" id="weight-gain">0</div>
                                    <div class="calc-result-unit">سعرة حرارية</div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; padding: 1rem; background: #ffffff; border-radius: 12px; border-right: 4px solid #dc3545;">
                            <h4 style="color: #2c3e50; margin-bottom: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: #dc3545;"></i>
                                معلومات مهمة
                            </h4>
                            <div id="energy-info-text" style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                النتائج تقديرية وقد تختلف حسب عوامل فردية. يُنصح بمراجعة أخصائي تغذية للحصول على خطة غذائية مخصصة.
                            </div>
                        </div>



                        <div class="calc-form-section" style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-top: 2rem;">
                            <button class="calc-btn reset-calc-btn" onclick="showEnergyInputPage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-edit" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                إعادة الحساب
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                            <button class="calc-btn download-image-btn" onclick="downloadEnergyAsImage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-download" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                تحميل كصورة
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Water Calculator Modal -->
        <div id="water-calculator-modal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareWaterCalculator()" title="مشاركة الحاسبة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <h2 class="calc-title">حساب كمية الماء المطلوبة</h2>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeWaterCalculatorModal()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Page 1: Input Form -->
                <div class="calc-page active" id="waterInputPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-user-circle" style="color: #dc3545;"></i>
                            البيانات الأساسية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-gender">الجنس *</label>
                                <select id="water-gender" class="calc-form-select">
                                    <option value="male">رجل</option>
                                    <option value="female">امرأة</option>
                                </select>
                                <div class="calc-form-help">يؤثر على احتياجات الماء</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-age">العمر *</label>
                                <input type="number" id="water-age" class="calc-form-input" placeholder="25" min="1" max="100">
                                <div class="calc-form-help">سنة</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-weight">الوزن *</label>
                                <input type="number" id="water-weight" class="calc-form-input" placeholder="70" min="20" max="200" step="0.1">
                                <div class="calc-form-help">كجم</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-height">الطول *</label>
                                <input type="number" id="water-height" class="calc-form-input" placeholder="170" min="100" max="250">
                                <div class="calc-form-help">سم</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-running" style="color: #dc3545;"></i>
                            النشاط البدني
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-activity">مستوى النشاط *</label>
                                <select id="water-activity" class="calc-form-select">
                                    <option value="light">نشاط خفيف (1-3 أيام/أسبوع)</option>
                                    <option value="moderate">نشاط متوسط (3-5 أيام/أسبوع)</option>
                                    <option value="high">نشاط عالي (6-7 أيام/أسبوع)</option>
                                    <option value="extreme">نشاط شديد (مرتين يومياً)</option>
                                </select>
                                <div class="calc-form-help">يؤثر على فقدان الماء</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-exercise-duration">مدة التمرين اليومي</label>
                                <input type="number" id="water-exercise-duration" class="calc-form-input" placeholder="60" min="0" max="300">
                                <div class="calc-form-help">دقيقة (اختياري)</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-exercise-intensity">شدة التمرين</label>
                                <select id="water-exercise-intensity" class="calc-form-select">
                                    <option value="low">منخفضة</option>
                                    <option value="moderate">متوسطة</option>
                                    <option value="high">عالية</option>
                                </select>
                                <div class="calc-form-help">شدة التمرين تؤثر على التعرق</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-thermometer-half" style="color: #dc3545;"></i>
                            العوامل البيئية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-climate">المناخ *</label>
                                <select id="water-climate" class="calc-form-select">
                                    <option value="temperate">معتدل (20-25°م)</option>
                                    <option value="hot">حار (25-35°م)</option>
                                    <option value="very-hot">حار جداً (35°م+)</option>
                                    <option value="cold">بارد (أقل من 20°م)</option>
                                </select>
                                <div class="calc-form-help">درجة الحرارة المحيطة</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-humidity">الرطوبة</label>
                                <select id="water-humidity" class="calc-form-select">
                                    <option value="low">منخفضة (أقل من 40%)</option>
                                    <option value="moderate">متوسطة (40-60%)</option>
                                    <option value="high">عالية (أكثر من 60%)</option>
                                </select>
                                <div class="calc-form-help">نسبة الرطوبة في الهواء</div>
                            </div>

                        </div>
                    </div>

                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-medkit" style="color: #dc3545;"></i>
                            الحالة الصحية
                        </h3>
                        <div class="calc-form-grid">
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-pregnancy">الحمل والرضاعة</label>
                                <select id="water-pregnancy" class="calc-form-select">
                                    <option value="none">لا ينطبق</option>
                                    <option value="pregnant">حامل</option>
                                    <option value="breastfeeding">مرضعة</option>
                                </select>
                                <div class="calc-form-help">للنساء فقط</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-illness">المرض</label>
                                <select id="water-illness" class="calc-form-select">
                                    <option value="none">لا يوجد</option>
                                    <option value="fever">حمى</option>
                                    <option value="diarrhea">إسهال</option>
                                    <option value="kidney">مشاكل في الكلى</option>
                                </select>
                                <div class="calc-form-help">حالات تؤثر على احتياجات الماء</div>
                            </div>
                            <div class="calc-form-group">
                                <label class="calc-form-label" for="water-caffeine">استهلاك الكافيين</label>
                                <input type="number" id="water-caffeine" class="calc-form-input" placeholder="2" min="0" max="10">
                                <div class="calc-form-help">أكواب قهوة/شاي يومياً</div>
                            </div>
                        </div>
                    </div>

                    <div class="calc-form-section">
                        <button class="calc-btn" onclick="calculateWaterNeeds()" style="background: linear-gradient(135deg, #dc3545, #e74c3c); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                            <i class="fas fa-tint"></i>
                            احسب كمية الماء المطلوبة
                        </button>
                    </div>
                </div>

                <!-- Page 2: Results -->
                <div class="calc-page" id="waterResultsPage">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-line" style="color: #dc3545;"></i>
                            النتائج
                        </h3>

                        <div class="calc-results-grid">
                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-tint" style="color: #007bff;"></i>
                                </div>
                                <div class="calc-result-label">كمية الماء اليومية</div>
                                <div class="calc-result-value" id="daily-water">0</div>
                                <div class="calc-result-unit">لتر</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-glass-water" style="color: #17a2b8;"></i>
                                </div>
                                <div class="calc-result-label">عدد الأكواب</div>
                                <div class="calc-result-value" id="water-glasses">0</div>
                                <div class="calc-result-unit">كوب (250مل)</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-bottle-water" style="color: #20c997;"></i>
                                </div>
                                <div class="calc-result-label">زجاجات الماء</div>
                                <div class="calc-result-value" id="water-bottles">0</div>
                                <div class="calc-result-unit">زجاجة (500مل)</div>
                            </div>

                            <div class="calc-result-card">
                                <div class="calc-result-icon">
                                    <i class="fas fa-clock" style="color: #ffc107;"></i>
                                </div>
                                <div class="calc-result-label">كل ساعة</div>
                                <div class="calc-result-value" id="hourly-water">0</div>
                                <div class="calc-result-unit">مل</div>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <div style="margin-top: 2rem;">
                            <h4 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-list-ul" style="color: #dc3545;"></i>
                                تفصيل الاحتياجات
                            </h4>
                            <div class="calc-results-grid">
                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-user" style="color: #6c757d;"></i>
                                    </div>
                                    <div class="calc-result-label">الاحتياج الأساسي</div>
                                    <div class="calc-result-value" id="basic-water">0</div>
                                    <div class="calc-result-unit">لتر</div>
                                </div>

                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-dumbbell" style="color: #dc3545;"></i>
                                    </div>
                                    <div class="calc-result-label">للنشاط البدني</div>
                                    <div class="calc-result-value" id="exercise-water">0</div>
                                    <div class="calc-result-unit">لتر</div>
                                </div>

                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-thermometer-half" style="color: #fd7e14;"></i>
                                    </div>
                                    <div class="calc-result-label">للمناخ</div>
                                    <div class="calc-result-value" id="climate-water">0</div>
                                    <div class="calc-result-unit">لتر</div>
                                </div>

                                <div class="calc-result-card">
                                    <div class="calc-result-icon">
                                        <i class="fas fa-plus-circle" style="color: #28a745;"></i>
                                    </div>
                                    <div class="calc-result-label">إضافات أخرى</div>
                                    <div class="calc-result-value" id="additional-water">0</div>
                                    <div class="calc-result-unit">لتر</div>
                                </div>
                            </div>
                        </div>

                        <!-- Drinking Schedule -->
                        <div style="margin-top: 2rem;">
                            <h4 style="color: #2c3e50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-calendar-alt" style="color: #dc3545;"></i>
                                جدول شرب الماء المقترح
                            </h4>
                            <div id="water-schedule" style="background: #ffffff; padding: 1rem; border-radius: 12px; border-right: 4px solid #007bff;">
                                <div id="schedule-content" style="color: #2c3e50; font-size: 0.9rem; line-height: 1.6;">
                                    سيتم عرض الجدول بعد الحساب
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; padding: 1rem; background: #ffffff; border-radius: 12px; border-right: 4px solid #dc3545;">
                            <h4 style="color: #2c3e50; margin-bottom: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: #dc3545;"></i>
                                نصائح مهمة
                            </h4>
                            <div id="water-tips" style="color: #6c757d; font-size: 0.9rem; line-height: 1.5;">
                                • اشرب الماء بانتظام على مدار اليوم<br>
                                • لا تنتظر حتى تشعر بالعطش<br>
                                • زد الكمية في الطقس الحار أو عند ممارسة الرياضة<br>
                                • راقب لون البول كمؤشر على الترطيب<br>
                                • استشر طبيبك إذا كان لديك مشاكل صحية
                            </div>
                        </div>



                        <div class="calc-form-section" style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-top: 2rem;">
                            <button class="calc-btn reset-calc-btn" onclick="showWaterInputPage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-edit" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                إعادة الحساب
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                            <button class="calc-btn download-image-btn" onclick="downloadWaterAsImage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-download" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                تحميل كصورة
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Clear Meals Confirmation Modal -->
        <div id="clear-meals-confirmation" class="modal-overlay hidden">
            <div class="modal-content" style="max-width: 400px; text-align: center; border-radius: 16px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);">
                <div class="modal-header" style="border-bottom: none; padding-bottom: 0;">
                    <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3 style="color: #2c3e50; margin-bottom: 10px; font-size: 1.5rem;">تأكيد المسح</h3>
                    <p style="color: #6c757d; margin-bottom: 30px; line-height: 1.6;">هل أنت متأكد من مسح جميع الوجبات؟ لن تتمكن من التراجع عن هذا الإجراء.</p>
                </div>
                <div class="modal-actions" style="display: flex; gap: 15px; justify-content: center; padding: 0 20px 20px;">
                    <button onclick="hideClearMealsConfirmation()" style="background: linear-gradient(135deg, #6c757d, #495057); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; min-width: 120px;">
                        إلغاء
                    </button>
                    <button onclick="clearAllMeals()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3); min-width: 120px;">
                        مسح الكل
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <!-- Right Section - Brand Info -->
                <div class="footer-brand">
                    <div class="footer-logo">
                        <img src="/images/logo.png" alt="Popeye Gym Logo">
                    </div>
                    <h3>Popeye Gym</h3>


                </div>

                <!-- Combined Contact Section -->
                <div class="footer-contact">
                    <h4>تواصل معنا</h4>
                    <div class="contact-info">
                        <div>
                            <i class="fas fa-phone"></i>
                            <a href="tel:01555037364" style="color: inherit; text-decoration: none;">01555037364</a>
                        </div>
                        <div>
                            <i class="fas fa-map-marker-alt"></i>
                            <a href="https://maps.app.goo.gl/NKZj1KynGYWic8fm8?g_st=ipc" style="color: inherit; text-decoration: none;">الجماليه - خلف مطعم شيخ الحاره</a>
                        </div>
                        <div>
                            <i class="fab fa-whatsapp"></i>
                            <a href="https://wa.me/201555037364" style="color: inherit; text-decoration: none;">واتساب</a>
                        </div>
                        <div>
                            <i class="fab fa-instagram"></i>
                            <a href="https://www.instagram.com/popeyegym___?igsh=MTdtc3J5cmNpYWU3Zg==" style="color: inherit; text-decoration: none;">انستجرام</a>
                        </div>
                        <div>
                            <i class="fab fa-tiktok"></i>
                            <a href="https://vt.tiktok.com/ZSB7Ape5Q/" style="color: inherit; text-decoration: none;">تيك توك</a>
                        </div>
                        <div>
                            <i class="fab fa-facebook"></i>
                            <a href="https://www.facebook.com/share/1Lh1ngiXdT/" style="color: inherit; text-decoration: none;">فيس بوك</a>
                        </div>
                    </div>
                </div>

                <!-- Developer Section -->
                <div class="footer-contact">
                    <h4>المطور</h4>
                    <div class="contact-info">
                        <div>
                            <i class="fas fa-code"></i>
                            <a href="https://ahmedmehleb1.github.io/1/" style="color: inherit; text-decoration: none;">حول المطور</a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>



        <!-- Location Modal -->
        <div class="modal-overlay location-modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>
                        <i class="fas fa-map-marker-alt"></i>
                        موقع جيم باباي
                    </h2>
                    <button class="close-btn" onclick="closeLocationModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="location-map-container">
                    <div style="padding: 2rem; text-align: center; background: #ffffff; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                        <div style="background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); max-width: 400px;">
                            <div style="font-size: 3rem; color: #dc3545; margin-bottom: 1rem;">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <h3 style="color: #2c3e50; margin-bottom: 1rem;">موقع جيم باباي</h3>
                            <p style="color: #6c757d; margin-bottom: 1.5rem; line-height: 1.6;">
                                الجماليه - خلف مطعم شيخ الحاره
                            </p>
                            <a href="https://maps.app.goo.gl/NKZj1KynGYWic8fm8" target="_blank" 
                               style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); 
                                      color: white; 
                                      padding: 1rem 2rem; 
                                      border: none; 
                                      border-radius: 12px; 
                                      font-size: 1.1rem; 
                                      font-weight: 600; 
                                      text-decoration: none; 
                                      display: inline-flex; 
                                      align-items: center; 
                                      gap: 0.8rem; 
                                      transition: all 0.3s ease; 
                                      box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                                <i class="fas fa-external-link-alt"></i>
                                فتح في خرائط جوجل
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workout Tracker Modal -->
        <div id="workoutTrackerModal" class="modal-overlay hidden">
            <div class="ultra-calculator">
                <!-- Calculator Header -->
                <div class="ultra-calc-header">
                    <div class="calc-header-left">
                        <button class="calc-share-btn" onclick="shareWorkoutTracker()" title="مشاركة الحاسبة" style="background: linear-gradient(135deg, #dc3545, #c82333); border: 2px solid rgba(255, 255, 255, 0.3); box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                    <div class="calc-header-center">
                        <div class="calc-brand-info">
                            <h2 class="calc-title">تسجيل التمارين</h2>
                            <p class="calc-subtitle">Popeye Gym</p>
                        </div>
                    </div>
                    <div class="calc-header-right">
                        <button class="calc-close-btn" onclick="closeWorkoutTracker()" title="إغلاق" style="background: linear-gradient(135deg, #dc3545, #c82333); border: 2px solid rgba(255, 255, 255, 0.3); color: white; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Workout Input Page -->
                <div id="workout-input-page" class="workout-page">
                    <div class="calc-form-section">
                        <h3 style="color: #2c3e50; margin-bottom: 1.5rem; text-align: center;">
                            <i class="fas fa-dumbbell" style="color: #dc3545; margin-left: 0.5rem;"></i>
                            سجل تمارينك اليومية
                        </h3>

                        <div class="form-group">
                            <label for="workout-date">التاريخ:</label>
                            <input type="date" id="workout-date" class="form-input" required>
                        </div>

                        <div class="workout-exercises" id="workout-exercises">
                            <!-- Exercise Entry Template -->
                            <div class="exercise-entry">
                                <div class="exercise-header">
                                    <h4>التمرين 1</h4>
                                    <button type="button" class="remove-exercise-btn" onclick="removeExercise(this)" style="display: none; background: #dc3545; color: white; border: none; padding: 0.5rem; border-radius: 4px; cursor: pointer;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>اسم التمرين:</label>
                                        <input type="text" class="form-input exercise-name" placeholder="اكتب اسم التمرين" required>
                                    </div>
                                    <div class="form-group">
                                        <label>نوع التمرين:</label>
                                        <select class="form-input exercise-type" required>
                                            <option value="">اختر نوع التمرين</option>
                                            <option value="صدر">صدر</option>
                                            <option value="ظهر">ظهر</option>
                                            <option value="كتف">كتف</option>
                                            <option value="باي">باي</option>
                                            <option value="تراي">تراي</option>
                                            <option value="أرجل">أرجل</option>
                                            <option value="بطن">بطن</option>
                                            <option value="كارديو">كارديو</option>
                                            <option value="أخرى">أخرى</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>عدد المجموعات:</label>
                                        <input type="number" class="form-input sets-input" value="3" min="1" max="10" required>
                                    </div>
                                    <div class="form-group">
                                        <label>عدد التكرارات (اختياري):</label>
                                        <input type="number" class="form-input reps-input" placeholder="مثال: 10" min="1">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="workout-actions" style="display: flex; justify-content: center; margin-top: 1rem;">
                            <button type="button" class="add-exercise-btn reset-calc-btn" onclick="addExercise()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-plus" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                إضافة تمرين جديد
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                        </div>

                        <div class="form-group">
                            <label for="workout-notes">ملاحظات (اختياري):</label>
                            <textarea id="workout-notes" class="form-textarea" placeholder="أي ملاحظات على التمرين..." rows="3"></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="closeWorkoutTracker()" style="background: linear-gradient(135deg, #6c757d, #495057); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">إلغاء</button>
                            <button type="button" class="calculate-btn" onclick="saveWorkout()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);">
                                <i class="fas fa-save"></i>
                                حفظ التمرين
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Workout Results Page -->
                <div id="workout-results-page" class="workout-page hidden">
                    <div class="calc-results-container">
                        <div class="calc-result-header">
                            <h3>
                                <i class="fas fa-check-circle" style="color: #28a745;"></i>
                                تم حفظ التمرين بنجاح!
                            </h3>
                        </div>

                        <div id="workout-summary" class="workout-summary">
                            <!-- Will be populated with workout data -->
                        </div>

                        <div class="calc-form-section" style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-top: 2rem;">
                            <button class="calc-btn reset-calc-btn" onclick="showWorkoutInputPage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-edit" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                تمرين جديد
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>

                            <button class="calc-btn download-image-btn" onclick="downloadWorkoutAsImage()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4); position: relative; overflow: hidden; min-width: 280px;">
                                <i class="fas fa-download" style="margin-left: 0.8rem; font-size: 1.2rem;"></i>
                                تحميل كصورة
                                <span style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stopwatch Modal -->
        <div id="stopwatchModal" class="stopwatch-modal">
            <div class="stopwatch-window">
                <!-- Header -->
                <div class="stopwatch-header">
                    <div class="stopwatch-header-left">
                        <div class="stopwatch-logo">
                            <img src="/images/logo.png" alt="Popeye Gym" class="stopwatch-logo-img">
                        </div>
                        <div class="stopwatch-brand-info">
                            <h2 class="stopwatch-title">العداد</h2>
                            <p class="stopwatch-subtitle">Popeye Gym</p>
                        </div>
                    </div>
                    <div class="stopwatch-controls">
                        <button class="stopwatch-control-btn share-btn" onclick="shareStopwatch()" title="مشاركة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <button class="stopwatch-control-btn close-btn" onclick="closeStopwatch()" title="إغلاق">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Body -->
                <div class="stopwatch-body">
                    <!-- Time Display -->
                    <div class="stopwatch-display">
                        <div class="stopwatch-time" id="stopwatchTime">00:00.0</div>
                        <div class="stopwatch-lap" id="stopwatchLap">اللفة: 00:00.0</div>
                    </div>

                    <!-- Control Buttons -->
                    <div class="stopwatch-buttons">
                        <button id="lapBtn" class="stopwatch-btn lap-btn" onclick="recordLap()" disabled>
                            <i class="fas fa-flag"></i>
                        </button>
                        <button id="playPauseBtn" class="stopwatch-btn play-btn" onclick="toggleStopwatch()">
                            <i class="fas fa-play"></i>
                        </button>
                        <button id="resetBtn" class="stopwatch-btn reset-btn" onclick="resetStopwatch()">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <style>
            /* Stopwatch Modal Styles */
            .stopwatch-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(15px);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .stopwatch-modal.show {
                opacity: 1;
                visibility: visible;
            }

            .stopwatch-window {
                background: white;
                border-radius: 30px;
                box-shadow: 
                    0 30px 80px rgba(0, 0, 0, 0.3),
                    0 0 0 1px rgba(231, 76, 60, 0.2);
                width: 90%;
                max-width: 450px;
                transform: scale(0.8) translateY(50px);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                overflow: hidden;
                border: 2px solid rgba(231, 76, 60, 0.3);
            }

            .stopwatch-modal.show .stopwatch-window {
                transform: scale(1) translateY(0);
            }

            /* Header */
            .stopwatch-header {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                padding: 1.5rem 2rem;
                display: flex;
                align-items: center;
                justify-content: space-between;
                position: relative;
                overflow: hidden;
                box-shadow: 0 4px 20px rgba(220, 53, 69, 0.3);
            }

            .stopwatch-header::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.15) 50%, transparent 70%);
                transform: translateX(-100%);
                transition: transform 0.8s;
            }

            .stopwatch-header:hover::before {
                transform: translateX(100%);
            }

            .stopwatch-header-left {
                display: flex;
                align-items: center;
                gap: 1.2rem;
            }

            .stopwatch-logo {
                width: 55px;
                height: 55px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .stopwatch-logo-img {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                object-fit: cover;
            }

            .stopwatch-brand-info {
                text-align: right;
            }

            .stopwatch-title {
                margin: 0 0 0.2rem 0;
                font-size: 1.5rem;
                font-weight: 800;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .stopwatch-subtitle {
                margin: 0;
                font-size: 0.9rem;
                color: rgba(255, 255, 255, 0.8);
                font-weight: 500;
            }

            .stopwatch-controls {
                display: flex;
                gap: 0.7rem;
            }

            .stopwatch-control-btn {
                width: 42px;
                height: 42px;
                border: none;
                color: white;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1rem;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
            }

            .stopwatch-control-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 50%;
                transform: scale(0);
                transition: transform 0.3s ease;
            }

            .stopwatch-control-btn:hover::before {
                transform: scale(1);
            }

            .share-btn {
                background: rgba(255, 255, 255, 0.15);
                border: 2px solid rgba(255, 255, 255, 0.3);
                color: white;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(15px);
            }

            .share-btn:hover {
                background: rgba(255, 255, 255, 0.25);
                border-color: rgba(255, 255, 255, 0.5);
                transform: translateY(-2px) scale(1.1);
                box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
            }

            .close-btn {
                background: rgba(255, 255, 255, 0.15);
                border: 2px solid rgba(255, 255, 255, 0.3);
                color: white;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(15px);
            }

            .close-btn:hover {
                background: rgba(220, 53, 69, 0.8);
                border-color: rgba(220, 53, 69, 0.9);
                transform: translateY(-2px) scale(1.1);
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.6);
            }

            /* Body */
            .stopwatch-body {
                background: #ffffff;
                padding: 3rem 2rem;
                text-align: center;
                color: #2c3e50;
                position: relative;
            }

            .stopwatch-body::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: #ffffff;
                pointer-events: none;
            }

            /* Display */
            .stopwatch-display {
                margin-bottom: 3rem;
                position: relative;
                z-index: 1;
            }

            .stopwatch-time {
                font-size: 4rem;
                font-weight: 300;
                color: #2c3e50;
                font-family: 'Courier New', monospace;
                text-shadow: 0 4px 8px rgba(44, 62, 80, 0.2);
                margin-bottom: 0.5rem;
                letter-spacing: 2px;
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .stopwatch-lap {
                font-size: 1.1rem;
                color: #6c757d;
                font-weight: 600;
                opacity: 0.9;
            }

            /* Buttons */
            .stopwatch-buttons {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 1.5rem;
            }

            .stopwatch-btn {
                width: 65px;
                height: 65px;
                border: none;
                border-radius: 20px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.3rem;
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .stopwatch-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }

            .stopwatch-btn:hover::before {
                left: 100%;
            }

            .stopwatch-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            }

            .stopwatch-btn:active {
                transform: translateY(-1px);
            }

            .lap-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
            }

            .lap-btn:disabled {
                background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
                color: #6c757d;
                cursor: not-allowed;
                transform: none !important;
                box-shadow: 0 3px 10px rgba(108, 117, 125, 0.2) !important;
            }

            .play-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                width: 80px;
                height: 80px;
                font-size: 1.5rem;
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
            }

            .play-btn.playing {
                background: linear-gradient(135deg, #8B0000 0%, #dc3545 100%);
                color: white;
                box-shadow: 0 8px 25px rgba(139, 0, 0, 0.4);
            }

            .reset-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3);
            }

            /* Mobile Responsive */
            @media (max-width: 768px) {
                .stopwatch-window {
                    width: 95%;
                    margin: 1rem;
                }

                .stopwatch-time {
                    font-size: 3rem;
                }

                .stopwatch-buttons {
                    gap: 1rem;
                }

                .stopwatch-btn {
                    width: 55px;
                    height: 55px;
                    font-size: 1.1rem;
                }

                .play-btn {
                    width: 70px;
                    height: 70px;
                    font-size: 1.3rem;
                }
            }

            @media (max-width: 480px) {
                .stopwatch-time {
                    font-size: 2.5rem;
                }

                .stopwatch-body {
                    padding: 2rem 1rem;
                }
            }

            /* ===============================
               WORKOUT TRACKER STYLES
               =============================== */

            .workout-page {
                padding: 2rem;
                background: white;
                border-radius: 15px;
                margin: 1rem;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            .workout-page.hidden {
                display: none;
            }

            .exercise-entry {
                background: #f8f9fa;
                border: 2px solid #e9ecef;
                border-radius: 15px;
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                transition: all 0.3s ease;
            }

            .exercise-entry:hover {
                border-color: #dc3545;
                box-shadow: 0 5px 15px rgba(220, 53, 69, 0.1);
            }

            .exercise-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .exercise-header h4 {
                color: #dc3545;
                font-weight: bold;
                margin: 0;
                font-size: 1.3rem;
            }

            .remove-exercise-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                border: none;
                border-radius: 50%;
                width: 35px;
                height: 35px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                box-shadow: 0 3px 10px rgba(220, 53, 69, 0.3);
            }

            .remove-exercise-btn:hover {
                transform: scale(1.1);
                box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
            }

            .form-row {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem;
                margin-bottom: 1rem;
            }

            .custom-exercise-group {
                grid-column: 1 / -1;
            }

            .sets-container {
                background: white;
                border-radius: 10px;
                padding: 1rem;
                border: 1px solid #dee2e6;
            }

            .sets-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
                font-weight: bold;
                color: #2c3e50;
            }

            .add-set-btn {
                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                color: white;
                border: none;
                border-radius: 20px;
                padding: 8px 15px;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.3s ease;
                box-shadow: 0 3px 10px rgba(40, 167, 69, 0.3);
            }

            .add-set-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
            }

            .sets-list {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .set-entry {
                display: grid;
                grid-template-columns: 50px 1fr auto 1fr auto auto;
                gap: 0.5rem;
                align-items: center;
                padding: 0.75rem;
                background: #f8f9fa;
                border-radius: 8px;
                border: 1px solid #e9ecef;
                transition: all 0.3s ease;
            }

            .set-entry:hover {
                background: #fff;
                border-color: #dc3545;
            }

            .set-number {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                font-size: 0.9rem;
                box-shadow: 0 2px 5px rgba(220, 53, 69, 0.3);
            }

            .set-input {
                border: 2px solid #e9ecef;
                border-radius: 8px;
                padding: 0.5rem;
                text-align: center;
                font-weight: bold;
                transition: all 0.3s ease;
                background: white;
            }

            .set-input:focus {
                border-color: #dc3545;
                box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
                outline: none;
            }

            .input-label {
                font-size: 0.85rem;
                color: #6c757d;
                font-weight: 600;
            }

            .remove-set-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                border: none;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                box-shadow: 0 2px 5px rgba(220, 53, 69, 0.3);
            }

            .remove-set-btn:hover {
                transform: scale(1.1);
                box-shadow: 0 3px 8px rgba(220, 53, 69, 0.4);
            }

            .workout-actions {
                text-align: center;
                margin: 2rem 0;
            }

            .add-exercise-btn {
                background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
                color: white;
                border: none;
                border-radius: 25px;
                padding: 12px 25px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: bold;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
            }

            .add-exercise-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);
            }

            .form-textarea {
                min-height: 80px;
                resize: vertical;
            }

            /* Workout Results Styles */
            .workout-summary {
                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                border-radius: 15px;
                padding: 2rem;
                margin: 1.5rem 0;
                border: 2px solid #dee2e6;
            }

            .workout-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-bottom: 2rem;
            }

            .stat-item {
                background: white;
                padding: 1rem;
                border-radius: 10px;
                text-align: center;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
                border: 2px solid #e9ecef;
                transition: all 0.3s ease;
            }

            .stat-item:hover {
                border-color: #dc3545;
                transform: translateY(-2px);
            }

            .stat-label {
                display: block;
                font-size: 0.9rem;
                color: #6c757d;
                font-weight: 600;
                margin-bottom: 0.5rem;
            }

            .stat-value {
                display: block;
                font-size: 1.5rem;
                font-weight: bold;
                color: #dc3545;
            }

            .exercises-summary h3 {
                color: #2c3e50;
                margin-bottom: 1.5rem;
                text-align: center;
                font-size: 1.5rem;
            }

            .exercise-summary {
                background: white;
                border-radius: 10px;
                padding: 1.5rem;
                margin-bottom: 1rem;
                border: 2px solid #e9ecef;
                transition: all 0.3s ease;
            }

            .exercise-summary:hover {
                border-color: #dc3545;
                box-shadow: 0 5px 15px rgba(220, 53, 69, 0.1);
            }

            .exercise-summary h4 {
                color: #dc3545;
                margin-bottom: 1rem;
                font-size: 1.2rem;
                font-weight: bold;
            }

            .sets-summary {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .set-summary {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: bold;
                box-shadow: 0 2px 5px rgba(220, 53, 69, 0.3);
            }

            .notes-summary {
                background: white;
                border-radius: 10px;
                padding: 1.5rem;
                margin-top: 1.5rem;
                border: 2px solid #e9ecef;
            }

            .notes-summary h4 {
                color: #2c3e50;
                margin-bottom: 1rem;
            }

            .notes-summary p {
                color: #495057;
                line-height: 1.6;
                margin: 0;
            }



            /* Mobile Responsive */
            @media (max-width: 768px) {
                .form-row {
                    grid-template-columns: 1fr;
                }

                .set-entry {
                    grid-template-columns: 40px 1fr auto 1fr auto auto;
                    gap: 0.3rem;
                }

                .workout-stats {
                    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                }

                .sets-summary {
                    flex-direction: column;
                }

                .workout-page {
                    padding: 1rem;
                    margin: 0.5rem;
                }

            }
        </style>

        <script>
            let stopwatchInterval;
            let stopwatchRunning = false;
            let stopwatchTime = 0; // in milliseconds
            let lapTime = 0;
            let lastLapTime = 0;

            // Show stopwatch
            function showStopwatch() {
                document.getElementById('stopwatchModal').classList.add('show');
                console.log('🚀 العداد تم فتحه بنجاح!');
            }

            // Test stopwatch functionality - من ملف test_stopwatch.html
            function testStopwatch() {
                try {
                    showStopwatch();
                    console.log('✅ تم فتح العداد بنجاح');

                    // اختبار الألوان والتصميم
                    setTimeout(() => {
                        checkStopwatchDesign();
                    }, 500);
                } catch(e) {
                    console.log('❌ خطأ في فتح العداد:', e.message);
                }
            }

            // Check stopwatch design and colors - من ملف check_stopwatch.js
            function checkStopwatchDesign() {
                try {
                    const modal = document.querySelector('.stopwatch-modal.show');
                    if (modal) {
                        console.log('✅ العداد ظاهر بنجاح');

                        // التحقق من الألوان
                        const header = document.querySelector('.stopwatch-header');
                        if (header) {
                            const headerColor = window.getComputedStyle(header).backgroundColor;
                            console.log('🎨 لون الهيدر:', headerColor);
                        }

                        // التحقق من عرض الوقت
                        const timeDisplay = document.querySelector('#stopwatchTime');
                        if (timeDisplay) {
                            console.log('⏱️ عرض الوقت:', timeDisplay.textContent);
                        }

                        // التحقق من الأزرار
                        const buttons = document.querySelectorAll('.stopwatch-btn');
                        console.log('🔘 عدد الأزرار:', buttons.length);

                        // التحقق من الخلفية البيضاء
                        const stopwatchWindow = document.querySelector('.stopwatch-window');
                        if (stopwatchWindow) {
                            const bgColor = window.getComputedStyle(stopwatchWindow).backgroundColor;
                            console.log('🎨 لون خلفية النافذة:', bgColor);
                        }

                        console.log('✅ تم اختبار جميع عناصر العداد بنجاح');

                        // اختبار تلقائي للوظائف
                        setTimeout(() => {
                            testStopwatchFunctionality();
                        }, 1000);
                    } else {
                        console.log('❌ العداد غير ظاهر');
                    }
                } catch(e) {
                    console.log('❌ خطأ في اختبار التصميم:', e.message);
                }
            }

            // Test stopwatch functionality automatically
            function testStopwatchFunctionality() {
                console.log('🔧 بدء اختبار وظائف العداد...');

                try {
                    // اختبار زر التشغيل/الإيقاف
                    const playBtn = document.getElementById('playPauseBtn');
                    if (playBtn) {
                        console.log('▶️ اختبار زر التشغيل...');
                        playBtn.click();

                        setTimeout(() => {
                            console.log('⏸️ اختبار زر الإيقاف...');
                            playBtn.click();

                            // اختبار زر الإعادة تعيين
                            setTimeout(() => {
                                const resetBtn = document.getElementById('resetBtn');
                                if (resetBtn) {
                                    console.log('🔄 اختبار زر الإعادة تعيين...');
                                    resetBtn.click();
                                    console.log('✅ تم اختبار جميع الوظائف بنجاح');
                                }
                            }, 1000);
                        }, 2000);
                    }
                } catch(e) {
                    console.log('❌ خطأ في اختبار الوظائف:', e.message);
                }
            }

            // إضافة اختبار عند تحميل الصفحة (من ملف test_stopwatch.html)
            document.addEventListener('DOMContentLoaded', function() {
                console.log('🚀 العداد المتطور تم تحميله بنجاح!');

                // إضافة زر اختبار سريع للمطورين
                const testBtn = document.createElement('button');
                testBtn.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    left: 20px;
                    background: linear-gradient(135deg, #dc3545, #c82333);
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 25px;
                    font-size: 12px;
                    cursor: pointer;
                    z-index: 9999;
                    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
                    transition: all 0.3s ease;
                    display: none;
                `;
                testBtn.innerHTML = '🧪 اختبار العداد';
                testBtn.onclick = testStopwatch;

                // إظهار الزر فقط عند الضغط على Ctrl+Shift+T
                document.addEventListener('keydown', function(e) {
                    if (e.ctrlKey && e.shiftKey && e.key === 'T') {
                        testBtn.style.display = testBtn.style.display === 'none' ? 'block' : 'none';
                        console.log('🔧 وضع التطوير:', testBtn.style.display === 'block' ? 'مفعل' : 'معطل');
                    }
                });

                document.body.appendChild(testBtn);
            });

            // ===============================
            // WORKOUT TRACKER FUNCTIONALITY
            // ===============================

            let exerciseCounter = 1;

            // Show workout tracker
            function showWorkoutTracker() {
                document.getElementById('workoutTrackerModal').classList.remove('hidden');
                document.getElementById('workout-input-page').classList.remove('hidden');
                document.getElementById('workout-results-page').classList.add('hidden');

                // Set today's date
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('workout-date').value = today;

                // Reset form
                resetWorkoutForm();
            }

            // Close workout tracker
            function closeWorkoutTracker() {
                document.getElementById('workoutTrackerModal').classList.add('hidden');
                resetWorkoutForm();
            }

            // Reset workout form
            function resetWorkoutForm() {
                exerciseCounter = 1;
                const exercisesContainer = document.getElementById('workout-exercises');
                exercisesContainer.innerHTML = `
                    <div class="exercise-entry">
                        <div class="exercise-header">
                            <h4>التمرين 1</h4>
                            <button type="button" class="remove-exercise-btn" onclick="removeExercise(this)" style="display: none;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>اسم التمرين:</label>
                                <input type="text" class="form-input exercise-name" placeholder="اكتب اسم التمرين" required>
                            </div>
                            <div class="form-group">
                                <label>نوع التمرين:</label>
                                <select class="form-input exercise-type" required>
                                    <option value="">اختر نوع التمرين</option>
                                    <option value="صدر">صدر</option>
                                    <option value="ظهر">ظهر</option>
                                    <option value="كتف">كتف</option>
                                    <option value="باي">باي</option>
                                    <option value="تراي">تراي</option>
                                    <option value="أرجل">أرجل</option>
                                    <option value="بطن">بطن</option>
                                    <option value="كارديو">كارديو</option>
                                    <option value="أخرى">أخرى</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>عدد المجموعات:</label>
                                <input type="number" class="form-input sets-input" value="3" min="1" max="10" required>
                            </div>
                            <div class="form-group">
                                <label>عدد التكرارات (اختياري):</label>
                                <input type="number" class="form-input reps-input" placeholder="مثال: 10" min="1">
                            </div>
                        </div>
                    </div>
                `;
                document.getElementById('workout-notes').value = '';
            }

            // Save workout function
            function saveWorkout() {
                // Get workout date
                const workoutDate = document.getElementById('workout-date').value;
                if (!workoutDate) {
                    showValidationWarning('يرجى اختيار تاريخ التمرين');
                    return;
                }

                // Collect all exercises
                const exerciseEntries = document.querySelectorAll('.exercise-entry');
                const exercises = [];
                let hasValidExercise = false;

                exerciseEntries.forEach((entry, index) => {
                    const name = entry.querySelector('.exercise-name').value.trim();
                    const type = entry.querySelector('.exercise-type').value;
                    const sets = entry.querySelector('.sets-input').value;
                    const reps = entry.querySelector('.reps-input').value;

                    if (name && type && sets) {
                        exercises.push({
                            name: name,
                            type: type,
                            sets: parseInt(sets),
                            reps: reps ? parseInt(reps) : null
                        });
                        hasValidExercise = true;
                    }
                });

                if (!hasValidExercise) {
                    showValidationWarning('يرجى إدخال تمرين واحد على الأقل بالبيانات المطلوبة');
                    return;
                }

                // Get notes
                const notes = document.getElementById('workout-notes').value.trim();

                // Create workout object
                const workout = {
                    date: workoutDate,
                    exercises: exercises,
                    notes: notes,
                    timestamp: new Date().toISOString()
                };

                // Save to localStorage (you can replace this with actual backend call)
                const savedWorkouts = JSON.parse(localStorage.getItem('popeyeGymWorkouts') || '[]');
                savedWorkouts.push(workout);
                localStorage.setItem('popeyeGymWorkouts', JSON.stringify(savedWorkouts));

                // Show results page
                showWorkoutResultsPage(workout);
            }

            // Show workout results page
            function showWorkoutResultsPage(workout = null) {
                document.getElementById('workout-input-page').classList.add('hidden');
                document.getElementById('workout-results-page').classList.remove('hidden');

                if (workout) {
                    // Display workout summary
                    const summaryContainer = document.getElementById('workout-summary');
                    let summaryHTML = `
                        <div style="background: #ffffff; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-right: 4px solid #dc3545;">
                            <h4 style="color: #2c3e50; margin-bottom: 1rem;">
                                <i class="fas fa-calendar-alt" style="color: #dc3545; margin-left: 0.5rem;"></i>
                                التاريخ: ${new Date(workout.date).toLocaleDateString('ar-EG')}
                            </h4>
                            <h5 style="color: #2c3e50; margin-bottom: 1rem;">التمارين المسجلة:</h5>
                            <div style="display: grid; gap: 1rem;">
                    `;

                    workout.exercises.forEach((exercise, index) => {
                        summaryHTML += `
                            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; border-right: 3px solid #007bff;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <strong style="color: #2c3e50;">${exercise.name}</strong>
                                    <span style="background: #dc3545; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">${exercise.type}</span>
                                </div>
                                <div style="color: #6c757d;">
                                    <i class="fas fa-repeat"></i> ${exercise.sets} مجموعات
                                    ${exercise.reps ? `• <i class="fas fa-redo"></i> ${exercise.reps} تكرارات` : ''}
                                </div>
                            </div>
                        `;
                    });

                    summaryHTML += `</div>`;

                    if (workout.notes) {
                        summaryHTML += `
                            <div style="margin-top: 1rem; padding: 1rem; background: #fff3cd; border-radius: 8px; border-right: 3px solid #ffc107;">
                                <h6 style="color: #856404; margin-bottom: 0.5rem;">
                                    <i class="fas fa-sticky-note"></i> ملاحظات:
                                </h6>
                                <p style="color: #856404; margin: 0;">${workout.notes}</p>
                            </div>
                        `;
                    }

                    summaryHTML += `</div>`;
                    summaryContainer.innerHTML = summaryHTML;
                }
            }

            // Show workout input page
            function showWorkoutInputPage() {
                document.getElementById('workout-input-page').classList.remove('hidden');
                document.getElementById('workout-results-page').classList.add('hidden');
                resetWorkoutForm();
            }

            // Add new exercise
            function addExercise() {
                exerciseCounter++;
                const exercisesContainer = document.getElementById('workout-exercises');
                const newExercise = document.createElement('div');
                newExercise.className = 'exercise-entry';
                newExercise.innerHTML = `
                    <div class="exercise-header">
                        <h4>التمرين ${exerciseCounter}</h4>
                        <button type="button" class="remove-exercise-btn" onclick="removeExercise(this)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>اسم التمرين:</label>
                            <input type="text" class="form-input exercise-name" placeholder="اكتب اسم التمرين" required>
                        </div>
                        <div class="form-group">
                            <label>نوع التمرين:</label>
                            <select class="form-input exercise-type" required>
                                <option value="">اختر نوع التمرين</option>
                                <option value="صدر">صدر</option>
                                <option value="ظهر">ظهر</option>
                                <option value="كتف">كتف</option>
                                <option value="باي">باي</option>
                                <option value="تراي">تراي</option>
                                <option value="أرجل">أرجل</option>
                                <option value="بطن">بطن</option>
                                <option value="كارديو">كارديو</option>
                                <option value="أخرى">أخرى</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>عدد المجموعات:</label>
                            <input type="number" class="form-input sets-input" value="3" min="1" max="10" required>
                        </div>
                        <div class="form-group">
                            <label>عدد التكرارات (اختياري):</label>
                            <input type="number" class="form-input reps-input" placeholder="مثال: 10" min="1">
                        </div>
                    </div>
                `;
                exercisesContainer.appendChild(newExercise);

                // Show remove button for all exercises when there's more than one
                updateRemoveButtons();
            }

            // Remove exercise
            function removeExercise(button) {
                const exerciseEntry = button.closest('.exercise-entry');
                exerciseEntry.remove();

                // Renumber exercises
                const exercises = document.querySelectorAll('.exercise-entry');
                exercises.forEach((exercise, index) => {
                    const header = exercise.querySelector('h4');
                    header.textContent = `التمرين ${index + 1}`;
                });

                exerciseCounter = exercises.length;
                updateRemoveButtons();
            }

            // Update remove buttons visibility
            function updateRemoveButtons() {
                const exercises = document.querySelectorAll('.exercise-entry');
                const removeButtons = document.querySelectorAll('.remove-exercise-btn');

                removeButtons.forEach((button, index) => {
                    if (exercises.length <= 1) {
                        button.style.display = 'none';
                    } else {
                        button.style.display = 'block';
                    }
                });
            }

            // Close stopwatch
            function closeStopwatch() {
                document.getElementById('stopwatchModal').classList.remove('show');
                if (stopwatchRunning) {
                    toggleStopwatch(); // Stop if running
                }
            }

            // Toggle stopwatch (play/pause)
            function toggleStopwatch() {
                const playBtn = document.getElementById('playPauseBtn');
                const playIcon = playBtn.querySelector('i');
                const lapBtn = document.getElementById('lapBtn');

                if (!stopwatchRunning) {
                    // Start stopwatch
                    stopwatchRunning = true;
                    playBtn.classList.add('playing');
                    playIcon.className = 'fas fa-pause';
                    lapBtn.disabled = false;

                    stopwatchInterval = setInterval(() => {
                        stopwatchTime += 10; // Increment by 10ms
                        lapTime += 10;
                        updateDisplay();
                    }, 10);
                } else {
                    // Pause stopwatch
                    stopwatchRunning = false;
                    playBtn.classList.remove('playing');
                    playIcon.className = 'fas fa-play';
                    clearInterval(stopwatchInterval);
                }
            }

            // Reset stopwatch
            function resetStopwatch() {
                stopwatchRunning = false;
                clearInterval(stopwatchInterval);
                stopwatchTime = 0;
                lapTime = 0;
                lastLapTime = 0;

                const playBtn = document.getElementById('playPauseBtn');
                const playIcon = playBtn.querySelector('i');
                const lapBtn = document.getElementById('lapBtn');

                playBtn.classList.remove('playing');
                playIcon.className = 'fas fa-play';
                lapBtn.disabled = true;

                updateDisplay();
            }

            // Record lap
            function recordLap() {
                if (stopwatchRunning) {
                    lastLapTime = lapTime;
                    lapTime = 0; // Reset lap counter
                    updateDisplay();
                }
            }

            // Share stopwatch
            function shareStopwatch() {
                const shareData = {
                    title: 'العداد - Popeye Gym',
                    text: 'اكتشف العداد الاحترافي من موقع Popeye Gym - أداة مثالية لتوقيت التمارين الرياضية',
                    url: window.location.href
                };

                if (navigator.share) {
                    navigator.share(shareData).catch(console.error);
                } else {
                    const text = `${shareData.title}\n${shareData.text}\n${shareData.url}`;
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(text).then(() => {
                            // Show success feedback
                            const shareBtn = document.querySelector('.share-btn');
                            const originalIcon = shareBtn.innerHTML;
                            shareBtn.innerHTML = '<i class="fas fa-check"></i>';
                            shareBtn.style.background = 'linear-gradient(135deg, #00b894 0%, #00a085 100%)';

                            setTimeout(() => {
                                shareBtn.innerHTML = originalIcon;
                                shareBtn.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                            }, 2000);
                        });
                    } else {
                        alert('لا يمكن مشاركة الرابط في هذا المتصفح');
                    }
                }
            }

            // Update display
            function updateDisplay() {
                const timeElement = document.getElementById('stopwatchTime');
                const lapElement = document.getElementById('stopwatchLap');

                // Format main time
                const totalSeconds = Math.floor(stopwatchTime / 1000);
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                const milliseconds = Math.floor((stopwatchTime % 1000) / 100);

                timeElement.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds}`;

                // Format lap time
                if (lastLapTime > 0) {
                    const lapSeconds = Math.floor(lastLapTime / 1000);
                    const lapMins = Math.floor(lapSeconds / 60);
                    const lapSecs = lapSeconds % 60;
                    const lapMs = Math.floor((lastLapTime % 1000) / 100);

                    lapElement.textContent = 
                        `Lap: ${lapMins}:${lapSecs.toString().padStart(2, '0')}.${lapMs}`;
                } else {
                    const currentLapSeconds = Math.floor(lapTime / 1000);
                    const currentLapMins = Math.floor(currentLapSeconds / 60);
                    const currentLapSecs = currentLapSeconds % 60;
                    const currentLapMs = Math.floor((lapTime % 1000) / 100);

                    lapElement.textContent = 
                        `Lap: ${currentLapMins}:${currentLapSecs.toString().padStart(2, '0')}.${currentLapMs}`;
                }
            }

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                const modal = document.getElementById('stopwatchModal');
                if (!modal.classList.contains('show')) return;

                switch(e.key) {
                    case 'Escape':
                        closeStopwatch();
                        break;
                    case ' ':
                        e.preventDefault();
                        toggleStopwatch();
                        break;
                    case 'r':
                    case 'R':
                        if (e.ctrlKey || e.metaKey) {
                            e.preventDefault();
                            resetStopwatch();
                        }
                        break;
                    case 'l':
                    case 'L':
                        if (stopwatchRunning) {
                            recordLap();
                        }
                        break;
                }
            });

            // Initialize display
            document.addEventListener('DOMContentLoaded', function() {
                updateDisplay();
            });

            // Add new exercise
            function addExercise() {
                exerciseCounter++;
                const exercisesContainer = document.getElementById('workout-exercises');
                const newExerciseHTML = `
                    <div class="exercise-entry">
                        <div class="exercise-header">
                            <h4>التمرين ${exerciseCounter}</h4>
                            <button type="button" class="remove-exercise-btn" onclick="removeExercise(this)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>اسم التمرين:</label>
                                <input type="text" class="form-input exercise-name" placeholder="اكتب اسم التمرين" required>
                            </div>
                            <div class="form-group">
                                <label>نوع التمرين:</label>
                                <select class="form-input exercise-type" required>
                                    <option value="">اختر نوع التمرين</option>
                                    <option value="صدر">صدر</option>
                                    <option value="ظهر">ظهر</option>
                                    <option value="كتف">كتف</option>
                                    <option value="باي">باي</option>
                                    <option value="تراي">تراي</option>
                                    <option value="أرجل">أرجل</option>
                                    <option value="بطن">بطن</option>
                                    <option value="كارديو">كارديو</option>
                                    <option value="أخرى">أخرى</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>عدد المجموعات:</label>
                                <input type="number" class="form-input sets-input" value="3" min="1" max="10" required>
                            </div>
                            <div class="form-group">
                                <label>عدد التكرارات (اختياري):</label>
                                <input type="number" class="form-input reps-input" placeholder="مثال: 10" min="1">
                            </div>
                        </div>
                    </div>
                `;
                exercisesContainer.insertAdjacentHTML('beforeend', newExerciseHTML);
                updateRemoveExerciseButtons();
            }

            // Remove exercise
            function removeExercise(button) {
                const exerciseEntry = button.closest('.exercise-entry');
                exerciseEntry.remove();
                updateExerciseNumbers();
                updateRemoveExerciseButtons();
            }

            // Update exercise numbers
            function updateExerciseNumbers() {
                const exercises = document.querySelectorAll('#workout-exercises .exercise-entry');
                exercises.forEach((exercise, index) => {
                    const header = exercise.querySelector('.exercise-header h4');
                    header.textContent = `التمرين ${index + 1}`;
                });
                exerciseCounter = exercises.length;
            }

            // Update remove exercise buttons visibility
            function updateRemoveExerciseButtons() {
                const exercises = document.querySelectorAll('#workout-exercises .exercise-entry');
                exercises.forEach((exercise, index) => {
                    const removeBtn = exercise.querySelector('.remove-exercise-btn');
                    removeBtn.style.display = exercises.length > 1 ? 'block' : 'none';
                });
            }

            // Save workout

            // Collect workout data
            function collectWorkoutData() {
                const data = {
                    date: document.getElementById('workout-date').value,
                    exercises: [],
                    notes: document.getElementById('workout-notes').value
                };

                const exercises = document.querySelectorAll('#workout-exercises .exercise-entry');
                exercises.forEach(exercise => {
                    const exerciseName = exercise.querySelector('.exercise-name').value;
                    const exerciseType = exercise.querySelector('.exercise-type').value;
                    const sets = exercise.querySelector('.sets-input').value;
                    const reps = exercise.querySelector('.reps-input').value;

                    if (exerciseName && exerciseType && sets) {
                        data.exercises.push({ 
                            name: exerciseName, 
                            type: exerciseType,
                            sets: parseInt(sets),
                            reps: reps ? parseInt(reps) : null
                        });
                    }
                });

                return data;
            }

            // Validate workout data
            function validateWorkoutData(data) {
                if (!data.date) {
                    alert('يرجى تحديد تاريخ التمرين');
                    return false;
                }

                if (data.exercises.length === 0) {
                    alert('يرجى إضافة تمرين واحد على الأقل مع مجموعة واحدة مكتملة');
                    return false;
                }

                return true;
            }

            // Display workout results
            function displayWorkoutResults(data) {
                const summaryContainer = document.getElementById('workout-summary');

                let totalSets = 0;
                let totalReps = 0;

                data.exercises.forEach(exercise => {
                    totalSets += exercise.sets;
                    if (exercise.reps) {
                        totalReps += exercise.sets * exercise.reps;
                    }
                });

                const formattedDate = new Date(data.date).toLocaleDateString('ar-EG', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                let exercisesHTML = '';
                data.exercises.forEach((exercise, index) => {
                    exercisesHTML += `
                        <div class="exercise-summary">
                            <h4>${exercise.name} (${exercise.type})</h4>
                            <div class="sets-summary">
                                <span class="set-summary">${exercise.sets} مجموعات${exercise.reps ? ` × ${exercise.reps} تكرار` : ''}</span>
                            </div>
                        </div>
                    `;
                });

                summaryContainer.innerHTML = `
                    <div class="workout-stats">
                        <div class="stat-item">
                            <span class="stat-label">التاريخ:</span>
                            <span class="stat-value">${formattedDate}</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">عدد التمارين:</span>
                            <span class="stat-value">${data.exercises.length}</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">إجمالي المجموعات:</span>
                            <span class="stat-value">${totalSets}</span>
                        </div>
                        ${totalReps > 0 ? `
                        <div class="stat-item">
                            <span class="stat-label">إجمالي التكرارات:</span>
                            <span class="stat-value">${totalReps}</span>
                        </div>
                        ` : ''}
                    </div>

                    <div class="exercises-summary">
                        <h3>تفاصيل التمارين:</h3>
                        ${exercisesHTML}
                    </div>

                    ${data.notes ? `
                        <div class="notes-summary">
                            <h4>الملاحظات:</h4>
                            <p>${data.notes}</p>
                        </div>
                    ` : ''}
                `;

                // Store data for image generation
                window.currentWorkoutData = data;
            }

            // Show workout input page
            function showWorkoutInputPage() {
                document.getElementById('workout-results-page').classList.add('hidden');
                document.getElementById('workout-input-page').classList.remove('hidden');
                resetWorkoutForm();
            }


            // Share workout tracker
            function shareWorkoutTracker() {
                if (navigator.share) {
                    navigator.share({
                        title: 'تسجيل التمارين - Popeye Gym',
                        text: 'سجل تمارينك اليومية مع Popeye Gym',
                        url: window.location.href
                    });
                } else {
                    // Fallback - copy to clipboard
                    navigator.clipboard.writeText(window.location.href);
                    alert('تم نسخ الرابط إلى الحافظة');
                }
            }

            console.log('🚀 العداد المتطور تم تحميله بنجاح!');

            // Modern Validation Warning Functions
            function showValidationWarning(message) {
                console.log('🔔 عرض تحذير:', message);
                const modal = document.getElementById('validation-warning-modal');
                const messageElement = document.getElementById('validation-warning-message');

                if (modal && messageElement) {
                    console.log('✅ تم العثور على عناصر التحذير');
                    messageElement.textContent = message;

                    // Force visibility and style
                    modal.style.display = 'flex';
                    modal.style.position = 'fixed';
                    modal.style.top = '0';
                    modal.style.left = '0';
                    modal.style.width = '100%';
                    modal.style.height = '100%';
                    modal.style.zIndex = '99999';
                    modal.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';

                    modal.classList.add('show');

                    console.log('📱 تم عرض التحذير بنجاح');

                    // Auto-hide after 8 seconds
                    setTimeout(() => {
                        closeValidationWarning();
                    }, 8000);

                    // Add sound effect (optional)
                    try {
                        // Create a subtle beep sound
                        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        oscillator.type = 'sine';

                        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.5);
                    } catch (e) {
                        // Audio context might not be supported
                        console.log('🔇 الصوت غير مدعوم');
                    }
                } else {
                    console.log('❌ لم يتم العثور على عناصر التحذير، استخدام التحذير البديل');
                    // Fallback to alert if modal not found
                    alert(message);
                }
            }

            function closeValidationWarning() {
                const modal = document.getElementById('validation-warning-modal');
                if (modal) {
                    modal.classList.remove('show');
                    modal.style.display = 'none';
                    console.log('❌ تم إغلاق التحذير');
                }
            }

            // Close warning when clicking outside the modal
            document.addEventListener('click', function(event) {
                const modal = document.getElementById('validation-warning-modal');
                const content = document.querySelector('.validation-warning-content');

                if (modal && modal.classList.contains('show') && 
                    !content.contains(event.target)) {
                    closeValidationWarning();
                }
            });

            // Close warning with Escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closeValidationWarning();
                }
            });

            // ===============================
            // ADVANCED DOWNLOAD FUNCTIONS 
            // ===============================

            // Download Calories Results with Workout Style Design
            function downloadCaloriesAsImage() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    calories: document.getElementById('ultra-calories-result').textContent,
                    protein: document.getElementById('ultra-protein-result').textContent,
                    carbs: document.getElementById('ultra-carbs-result').textContent,
                    fats: document.getElementById('ultra-fats-result').textContent,
                    bmi: document.getElementById('ultra-bmi-result').textContent,
                    date: new Date().toLocaleDateString('ar-EG')
                };

                // Create workout-style image
                createWorkoutStyleCaloriesImage(ctx, canvas, data);
            }

            // Download Ultra Calories Results
            function downloadUltraCaloriesResults() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    calories: document.getElementById('ultra-calories-result').textContent,
                    protein: document.getElementById('ultra-protein-result').textContent,
                    carbs: document.getElementById('ultra-carbs-result').textContent,
                    fats: document.getElementById('ultra-fats-result').textContent,
                    bmi: document.getElementById('ultra-bmi-result').textContent
                };

                // Create premium branded image
                createPremiumCaloriesImage(ctx, canvas, data);
            }

            // Download Body Fat Results (Workout Style)
            function downloadBodyFatAsImage() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    bodyFat: document.getElementById('bf-percentage').textContent,
                    fatWeight: document.getElementById('bf-fat-weight').textContent,
                    leanMass: document.getElementById('bf-lean-mass').textContent,
                    date: new Date().toLocaleDateString('ar-EG')
                };

                createWorkoutStyleBodyFatImage(ctx, canvas, data);
            }

            // Download Body Fat Results
            function downloadBodyFatResults() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    bodyFat: document.getElementById('bf-percentage').textContent,
                    fatWeight: document.getElementById('bf-fat-weight').textContent,
                    leanMass: document.getElementById('bf-lean-mass').textContent
                };

                // Create premium branded image
                createPremiumBodyFatImage(ctx, canvas, data);
            }

            // Download Energy Results (Workout Style)
            function downloadEnergyAsImage() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    bmr: document.getElementById('bmr-value').textContent,
                    tdee: document.getElementById('tdee-value').textContent,
                    formula: document.getElementById('formula-used').textContent,
                    activity: document.getElementById('activity-level').textContent,
                    weightLoss: document.getElementById('weight-loss').textContent,
                    maintainWeight: document.getElementById('maintain-weight').textContent,
                    weightGain: document.getElementById('weight-gain').textContent,
                    date: new Date().toLocaleDateString('ar-EG')
                };

                createWorkoutStyleEnergyImage(ctx, canvas, data);
            }

            // Download Energy Results
            function downloadEnergyResults() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    bmr: document.getElementById('bmr-value').textContent,
                    tdee: document.getElementById('tdee-value').textContent,
                    formula: document.getElementById('formula-used').textContent,
                    activity: document.getElementById('activity-level').textContent,
                    weightLoss: document.getElementById('weight-loss').textContent,
                    maintainWeight: document.getElementById('maintain-weight').textContent,
                    weightGain: document.getElementById('weight-gain').textContent
                };

                // Create premium branded image
                createPremiumEnergyImage(ctx, canvas, data);
            }

            // Download Water Results (Workout Style)
            function downloadWaterAsImage() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    dailyWater: document.getElementById('daily-water').textContent,
                    waterGlasses: document.getElementById('water-glasses').textContent,
                    waterBottles: document.getElementById('water-bottles').textContent,
                    hourlyWater: document.getElementById('hourly-water').textContent,
                    basicWater: document.getElementById('basic-water').textContent,
                    exerciseWater: document.getElementById('exercise-water').textContent,
                    climateWater: document.getElementById('climate-water').textContent,
                    additionalWater: document.getElementById('additional-water').textContent,
                    date: new Date().toLocaleDateString('ar-EG')
                };

                createWorkoutStyleWaterImage(ctx, canvas, data);
            }

            // Download Water Results
            function downloadWaterResults() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect data
                const data = {
                    dailyWater: document.getElementById('daily-water').textContent,
                    waterGlasses: document.getElementById('water-glasses').textContent,
                    waterBottles: document.getElementById('water-bottles').textContent,
                    hourlyWater: document.getElementById('hourly-water').textContent,
                    basicWater: document.getElementById('basic-water').textContent,
                    exerciseWater: document.getElementById('exercise-water').textContent,
                    climateWater: document.getElementById('climate-water').textContent,
                    additionalWater: document.getElementById('additional-water').textContent
                };

                // Create premium branded image
                createPremiumWaterImage(ctx, canvas, data);
            }

            // Download Workout Results
            function downloadWorkoutAsImage() {
                const button = event.target;
                addButtonAnimation(button);

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                // Collect workout data
                const workoutDate = document.getElementById('workout-date').value || new Date().toLocaleDateString('ar-EG');
                const exercises = [];
                const exerciseEntries = document.querySelectorAll('.exercise-entry');

                exerciseEntries.forEach((entry, index) => {
                    const name = entry.querySelector('.exercise-name').value;
                    const type = entry.querySelector('.exercise-type').value;
                    const sets = entry.querySelector('.sets-input').value;
                    const reps = entry.querySelector('.reps-input').value;

                    if (name && type && sets) {
                        exercises.push({
                            name: name,
                            type: type,
                            sets: sets,
                            reps: reps || 'غير محدد'
                        });
                    }
                });

                const notes = document.getElementById('workout-notes').value || '';

                const data = {
                    date: workoutDate,
                    exercises: exercises,
                    notes: notes
                };

                // Create premium branded workout image
                createPremiumWorkoutImage(ctx, canvas, data);
            }

            // Add button animation effect
            function addButtonAnimation(button) {
                const shimmer = button.querySelector('span');
                shimmer.style.left = '0%';
                setTimeout(() => {
                    shimmer.style.left = '-100%';
                }, 600);

                // Change button text temporarily
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-left: 0.8rem;"></i>جاري التحضير...';

                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            }

            // Create Premium Calories Image
            function createPremiumCaloriesImage(ctx, canvas, data) {
                // Load logo first
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawCaloriesImageContent(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawCaloriesImageContent(ctx, canvas, data, null);
                };
            }

            function drawCaloriesImageContent(ctx, canvas, data, logoImg) {
                // Stunning gradient background
                const bgGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                bgGradient.addColorStop(0, '#1a1a2e');
                bgGradient.addColorStop(0.3, '#16213e');
                bgGradient.addColorStop(0.7, '#0f3460');
                bgGradient.addColorStop(1, '#dc3545');

                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Add geometric patterns
                drawGeometricPatterns(ctx, canvas.width, canvas.height);

                // Header with logo and website name
                drawPremiumHeader(ctx, canvas.width, 'حاسبة السعرات الحرارية', logoImg);

                // Main results section
                let yPos = 280;
                const cardWidth = 900;
                const cardHeight = 140;
                const centerX = canvas.width / 2;

                // Results cards
                const results = [
                    { icon: '🔥', label: 'السعرات المطلوبة', value: data.calories, unit: 'سعرة/يوم', color: '#dc3545' },
                    { icon: '🥩', label: 'البروتين', value: data.protein, unit: 'جرام/يوم', color: '#8B0000' },
                    { icon: '🍞', label: 'الكربوهيدرات', value: data.carbs, unit: 'جرام/يوم', color: '#ffd700' },
                    { icon: '🥑', label: 'الدهون', value: data.fats, unit: 'جرام/يوم', color: '#28a745' },
                    { icon: '❤️', label: 'مؤشر كتلة الجسم', value: data.bmi, unit: 'BMI', color: '#007bff' }
                ];

                results.forEach((result, index) => {
                    drawPremiumResultCard(ctx, centerX, yPos, cardWidth, cardHeight, result);
                    yPos += cardHeight + 20;
                });

                // Footer with gym info
                drawPremiumFooter(ctx, canvas.width, canvas.height);

                // Download the image
                downloadCanvasAsImage(canvas, 'حاسبة السعرات - Popeye Gym');
            }

            // Create Premium Body Fat Image
            function createPremiumBodyFatImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawBodyFatImageContent(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawBodyFatImageContent(ctx, canvas, data, null);
                };
            }

            function drawBodyFatImageContent(ctx, canvas, data, logoImg) {
                // Background
                const bgGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                bgGradient.addColorStop(0, '#1a1a2e');
                bgGradient.addColorStop(0.5, '#16213e');
                bgGradient.addColorStop(1, '#dc3545');

                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                drawGeometricPatterns(ctx, canvas.width, canvas.height);
                drawPremiumHeader(ctx, canvas.width, 'حاسبة نسبة الدهون', logoImg);

                let yPos = 350;
                const results = [
                    { icon: '📊', label: 'نسبة الدهون', value: data.bodyFat, unit: '%', color: '#dc3545' },
                    { icon: '⚖️', label: 'وزن الدهون', value: data.fatWeight, unit: 'كجم', color: '#ffc107' },
                    { icon: '💪', label: 'الكتلة اللادهنية', value: data.leanMass, unit: 'كجم', color: '#28a745' }
                ];

                results.forEach((result, index) => {
                    drawPremiumResultCard(ctx, canvas.width / 2, yPos, 900, 160, result);
                    yPos += 180;
                });

                drawPremiumFooter(ctx, canvas.width, canvas.height);
                downloadCanvasAsImage(canvas, 'حاسبة نسبة الدهون - Popeye Gym');
            }

            // Create Premium Energy Image
            function createPremiumEnergyImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawEnergyImageContent(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawEnergyImageContent(ctx, canvas, data, null);
                };
            }

            function drawEnergyImageContent(ctx, canvas, data, logoImg) {
                // Background
                const bgGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                bgGradient.addColorStop(0, '#1a1a2e');
                bgGradient.addColorStop(0.5, '#16213e');
                bgGradient.addColorStop(1, '#dc3545');

                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                drawGeometricPatterns(ctx, canvas.width, canvas.height);
                drawPremiumHeader(ctx, canvas.width, 'حاسبة الطاقة المطلوبة', logoImg);

                let yPos = 300;
                const results = [
                    { icon: '💓', label: 'معدل الأيض الأساسي', value: data.bmr, unit: 'سعرة', color: '#dc3545' },
                    { icon: '⚡', label: 'إجمالي الطاقة المطلوبة', value: data.tdee, unit: 'سعرة', color: '#ffd700' },
                    { icon: '📉', label: 'لفقدان الوزن', value: data.weightLoss, unit: 'سعرة', color: '#e74c3c' },
                    { icon: '⚖️', label: 'للحفاظ على الوزن', value: data.maintainWeight, unit: 'سعرة', color: '#17a2b8' },
                    { icon: '📈', label: 'لزيادة الوزن', value: data.weightGain, unit: 'سعرة', color: '#28a745' }
                ];

                results.forEach((result, index) => {
                    drawPremiumResultCard(ctx, canvas.width / 2, yPos, 900, 130, result);
                    yPos += 150;
                });

                drawPremiumFooter(ctx, canvas.width, canvas.height);
                downloadCanvasAsImage(canvas, 'حاسبة الطاقة - Popeye Gym');
            }

            // Create Premium Water Image
            function createPremiumWaterImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawWaterImageContent(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawWaterImageContent(ctx, canvas, data, null);
                };
            }

            function drawWaterImageContent(ctx, canvas, data, logoImg) {
                // Background with water theme
                const bgGradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                bgGradient.addColorStop(0, '#1a1a2e');
                bgGradient.addColorStop(0.3, '#0f3460');
                bgGradient.addColorStop(0.7, '#007bff');
                bgGradient.addColorStop(1, '#17a2b8');

                ctx.fillStyle = bgGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                drawGeometricPatterns(ctx, canvas.width, canvas.height);
                drawPremiumHeader(ctx, canvas.width, 'حاسبة كمية الماء', logoImg);

                let yPos = 300;
                const results = [
                    { icon: '💧', label: 'الكمية اليومية', value: data.dailyWater, unit: 'لتر', color: '#007bff' },
                    { icon: '🥛', label: 'عدد الأكواب', value: data.waterGlasses, unit: 'كوب', color: '#17a2b8' },
                    { icon: '🍼', label: 'زجاجات الماء', value: data.waterBottles, unit: 'زجاجة', color: '#20c997' },
                    { icon: '⏰', label: 'كل ساعة', value: data.hourlyWater, unit: 'مل', color: '#ffc107' }
                ];

                results.forEach((result, index) => {
                    drawPremiumResultCard(ctx, canvas.width / 2, yPos, 900, 140, result);
                    yPos += 160;
                });

                drawPremiumFooter(ctx, canvas.width, canvas.height);
                downloadCanvasAsImage(canvas, 'حاسبة الماء - Popeye Gym');
            }

            // Create Premium Workout Image
            function createPremiumWorkoutImage(ctx, canvas, data) {
                // Create logo image element first
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    // Now draw everything after logo is loaded
                    drawWorkoutImageContent(ctx, canvas, data, logoImg);
                };

                // In case logo fails to load, still draw the content
                logoImg.onerror = function() {
                    drawWorkoutImageContent(ctx, canvas, data, null);
                };
            }

            // Create Workout Style Calories Image - same design as workout tracker
            function createWorkoutStyleCaloriesImage(ctx, canvas, data) {
                // Create logo image element first
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    // Now draw everything after logo is loaded
                    drawCaloriesWorkoutStyle(ctx, canvas, data, logoImg);
                };

                // In case logo fails to load, still draw the content
                logoImg.onerror = function() {
                    drawCaloriesWorkoutStyle(ctx, canvas, data, null);
                };
            }

            function drawCaloriesWorkoutStyle(ctx, canvas, data, logoImg) {
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Red header
                const headerHeight = 180;
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, 0, canvas.width, headerHeight);

                // Logo area
                const logoSize = 80;
                const logoX = 100;
                const logoY = headerHeight / 2;

                if (logoImg) {
                    // Draw the logo directly without background circle
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name next to logo
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvas.width - 80, logoY - 15);

                ctx.font = '20px Arial';
                ctx.fillText('حاسبة السعرات والبروتين', canvas.width - 80, logoY + 15);

                // Date section below header
                let yPos = headerHeight + 40;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`التاريخ: ${data.date}`, canvas.width / 2, yPos);

                // Results table
                yPos += 60;
                const tableX = 80;
                const tableWidth = canvas.width - 160;
                const rowHeight = 100;

                // Table header
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(tableX, yPos, tableWidth, 50);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج السعرات والبروتين', canvas.width / 2, yPos + 32);

                yPos += 50;

                // Results data
                const results = [
                    { label: 'السعرات المطلوبة', value: data.calories, unit: 'سعرة/يوم' },
                    { label: 'البروتين', value: data.protein, unit: 'جرام/يوم' },
                    { label: 'الكربوهيدرات', value: data.carbs, unit: 'جرام/يوم' },
                    { label: 'الدهون', value: data.fats, unit: 'جرام/يوم' },
                    { label: 'مؤشر كتلة الجسم', value: data.bmi, unit: 'BMI' }
                ];

                results.forEach((result, index) => {
                    // Alternating row colors
                    ctx.fillStyle = index % 2 === 0 ? '#f8f9fa' : '#ffffff';
                    ctx.fillRect(tableX, yPos, tableWidth, rowHeight);

                    // Row border
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                    // Result number
                    ctx.fillStyle = '#dc3545';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${index + 1}`, tableX + 40, yPos + 35);

                    // Result details
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 22px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(result.label, canvas.width - 100, yPos + 30);

                    ctx.font = 'bold 24px Arial';
                    ctx.fillStyle = '#dc3545';
                    ctx.fillText(`${result.value} ${result.unit}`, canvas.width - 100, yPos + 65);

                    yPos += rowHeight;
                });

                downloadCanvasAsImage(canvas, 'حاسبة السعرات والبروتين - Popeye Gym');
            }

            // Body Fat Workout Style Image
            function createWorkoutStyleBodyFatImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawBodyFatWorkoutStyle(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawBodyFatWorkoutStyle(ctx, canvas, data, null);
                };
            }

            function drawBodyFatWorkoutStyle(ctx, canvas, data, logoImg) {
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Red header
                const headerHeight = 180;
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, 0, canvas.width, headerHeight);

                // Logo area
                const logoSize = 80;
                const logoX = 100;
                const logoY = headerHeight / 2;

                if (logoImg) {
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name next to logo
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvas.width - 80, logoY - 15);

                ctx.font = '20px Arial';
                ctx.fillText('حاسبة نسبة الدهون', canvas.width - 80, logoY + 15);

                // Date section below header
                let yPos = headerHeight + 40;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`التاريخ: ${data.date}`, canvas.width / 2, yPos);

                // Results table
                yPos += 60;
                const tableX = 80;
                const tableWidth = canvas.width - 160;
                const rowHeight = 120;

                // Table header
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(tableX, yPos, tableWidth, 50);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج تحليل الدهون في الجسم', canvas.width / 2, yPos + 32);

                yPos += 50;

                // Results data
                const results = [
                    { label: 'نسبة الدهون في الجسم', value: data.bodyFat, unit: '%' },
                    { label: 'وزن الدهون', value: data.fatWeight, unit: 'كجم' },
                    { label: 'الكتلة العضلية', value: data.leanMass, unit: 'كجم' }
                ];

                results.forEach((result, index) => {
                    // Alternating row colors
                    ctx.fillStyle = index % 2 === 0 ? '#f8f9fa' : '#ffffff';
                    ctx.fillRect(tableX, yPos, tableWidth, rowHeight);

                    // Row border
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                    // Result number
                    ctx.fillStyle = '#dc3545';
                    ctx.font = 'bold 24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${index + 1}`, tableX + 50, yPos + 40);

                    // Result details
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 26px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(result.label, canvas.width - 100, yPos + 35);

                    ctx.font = 'bold 32px Arial';
                    ctx.fillStyle = '#dc3545';
                    ctx.fillText(`${result.value} ${result.unit}`, canvas.width - 100, yPos + 80);

                    yPos += rowHeight;
                });

                downloadCanvasAsImage(canvas, 'حاسبة نسبة الدهون - Popeye Gym');
            }

            // Energy Workout Style Image
            function createWorkoutStyleEnergyImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawEnergyWorkoutStyle(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawEnergyWorkoutStyle(ctx, canvas, data, null);
                };
            }

            function drawEnergyWorkoutStyle(ctx, canvas, data, logoImg) {
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Red header
                const headerHeight = 180;
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, 0, canvas.width, headerHeight);

                // Logo area
                const logoSize = 80;
                const logoX = 100;
                const logoY = headerHeight / 2;

                if (logoImg) {
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name next to logo
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvas.width - 80, logoY - 15);

                ctx.font = '20px Arial';
                ctx.fillText('حساب الاحتياجات من الطاقة', canvas.width - 80, logoY + 15);

                // Date section below header
                let yPos = headerHeight + 40;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`التاريخ: ${data.date}`, canvas.width / 2, yPos);

                // Results table
                yPos += 60;
                const tableX = 80;
                const tableWidth = canvas.width - 160;
                const rowHeight = 90;

                // Table header
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(tableX, yPos, tableWidth, 50);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج احتياجات الطاقة اليومية', canvas.width / 2, yPos + 32);

                yPos += 50;

                // Results data
                const results = [
                    { label: 'معدل الأيض الأساسي', value: data.bmr, unit: 'سعرة' },
                    { label: 'إجمالي الطاقة اليومية', value: data.tdee, unit: 'سعرة' },
                    { label: 'لفقدان الوزن', value: data.weightLoss, unit: 'سعرة' },
                    { label: 'للحفاظ على الوزن', value: data.maintainWeight, unit: 'سعرة' },
                    { label: 'لزيادة الوزن', value: data.weightGain, unit: 'سعرة' }
                ];

                results.forEach((result, index) => {
                    // Alternating row colors
                    ctx.fillStyle = index % 2 === 0 ? '#f8f9fa' : '#ffffff';
                    ctx.fillRect(tableX, yPos, tableWidth, rowHeight);

                    // Row border
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                    // Result number
                    ctx.fillStyle = '#dc3545';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${index + 1}`, tableX + 40, yPos + 30);

                    // Result details
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(result.label, canvas.width - 100, yPos + 25);

                    ctx.font = 'bold 22px Arial';
                    ctx.fillStyle = '#dc3545';
                    ctx.fillText(`${result.value} ${result.unit}`, canvas.width - 100, yPos + 55);

                    yPos += rowHeight;
                });

                downloadCanvasAsImage(canvas, 'حساب الاحتياجات من الطاقة - Popeye Gym');
            }

            // Water Workout Style Image
            function createWorkoutStyleWaterImage(ctx, canvas, data) {
                const logoImg = new Image();
                logoImg.src = '/images/logo.png';

                logoImg.onload = function() {
                    drawWaterWorkoutStyle(ctx, canvas, data, logoImg);
                };

                logoImg.onerror = function() {
                    drawWaterWorkoutStyle(ctx, canvas, data, null);
                };
            }

            function drawWaterWorkoutStyle(ctx, canvas, data, logoImg) {
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Red header
                const headerHeight = 180;
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, 0, canvas.width, headerHeight);

                // Logo area
                const logoSize = 80;
                const logoX = 100;
                const logoY = headerHeight / 2;

                if (logoImg) {
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name next to logo
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvas.width - 80, logoY - 15);

                ctx.font = '20px Arial';
                ctx.fillText('حساب كمية الماء المطلوبة', canvas.width - 80, logoY + 15);

                // Date section below header
                let yPos = headerHeight + 40;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`التاريخ: ${data.date}`, canvas.width / 2, yPos);

                // Results table
                yPos += 60;
                const tableX = 80;
                const tableWidth = canvas.width - 160;
                const rowHeight = 85;

                // Table header
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(tableX, yPos, tableWidth, 50);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('نتائج احتياجات الماء اليومية', canvas.width / 2, yPos + 32);

                yPos += 50;

                // Results data
                const results = [
                    { label: 'إجمالي الماء اليومي', value: data.dailyWater, unit: 'لتر' },
                    { label: 'عدد الأكواب', value: data.waterGlasses, unit: 'كوب' },
                    { label: 'عدد القوارير', value: data.waterBottles, unit: 'قارورة' },
                    { label: 'الماء كل ساعة', value: data.hourlyWater, unit: 'مل' },
                    { label: 'الماء الأساسي', value: data.basicWater, unit: 'لتر' },
                    { label: 'ماء إضافي للتمرين', value: data.exerciseWater, unit: 'لتر' }
                ];

                results.forEach((result, index) => {
                    // Alternating row colors
                    ctx.fillStyle = index % 2 === 0 ? '#f8f9fa' : '#ffffff';
                    ctx.fillRect(tableX, yPos, tableWidth, rowHeight);

                    // Row border
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                    // Result number
                    ctx.fillStyle = '#dc3545';
                    ctx.font = 'bold 18px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${index + 1}`, tableX + 35, yPos + 28);

                    // Result details
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 18px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(result.label, canvas.width - 100, yPos + 25);

                    ctx.font = 'bold 20px Arial';
                    ctx.fillStyle = '#dc3545';
                    ctx.fillText(`${result.value} ${result.unit}`, canvas.width - 100, yPos + 50);

                    yPos += rowHeight;
                });

                downloadCanvasAsImage(canvas, 'حساب كمية الماء المطلوبة - Popeye Gym');
            }

            function drawWorkoutImageContent(ctx, canvas, data, logoImg) {
                // White background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Red header
                const headerHeight = 180;
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(0, 0, canvas.width, headerHeight);

                // Logo area
                const logoSize = 80;
                const logoX = 100;
                const logoY = headerHeight / 2;

                if (logoImg) {
                    // Draw the logo directly without background circle
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name next to logo
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvas.width - 80, logoY - 15);

                ctx.font = '20px Arial';
                ctx.fillText('تسجيل التمارين', canvas.width - 80, logoY + 15);

                // Date section below header
                let yPos = headerHeight + 40;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 28px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`التاريخ: ${data.date}`, canvas.width / 2, yPos);

                // Exercises table
                yPos += 60;
                const tableX = 80;
                const tableWidth = canvas.width - 160;
                const rowHeight = 80;

                // Table header
                ctx.fillStyle = '#dc3545';
                ctx.fillRect(tableX, yPos, tableWidth, 50);

                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('قائمة التمارين', canvas.width / 2, yPos + 32);

                yPos += 50;

                // Table rows
                if (data.exercises && data.exercises.length > 0) {
                    data.exercises.forEach((exercise, index) => {
                        // Alternating row colors
                        ctx.fillStyle = index % 2 === 0 ? '#f8f9fa' : '#ffffff';
                        ctx.fillRect(tableX, yPos, tableWidth, rowHeight);

                        // Row border
                        ctx.strokeStyle = '#dc3545';
                        ctx.lineWidth = 1;
                        ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                        // Exercise number
                        ctx.fillStyle = '#dc3545';
                        ctx.font = 'bold 20px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText(`${index + 1}`, tableX + 40, yPos + 30);

                        // Exercise details
                        ctx.fillStyle = '#2c3e50';
                        ctx.font = 'bold 22px Arial';
                        ctx.textAlign = 'right';
                        ctx.fillText(exercise.name, canvas.width - 100, yPos + 25);

                        ctx.font = '18px Arial';
                        ctx.fillStyle = '#6c757d';
                        ctx.fillText(`${exercise.type} | ${exercise.sets} مجموعات | ${exercise.reps} تكرار`, canvas.width - 100, yPos + 50);

                        yPos += rowHeight;
                    });
                } else {
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(tableX, yPos, tableWidth, rowHeight);
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, rowHeight);

                    ctx.fillStyle = '#6c757d';
                    ctx.font = '24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('لا توجد تمارين مسجلة', canvas.width / 2, yPos + 40);
                    yPos += rowHeight;
                }

                // Notes section
                if (data.notes && data.notes.trim()) {
                    yPos += 30;
                    ctx.fillStyle = '#dc3545';
                    ctx.fillRect(tableX, yPos, tableWidth, 40);

                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('ملاحظات', canvas.width / 2, yPos + 26);

                    yPos += 40;
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(tableX, yPos, tableWidth, 60);
                    ctx.strokeStyle = '#dc3545';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(tableX, yPos, tableWidth, 60);

                    ctx.fillStyle = '#2c3e50';
                    ctx.font = '18px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(data.notes, canvas.width - 100, yPos + 35);
                }

                downloadCanvasAsImage(canvas, 'تسجيل التمارين - Popeye Gym');
            }

            // Draw geometric patterns background
            function drawGeometricPatterns(ctx, width, height) {
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                ctx.lineWidth = 2;

                // Diagonal lines
                for (let i = 0; i < width; i += 80) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i + 40, height);
                    ctx.stroke();
                }

                // Circles
                ctx.strokeStyle = 'rgba(220, 53, 69, 0.1)';
                for (let i = 0; i < 5; i++) {
                    ctx.beginPath();
                    ctx.arc(Math.random() * width, Math.random() * height, 50 + Math.random() * 100, 0, 2 * Math.PI);
                    ctx.stroke();
                }
            }

            // Draw premium header
            function drawPremiumHeader(ctx, canvasWidth, title, logoImg = null) {
                // Header background
                const headerGradient = ctx.createLinearGradient(0, 0, canvasWidth, 200);
                headerGradient.addColorStop(0, 'rgba(220, 53, 69, 0.9)');
                headerGradient.addColorStop(1, 'rgba(139, 0, 0, 0.8)');

                ctx.fillStyle = headerGradient;
                ctx.fillRect(0, 0, canvasWidth, 200);

                // Logo area with real logo image
                const logoSize = 100;
                const logoX = 120;
                const logoY = 100;

                if (logoImg) {
                    // Draw the logo directly without background circle
                    ctx.drawImage(logoImg, logoX - logoSize/2, logoY - logoSize/2, logoSize, logoSize);
                }

                // Website name
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 48px Arial';
                ctx.textAlign = 'right';
                ctx.fillText('Popeye Gym', canvasWidth - 80, 80);

                // Calculator title
                ctx.font = 'bold 32px Arial';
                ctx.fillText(title, canvasWidth - 80, 130);

                // Decorative line
                ctx.strokeStyle = '#ffd700';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(canvasWidth - 400, 150);
                ctx.lineTo(canvasWidth - 80, 150);
                ctx.stroke();
            }

            // Draw premium result card
            function drawPremiumResultCard(ctx, centerX, y, width, height, result) {
                const x = centerX - width / 2;

                // Card shadow
                ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
                ctx.fillRect(x + 8, y + 8, width, height);

                // Card background gradient
                const cardGradient = ctx.createLinearGradient(x, y, x + width, y + height);
                cardGradient.addColorStop(0, 'rgba(255, 255, 255, 0.95)');
                cardGradient.addColorStop(1, 'rgba(248, 249, 250, 0.9)');

                ctx.fillStyle = cardGradient;
                ctx.fillRect(x, y, width, height);

                // Card border
                ctx.strokeStyle = result.color;
                ctx.lineWidth = 4;
                ctx.strokeRect(x, y, width, height);

                // Icon and emoji
                ctx.font = '48px Arial';
                ctx.textAlign = 'right';
                ctx.fillText(result.icon, x + width - 80, y + 70);

                // Label
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 32px Arial';
                ctx.textAlign = 'right';
                ctx.fillText(result.label, x + width - 150, y + 50);

                // Value
                ctx.fillStyle = result.color;
                ctx.font = 'bold 48px Arial';
                ctx.fillText(result.value, x + width - 150, y + 100);

                // Unit
                ctx.fillStyle = '#6c757d';
                ctx.font = '24px Arial';
                ctx.fillText(result.unit, x + width - 150, y + 130);

                // Left accent line
                ctx.fillStyle = result.color;
                ctx.fillRect(x, y, 8, height);
            }

            // Draw premium footer
            function drawPremiumFooter(ctx, canvasWidth, canvasHeight) {
                const footerHeight = 180;
                const footerY = canvasHeight - footerHeight;

                // Footer background
                const footerGradient = ctx.createLinearGradient(0, footerY, canvasWidth, canvasHeight);
                footerGradient.addColorStop(0, 'rgba(44, 62, 80, 0.95)');
                footerGradient.addColorStop(1, 'rgba(52, 73, 94, 0.9)');

                ctx.fillStyle = footerGradient;
                ctx.fillRect(0, footerY, canvasWidth, footerHeight);

                // Gym name
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 40px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Popeye Gym', canvasWidth / 2, footerY + 50);

                // Contact info
                ctx.font = '24px Arial';
                ctx.fillStyle = '#ecf0f1';

                const contactInfo = [
                    '📍 الجماليه - خلف مطعم شيخ الحاره',
                    '📱 WhatsApp: 01555037364'
                ];

                contactInfo.forEach((info, index) => {
                    ctx.fillText(info, canvasWidth / 2, footerY + 90 + (index * 35));
                });
            }

            // Download canvas as image
            function downloadCanvasAsImage(canvas, filename) {
                // Convert canvas to blob
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename + '.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 'image/png', 1.0);
            }

        </script>

        <!-- Modern Validation Warning Modal -->
        <div id="validation-warning-modal" class="validation-warning-modal">
            <div class="validation-warning-content">
                <div class="validation-warning-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="validation-warning-title">تنبيه مهم</h3>
                <p id="validation-warning-message" class="validation-warning-message">
                    يرجى ملء جميع الحقول المطلوبة
                </p>
                <button class="validation-warning-button" onclick="closeValidationWarning()">
                    <i class="fas fa-check" style="margin-left: 8px;"></i>
                    فهمت
                </button>
            </div>
        </div>
    </body>
    </html>